{
  "version": "3.0.0",
  "generatedAt": "2026-02-04T11:44:15.380Z",
  "mode": "ai-enriched",
  "stats": {
    "totalHooks": 99,
    "totalComponents": 101,
    "componentsWithContext": 60,
    "totalCategories": 13
  },
  "categories": [
    {
      "name": "General",
      "patterns": [
        {
          "name": "useApiKeyManager",
          "description": "Hook for useApiKeyManager",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Manages the lifecycle of API Keys for the authenticated user. This hook handles the creation of new keys (often requiring a wallet signature), listing existing keys, and revoking access.",
          "example": "import { useApiKeyManager } from '@orderly.network/hooks';\n\nexport const ApiKeySettings = () => {\n  // Destructure creation, deletion, and listing capabilities\n  const { \n    createApiKey, \n    deleteApiKey, \n    apiKeys, \n    isLoading \n  } = useApiKeyManager();\n\n  const handleCreate = async () => {\n    try {\n      // Typically requires a signature or wallet interaction\n      const newKey = await createApiKey();\n      console.log('API Key created:', newKey);\n    } catch (error) {\n      console.error('Failed to create key', error);\n    }\n  };\n\n  return (\n    <div>\n      <h3>API Keys</h3>\n      <button onClick={handleCreate} disabled={isLoading}>\n        Generate New Key\n      </button>\n      <ul>\n        {apiKeys?.map((key) => (\n          <li key={key.key_id}>\n            {key.key_id} \n            <button onClick={() => deleteApiKey(key.key_id)}>Revoke</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};",
          "notes": [
            "Creating an API key usually requires an active wallet session and a signature to authorize the application.",
            "Always handle the loading state, as key generation involves network requests and blockchain interactions.",
            "Ensure you securely display the secret key only once upon creation, as most systems do not store it in plain text afterwards."
          ],
          "related": ["useAccountInfo", "useWallet"]
        },
        {
          "name": "useApiStatusActions",
          "description": "Hook for useApiStatusActions",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides actions to manually control the connection status with the Orderly Network API. Useful for implementing custom reconnection logic or connection toggles in the UI.",
          "example": "import { useApiStatusActions } from '@orderly.network/hooks';\n\nexport const ConnectionManager = () => {\n  // Access actions to control the API connection state\n  const { connect, disconnect, checkStatus } = useApiStatusActions();\n\n  return (\n    <div className=\"flex gap-2\">\n      <button onClick={() => connect()}>\n        Reconnect API\n      </button>\n      <button onClick={() => disconnect()}>\n        Disconnect\n      </button>\n      <button onClick={() => checkStatus()}>\n        Check Health\n      </button>\n    </div>\n  );\n};",
          "notes": [
            "This hook returns actions, not the status itself (use a corresponding status hook for reading the current state).",
            "Useful for recovering from WebSocket disconnections or switching network environments.",
            "Ensure you don't call `connect` repeatedly if a connection attempt is already in progress to avoid race conditions."
          ],
          "related": ["useAccountInfo", "useOrderlyContext"]
        },
        {
          "name": "useDataCenterContext",
          "description": "Hook for useDataCenterContext",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides access to the Data Center, which acts as a local cache for market configurations, symbol info, and static trading data required to validate orders and display market details.",
          "example": "import { useDataCenterContext } from '@orderly.network/hooks';\n\nexport const MarketInfo = ({ symbol }: { symbol: string }) => {\n  const { getSymbolInfo } = useDataCenterContext();\n\n  // Retrieve static market data for a specific trading pair\n  const marketData = getSymbolInfo(symbol);\n\n  if (!marketData) return <div>Market {symbol} not found</div>;\n\n  return (\n    <div className=\"grid grid-cols-2 gap-4\">\n      <div>\n        <span className=\"text-gray-500 block\">Min Order Size</span>\n        <span className=\"font-mono\">{marketData.min_order_size}</span>\n      </div>\n      <div>\n        <span className=\"text-gray-500 block\">Tick Size</span>\n        <span className=\"font-mono\">{marketData.tick_size}</span>\n      </div>\n      <div>\n        <span className=\"text-gray-500 block\">Quote Asset</span>\n        <span className=\"font-mono\">{marketData.quote_asset}</span>\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Useful for fetching symbol metadata (tick size, min order size) without making network requests.",
            "Data is often fetched once at startup and cached for performance.",
            "Essential for building order forms that need to validate inputs against market rules."
          ],
          "related": ["useOrderlyContext", "useMarkets", "useSymbolInfo"]
        },
        {
          "name": "useCommission",
          "description": "Hook for useCommission",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the total trading volume (commission basis) generated by the user's referral network. This is used to calculate potential earnings.",
          "example": "import { useCommission } from '@orderly.network/hooks';\n\nexport const ReferralStats = () => {\n  // Fetches the commission volume generated by the user's referrals\n  const { data, isLoading } = useCommission();\n\n  return (\n    <div className=\"card bg-white p-6 shadow rounded\">\n      <h2 className=\"text-xl font-semibold mb-4\">Commission Volume</h2>\n      \n      {isLoading ? (\n        <p>Loading stats...</p>\n      ) : (\n        <div className=\"text-3xl font-bold text-blue-600\">\n          {data?.volume ? `${data.volume} USDC` : '0 USDC'}\n        </div>\n      )}\n      \n      <p className=\"text-sm text-gray-500 mt-2\">\n        Total trading volume generated from your referred users.\n      </p>\n    </div>\n  );\n};",
          "notes": [
            "Returns a 'volume' field representing the aggregate volume.",
            "Data is useful for dashboards showing referral performance tiers.",
            "Relies on the user having an active referral account linked."
          ],
          "related": ["useRefereeInfo", "useReferralRebateSummary", "useReferralCode"]
        },
        {
          "name": "useRefereeInfo",
          "description": "Hook for useRefereeInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches detailed information about users referred by the current account. This includes their wallet addresses and potentially their registration status.",
          "example": "import { useRefereeInfo } from '@orderly.network/hooks';\n\nexport const RefereeList = () => {\n  // Fetches a list of users who have registered using the user's referral code\n  const { data: referees, isLoading } = useRefereeInfo();\n\n  return (\n    <div className=\"overflow-x-auto\">\n      <h3 className=\"text-lg font-medium mb-3\">My Referees</h3>\n      \n      {isLoading ? (\n        <div>Loading...</div>\n      ) : (\n        <table className=\"min-w-full text-sm text-left\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-4 py-2\">Address</th>\n              <th className=\"px-4 py-2\">Registered At</th>\n              <th className=\"px-4 py-2\">Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            {referees && referees.length > 0 ? (\n              referees.map((referee: any, index: number) => (\n                <tr key={index} className=\"border-b\">\n                  <td className=\"px-4 py-2 font-mono\">{referee.address}</td>\n                  <td className=\"px-4 py-2\">{new Date(referee.timestamp).toLocaleDateString()}</td>\n                  <td className=\"px-4 py-2 text-green-500\">Active</td>\n                </tr>\n              ))\n            ) : (\n              <tr>\n                <td colSpan={3} className=\"px-4 py-2 text-center text-gray-500\">\n                  No referees found yet.\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Returns an array of referee objects.",
            "Useful for tracking the growth of a referral network.",
            "May require pagination if the referral list is extensive."
          ],
          "related": ["useCommission", "useReferralRebateSummary", "useReferralCode"]
        },
        {
          "name": "useAllBrokers",
          "description": "Hook for useAllBrokers",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches and returns a list of all registered brokers available on the Orderly Network. This is essential for onboarding flows where a user must select a broker to associate their account with.",
          "example": "import { useAllBrokers } from '@orderly.network/hooks';\n\nexport const BrokerSelector = () => {\n  // Fetches the list of all available brokers on the network\n  const { data: brokers, isLoading, error } = useAllBrokers();\n\n  if (isLoading) return <div>Loading brokers...</div>;\n  if (error) return <div>Failed to load brokers.</div>;\n\n  return (\n    <select className=\"broker-select\">\n      <option value=\"\">Select a Broker</option>\n      {brokers?.map((broker) => (\n        <option key={broker.broker_id} value={broker.broker_id}>\n          {broker.name}\n        </option>\n      ))}\n    </select>\n  );\n};",
          "notes": [
            "The data returned usually contains broker details such as ID, name, and logo URL.",
            "This hook handles caching and network requests internally, so you don't need to manage fetch states manually.",
            "Useful for building a 'Choose your Broker' UI during wallet connection."
          ],
          "related": ["useAccount", "useConfig"]
        },
        {
          "name": "useCurEpochEstimate",
          "description": "Hook for useCurEpochEstimate",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the estimated rewards or trading points for the current epoch based on the user's recent activity. It helps users visualize their pending earnings before the epoch concludes.",
          "example": "import { useCurEpochEstimate } from '@orderly.network/hooks';\n\nexport const RewardsEstimateCard = () => {\n  // Provides estimated rewards/points for the current trading epoch\n  const { data: estimate, isLoading } = useCurEpochEstimate();\n\n  return (\n    <div className=\"reward-card\">\n      <h3>Current Epoch Estimates</h3>\n      {isLoading ? (\n        <p>Calculating...</p>\n      ) : (\n        <div>\n          <p>Est. Rewards: <strong>{estimate?.rewardAmount || 0} ORDER</strong></p>\n          <p>Epoch Progress: {estimate?.progress || 0}%</p>\n        </div>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "The values returned are estimates and may change slightly until the epoch is finalized.",
            "This hook is read-only; it does not require any parameters to function for the currently connected account.",
            "Pair this with a visual progress bar to increase user engagement."
          ],
          "related": ["useAccount", "useAllBrokers"]
        },
        {
          "name": "useCalculatorService",
          "description": "Hook for useCalculatorService",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a utility service to perform complex trading calculations, such as total cost, average price, and slippage estimation, based on current market data.",
          "example": "import { useCalculatorService } from '@orderly.network/hooks';\n\nexport const OrderPreview = ({ symbol, side, quantity, price }) => {\n  // Accesses the calculator service for estimating costs and slippage\n  const calculator = useCalculatorService();\n\n  const estimatedTotal = calculator?.calculateTotalCost({\n    symbol,\n    side,\n    quantity,\n    price\n  });\n\n  return (\n    <div className=\"order-preview\">\n      <h4>Order Estimation</h4>\n      <p>Estimated Cost: {estimatedTotal?.toFixed(4) || '---'}</p>\n    </div>\n  );\n};",
          "notes": [
            "This hook abstracts away the math required for different order types (Market, Limit).",
            "It relies on internal market data, so ensure the app has a valid data connection.",
            "Useful for pre-validation of orders before sending them to the API."
          ],
          "related": ["useFeeState", "useAccount"]
        },
        {
          "name": "useConfig",
          "description": "Hook for useConfig",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Grants access to the Orderly SDK's global configuration object. This includes environment settings, network IDs, and domain configurations required for API interactions.",
          "example": "import { useConfig } from '@orderly.network/hooks';\n\nexport const NetworkStatus = () => {\n  // Retrieves global configuration settings (Chain ID, Broker ID, etc.)\n  const config = useConfig();\n\n  return (\n    <div className=\"network-info\">\n      <p>Environment: {config?.env}</p>\n      <p>Chain ID: {config?.chainId}</p>\n      <p>Broker ID: {config?.brokerId}</p>\n    </div>\n  );\n};",
          "notes": [
            "This is a static configuration hook; the values generally do not change during the app lifecycle.",
            "Essential for debugging connection issues or displaying the correct network info to users.",
            "Do not mutate the config object returned by this hook."
          ],
          "related": ["useAccount", "useKeyStore"]
        },
        {
          "name": "useDatabaseInitialization",
          "description": "Hook for useDatabaseInitialization",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Handles the asynchronous initialization of the local IndexedDB used by Orderly for caching order history, balances, and account settings to improve performance.",
          "example": "import { useDatabaseInitialization } from '@orderly.network/hooks';\n\nexport const AppInitializer = ({ children }) => {\n  // Ensures the local IndexedDB is initialized before rendering the app\n  const { isInitialized, error } = useDatabaseInitialization();\n\n  if (error) {\n    return <div>Database Error: {error.message}</div>;\n  }\n\n  if (!isInitialized) {\n    return <div>Initializing local storage...</div>;\n  }\n\n  // App is ready to render components that rely on local DB\n  return <>{children}</>;\n};",
          "notes": [
            "Wrap your root component or a specific feature section with this to ensure data persistence works.",
            "If the DB fails to initialize, the app may still function in 'read-only' network mode but will lack offline capabilities.",
            "This hook usually only needs to be called once in the application tree."
          ],
          "related": ["useAccount", "useEventEmitter"]
        },
        {
          "name": "useEventEmitter",
          "description": "Hook for useEventEmitter",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides access to the SDK's internal event bus. It allows components to listen to real-time updates such as order fills, balance changes, or account status updates.",
          "example": "import { useEffect } from 'react';\nimport { useEventEmitter } from '@orderly.network/hooks';\n\nexport const OrderNotifications = () => {\n  const emitter = useEventEmitter();\n\n  useEffect(() => {\n    // Subscribe to order updates\n    const handleOrderUpdate = (data) => {\n      if (data.status === 'FILLED') {\n        console.log('Order filled!', data);\n        // Trigger toast notification logic here\n      }\n    };\n\n    emitter.on('ORDER_UPDATE', handleOrderUpdate);\n\n    // Cleanup subscription\n    return () => {\n      emitter.off('ORDER_UPDATE', handleOrderUpdate);\n    };\n  }, [emitter]);\n\n  return null; // This component handles logic only\n};",
          "notes": [
            "Always remove event listeners in the `useEffect` cleanup function to prevent memory leaks.",
            "This is the primary way to achieve real-time UI updates without polling.",
            "Common events include 'ACCOUNT_UPDATE', 'ORDER_UPDATE', and 'POSITION_UPDATE'."
          ],
          "related": ["useAccount", "useDatabaseInitialization"]
        },
        {
          "name": "useFeeState",
          "description": "Hook for useFeeState",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the fee configuration for the current user, including maker/taker rates and any applicable volume-based discounts or VIP tiers.",
          "example": "import { useFeeState } from '@orderly.network/hooks';\n\nexport const FeeDisplay = () => {\n  // Fetches the current fee rates (Maker/Taker) for the connected account\n  const { data: feeState, isLoading } = useFeeState();\n\n  if (isLoading) return <div>Loading fees...</div>;\n\n  return (\n    <div className=\"fee-info\">\n      <h4>Your Fee Tier</h4>\n      <p>Maker Fee: {feeState?.maker_fee_rate}%</p>\n      <p>Taker Fee: {feeState?.taker_fee_rate}%</p>\n      <p>Discount: {feeState?.discount || 0}%</p>\n    </div>\n  );\n};",
          "notes": [
            "Fee rates can change based on 30-day trading volume, so this data should be refreshed periodically.",
            "Negative fee rates indicate rebates (common for Makers in high tiers).",
            "Use this to calculate accurate costs in the order confirmation modal."
          ],
          "related": ["useCalculatorService", "useAccount"]
        },
        {
          "name": "useKeyStore",
          "description": "Hook for useKeyStore",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Manages the cryptographic key store (wallet connection). It provides the interface for signing transactions and retrieving the connected wallet address.",
          "example": "import { useKeyStore } from '@orderly.network/hooks';\n\nexport const WalletConnector = () => {\n  const { keyStore, status } = useKeyStore();\n\n  const handleSign = async () => {\n    if (!keyStore) {\n      console.log('Wallet not connected');\n      return;\n    }\n    \n    // Example of using the keyStore to sign a message\n    // Note: The SDK handles most signing internally, but this exposes the capability\n    try {\n      const address = await keyStore.getAddress();\n      console.log('Connected Address:', address);\n    } catch (err) {\n      console.error('Signing error', err);\n    }\n  };\n\n  return (\n    <div>\n      <p>Status: {status}</p>\n      <button onClick={handleSign}>Check Address</button>\n    </div>\n  );\n};",
          "notes": [
            "This hook abstracts the underlying wallet provider (e.g., MetaMask, WalletConnect), allowing for a unified API.",
            "The `status` field helps determine if the user is connected, connecting, or disconnected.",
            "Direct usage of `keyStore` for signing is usually handled by higher-level hooks like `useAccount`, but it's available for custom implementations."
          ],
          "related": ["useAccount", "useConfig"]
        },
        {
          "name": "useNetworkInfo",
          "description": "Hook for useNetworkInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the current blockchain network configuration. This is essential for ensuring your dApp interacts with the correct chain (e.g., Orderly Testnet vs. Mainnet) and displaying the correct network metadata to the user.",
          "example": "import { useNetworkInfo } from '@orderly.network/hooks';\n\nexport const NetworkStatus = () => {\n  // Returns the current blockchain network ID and detailed info\n  const { id, info } = useNetworkInfo();\n\n  return (\n    <div className=\"network-badge\">\n      <span>Network ID: {id}</span>\n      {info && (\n        <span className=\"text-xs text-gray-500\">\n          ({info.name})\n        </span>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Use this to conditionally render features that are only available on specific networks (e.g., Testnet faucets).",
            "The 'id' is the chain ID, useful for switching wallets programmatically if there is a mismatch.",
            "The 'info' object often contains the RPC URL and chain name for display purposes."
          ],
          "related": ["useParamsCheck", "usePreLoadData"]
        },
        {
          "name": "useParamsCheck",
          "description": "Hook for useParamsCheck",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a utility to validate request parameters against the Orderly API schema locally before sending a network request. This helps reduce unnecessary API calls and provides immediate user feedback.",
          "example": "import { useParamsCheck } from '@orderly.network/hooks';\nimport { useState } from 'react';\n\nexport const TradeValidator = () => {\n  // Hook to validate parameters before sending to the API\n  const checkParams = useParamsCheck();\n  const [isValid, setIsValid] = useState(true);\n\n  const handleTradeCheck = (symbol: string, amount: number) => {\n    // Example validation logic using the hook\n    const result = checkParams.validate({ symbol, amount });\n    \n    if (!result.valid) {\n      setIsValid(false);\n      console.error('Validation failed:', result.errors);\n    } else {\n      setIsValid(true);\n    }\n  };\n\n  return (\n    <button \n      disabled={!isValid}\n      onClick={() => handleTradeCheck('PERP_ETH_USDC', 0.1)}\n    >\n      {isValid ? 'Execute Trade' : 'Invalid Params'}\n    </button>\n  );\n};",
          "notes": [
            "Always run this hook's validation logic before using 'usePoster' to save bandwidth.",
            "It helps catch type errors and missing required fields early in the user flow.",
            "Returns detailed error messages which can be mapped to UI form fields."
          ],
          "related": ["usePoster", "useNetworkInfo"]
        },
        {
          "name": "usePoster",
          "description": "Hook for usePoster",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A wrapper for making authenticated POST requests to the Orderly API. It automatically handles signature generation, timestamp attachment, and header construction required for private endpoints.",
          "example": "import { usePoster } from '@orderly.network/hooks';\nimport { useEffect, useState } from 'react';\n\nexport const OrderSubmission = () => {\n  // Hook for making authenticated POST requests to Orderly\n  const poster = usePoster();\n  const [loading, setLoading] = useState(false);\n\n  const placeOrder = async () => {\n    setLoading(true);\n    try {\n      const response = await poster('/v1/order', {\n        symbol: 'PERP_BTC_USDC',\n        side: 'BUY',\n        order_type: 'MARKET',\n        quantity: '0.01'\n      });\n      console.log('Order placed:', response);\n    } catch (error) {\n      console.error('Order failed:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return <button onClick={placeOrder}>{loading ? 'Sending...' : 'Buy BTC'}</button>;\n};",
          "notes": [
            "This is the primary method for executing actions like placing orders, canceling orders, or adjusting leverage.",
            "It relies on the wallet being connected and the account being initialized via other SDK providers.",
            "Handles the complex authentication headers (Orderly-Key, Orderly-Timestamp, Orderly-Signature) automatically."
          ],
          "related": ["useParamsCheck", "useWS"]
        },
        {
          "name": "usePreLoadData",
          "description": "Hook for usePreLoadData",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Manages the initial data fetching phase of the application, such as fetching account balances, positions, and settings. It ensures the app state is hydrated before the user interacts with the interface.",
          "example": "import { usePreLoadData } from '@orderly.network/hooks';\n\nexport const AppLoader = ({ children }: { children: React.ReactNode }) => {\n  // Returns loading state and error status for initial data fetch\n  const { error, done } = usePreLoadData();\n\n  if (error) {\n    return (\n      <div className=\"error-screen\">\n        <p>Failed to load account data.</p>\n        <button onClick={() => window.location.reload()}>Retry</button>\n      </div>\n    );\n  }\n\n  if (!done) {\n    return <div className=\"spinner\">Syncing with Orderly...</div>;\n  }\n\n  // Only render the main app when data is fully loaded\n  return <>{children}</>;\n};",
          "notes": [
            "Prevents UI flickering or empty states by blocking rendering until critical data is fetched.",
            "Useful for implementing a global loading splash screen on app startup.",
            "The 'error' state allows you to handle global failures (like network issues) gracefully."
          ],
          "related": ["useNetworkInfo", "useWS"]
        },
        {
          "name": "useRestrictedInfo",
          "description": "Hook for useRestrictedInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Determines if the user is accessing the application from a geographically restricted region based on their IP address. This is critical for compliance with international financial regulations.",
          "example": "import { useRestrictedInfo } from '@orderly.network/hooks';\n\nexport const RegionGuard = () => {\n  // Checks if the user's IP region is restricted\n  const { invalidRegions } = useRestrictedInfo();\n\n  if (invalidRegions) {\n    return (\n      <div className=\"p-4 bg-red-100 text-red-700\">\n        <h2>Service Unavailable</h2>\n        <p>Trading is not available in your current region due to regulatory restrictions.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"trading-interface\">\n      {/* Main trading UI components */}\n      <h1>Trade Now</h1>\n    </div>\n  );\n};",
          "notes": [
            "This hook usually performs an IP check on mount or via an API endpoint.",
            "If 'invalidRegions' is true, you should disable trading functionality entirely.",
            "Combine with local storage checks to avoid repeated API calls for the same session."
          ],
          "related": ["usePreLoadData", "useNetworkInfo"]
        },
        {
          "name": "useTrack",
          "description": "Hook for useTrack",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a standardized tracking function to log user interactions and events. This integrates with Orderly's analytics or external providers (like Mixpanel/Google Analytics) configured in the SDK.",
          "example": "import { useTrack } from '@orderly.network/hooks';\n\nexport const TradeButton = () => {\n  // Returns a tracking function to log user events\n  const track = useTrack();\n\n  const handleClick = () => {\n    // Log an event for analytics\n    track('button_click', {\n      element: 'buy_button',\n      page: 'trade_view',\n      symbol: 'PERP_ETH_USDC'\n    });\n    \n    // Execute trade logic...\n  };\n\n  return <button onClick={handleClick}>Buy ETH</button>;\n};",
          "notes": [
            "Standardize your event names (e.g., 'order_submitted', 'wallet_connected') for consistent data analysis.",
            "The hook automatically attaches context like wallet address or chain ID if configured.",
            "It is safe to call without awaiting; it usually fires-and-forgets."
          ],
          "related": ["useTrackingInstance", "usePoster"]
        },
        {
          "name": "useTrackingInstance",
          "description": "Hook for useTrackingInstance",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Returns the actual instance of the analytics/tracking library being used by the SDK. This allows for advanced configurations or method calls that aren't exposed by the higher-level `useTrack` hook.",
          "example": "import { useTrackingInstance } from '@orderly.network/hooks';\nimport { useEffect } from 'react';\n\nexport const CustomAnalytics = () => {\n  // Access the raw tracking provider instance\n  const tracker = useTrackingInstance();\n\n  useEffect(() => {\n    if (tracker) {\n      // Directly calling a method on the underlying analytics library\n      // e.g., setting a user ID or specific page view\n      tracker.setUserId('user_12345');\n      tracker.page('Trading Dashboard');\n    }\n  }, [tracker]);\n\n  return null;\n};",
          "notes": [
            "Use this when you need low-level access to the analytics provider (e.g., resetting identity, group analytics).",
            "Be careful with direct manipulation; ensure it doesn't conflict with the SDK's internal tracking logic.",
            "Useful for integrating legacy analytics code into a new Orderly-based app."
          ],
          "related": ["useTrack", "usePreLoadData"]
        }
      ]
    },
    {
      "name": "Order Management",
      "patterns": [
        {
          "name": "useOrderEntry",
          "description": "Hook for useOrderEntry",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A legacy hook for executing orders on the Orderly Network. It provides functions to place standard orders or reduce positions. Note that this is located in a 'deprecated' source folder.",
          "example": "import { useOrderEntry } from '@orderly.network/hooks';\n\n/**\n * NOTE: This hook is marked as deprecated in the source path.\n * Consider using useOrderEntryFromStore or useOrderStore for new implementations.\n */\nexport const LegacyOrderForm = () => {\n  const { placeOrder, reduceOrder, isPlacing } = useOrderEntry();\n\n  const handleMarketBuy = async () => {\n    try {\n      await placeOrder({\n        symbol: 'PERP_ETH_USDC',\n        side: 'BUY',\n        order_type: 'MARKET',\n        order_quantity: '0.1',\n      });\n    } catch (err) {\n      console.error('Order failed', err);\n    }\n  };\n\n  return (\n    <button onClick={handleMarketBuy} disabled={isPlacing}>\n      {isPlacing ? 'Placing...' : 'Buy 0.1 ETH'}\n    </button>\n  );\n};",
          "notes": [
            "This hook is deprecated; prefer the newer store-based hooks (`useOrderEntryFromStore`) for better state management.",
            "It handles the complexity of constructing the order payload and sending it to the Orderly API.",
            "Error handling is crucial here as order failures can occur due to insufficient margin or slippage."
          ],
          "related": ["useOrderEntryFromStore", "useOrderStore", "useAccountInfo"]
        },
        {
          "name": "useOrderEntryFromStore",
          "description": "Hook for useOrderEntryFromStore",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Reads and writes to the global order entry state store. This is the modern replacement for the deprecated `useOrderEntry`, allowing components to share form state across the application.",
          "example": "import { useOrderEntryFromStore } from '@orderly.network/hooks';\n\nexport const OrderInputDisplay = () => {\n  // Accesses the global Zustand store for order entry state\n  const { \n    price, \n    quantity, \n    side, \n    symbol,\n    setPrice, \n    setQuantity \n  } = useOrderEntryFromStore();\n\n  return (\n    <div className=\"p-4 border rounded\">\n      <h2>Place Order ({symbol})</h2>\n      <div>Current Side: {side}</div>\n      \n      <label>Price:</label>\n      <input \n        type=\"number\" \n        value={price} \n        onChange={(e) => setPrice(e.target.value)} \n      />\n      \n      <label>Quantity:</label>\n      <input \n        type=\"number\" \n        value={quantity} \n        onChange={(e) => setQuantity(e.target.value)} \n      />\n    </div>\n  );\n};",
          "notes": [
            "This hook connects directly to a Zustand store, making it highly performant for frequent updates.",
            "It allows different components (e.g., a chart, an order book, and a form) to share the same order context.",
            "Use this to build custom UI components that interact with the main trading panel."
          ],
          "related": ["useOrderStore", "useOrderEntity", "useOrderEntry"]
        },
        {
          "name": "useOrderEntity",
          "description": "Hook for useOrderEntity",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves metadata and constraints for the currently selected trading symbol. It provides data necessary for validating user input before order submission.",
          "example": "import { useOrderEntity } from '@orderly.network/hooks';\n\nexport const OrderConstraints = () => {\n  // Returns specific metadata about the trading pair\n  const { maxQty, symbol } = useOrderEntity();\n\n  return (\n    <div className=\"text-xs text-gray-500\">\n      <p>Symbol: {symbol}</p>\n      <p>Max Order Quantity: {maxQty}</p>\n    </div>\n  );\n};",
          "notes": [
            "Use `maxQty` to validate that the user's input does not exceed the exchange's limit for a single order.",
            "The data returned updates automatically when the user switches symbols in the global store.",
            "Essential for building input validation logic in custom order forms."
          ],
          "related": ["useOrderEntryFromStore", "useOrderStore", "useSymbolInfo"]
        },
        {
          "name": "useOrderStore",
          "description": "Hook for useOrderStore",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides access to the actions available in the global order store. This is used to programmatically control the order entry state (e.g., resetting the form, changing order types).",
          "example": "import { useOrderStore } from '@orderly.network/hooks';\n\nexport const OrderActionsPanel = () => {\n  // Accesses actions to manipulate the global order state\n  const { actions } = useOrderStore();\n\n  const resetForm = () => {\n    actions.reset();\n  };\n\n  const setMarketOrder = () => {\n    actions.setOrderType('MARKET');\n  };\n\n  return (\n    <div className=\"flex gap-4\">\n      <button onClick={resetForm}>Reset Form</button>\n      <button onClick={setMarketOrder}>Switch to Market</button>\n    </div>\n  );\n};",
          "notes": [
            "This hook specifically returns `actions`, separating state logic from state data.",
            "Useful for 'Quick Action' buttons or keyboard shortcuts that modify the order form.",
            "Keeps your UI components clean by abstracting store logic into action dispatchers."
          ],
          "related": ["useOrderEntryFromStore", "useOrderEntity", "useOrderEntry"]
        },
        {
          "name": "useMarketTradeStream",
          "description": "Hook for useMarketTradeStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a real-time stream of executed trades (fills) for a specific market. This is essential for displaying the 'Recent Trades' component of a trading interface.",
          "example": "import { useMarketTradeStream } from '@orderly.network/hooks';\n\nexport const RecentTrades = ({ symbol }: { symbol: string }) => {\n  // Subscribes to the websocket trade feed for a specific market.\n  // Returns an array of trade objects (data) representing recent fills.\n  const { data } = useMarketTradeStream({ symbol });\n\n  return (\n    <div className=\"trade-history\">\n      <h4>Recent Trades</h4>\n      <table>\n        <thead>\n          <tr>\n            <th>Price</th>\n            <th>Size</th>\n            <th>Time</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data?.map((trade, index) => (\n            <tr key={`${trade.trade_id}-${index}`}>\n              <td>{trade.price}</td>\n              <td>{trade.quantity}</td>\n              <td>{new Date(trade.timestamp).toLocaleTimeString()}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};",
          "notes": [
            "Updates automatically via WebSocket whenever a trade occurs.",
            "The `data` array is typically ordered by newest trades first.",
            "Ensure you clean up the subscription if the component unmounts (handled internally by the hook)."
          ],
          "related": ["useMarket", "useOrderBookStream", "useMarketsStream"]
        },
        {
          "name": "useOrderStream",
          "description": "Hook for useOrderStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a real-time stream of the user's own orders. It keeps the UI in sync with the exchange state as orders are matched, canceled, or expire.",
          "example": "import { useOrderStream } from '@orderly.network/hooks';\n\nexport const OpenOrdersTable = () => {\n  // Subscribes to the user's private order stream via WebSocket.\n  // Returns real-time updates for orders (New, Filled, Partially Filled, Canceled).\n  const { data: orders } = useOrderStream();\n\n  return (\n    <div className=\"orders-panel\">\n      <h3>Your Orders</h3>\n      {orders?.length === 0 ? (\n        <p>No open orders</p>\n      ) : (\n        <table>\n          <thead>\n            <tr>\n              <th>Symbol</th>\n              <th>Side</th>\n              <th>Size</th>\n              <th>Price</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map((order) => (\n              <tr key={order.order_id}>\n                <td>{order.symbol}</td>\n                <td className={order.side === 'BUY' ? 'text-green' : 'text-red'}>\n                  {order.side}\n                </td>\n                <td>{order.quantity}</td>\n                <td>{order.price}</td>\n                <td>{order.status}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};",
          "notes": ["Requires the user to be authenticated (Wallet connected).", null],
          "related": ["useOrderHistory", "usePositionStream", "useAccount"]
        },
        {
          "name": "useOrderbookStream",
          "description": "Hook for useOrderbookStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Connects to the Orderly Network websocket to stream real-time orderbook depth (bids and asks) for a specific trading pair. It handles the connection lifecycle and updates the state automatically.",
          "example": "import { useOrderbookStream } from '@orderly.network/hooks';\n\nexport const OrderBook = ({ symbol }: { symbol: string }) => {\n  // Subscribes to the websocket for the specific symbol's orderbook\n  const { asks, bids } = useOrderbookStream(symbol);\n\n  return (\n    <div className=\"order-book\">\n      <h3>Order Book: {symbol}</h3>\n      <div className=\"asks\">\n        <h4>Asks (Sell)</h4>\n        {asks.slice(0, 5).map((ask, i) => (\n          <div key={i} className=\"row\">\n            <span>{ask[0]}</span> {/* Price */}\n            <span>{ask[1]}</span> {/* Size */}\n          </div>\n        ))}\n      </div>\n      <div className=\"bids\">\n        <h4>Bids (Buy)</h4>\n        {bids.slice(0, 5).map((bid, i) => (\n          <div key={i} className=\"row\">\n            <span>{bid[0]}</span> {/* Price */}\n            <span>{bid[1]}</span> {/* Size */}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Returns arrays of arrays (e.g., [[price, size], [price, size]]), usually sorted by price.",
            "Automatically handles re-subscription if the symbol prop changes.",
            "Data is real-time; ensure your UI rendering logic is optimized to handle frequent updates."
          ],
          "related": ["useSymbolInfo", "usePublicDataObserver", "useTradesStream"]
        },
        {
          "name": "useOrderlyContext",
          "description": "Hook for useOrderlyContext",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Accesses the global Orderly SDK state. It is essential for retrieving connection status, the connected wallet address, and global functions like disconnecting or triggering modals.",
          "example": "import { useOrderlyContext } from '@orderly.network/hooks';\nimport { Button } from './ui';\n\nexport const ConnectionStatus = () => {\n  const { state, address, disconnect } = useOrderlyContext();\n\n  return (\n    <div className=\"flex items-center justify-between p-4 bg-gray-100 rounded\">\n      <div>\n        <p className=\"text-sm text-gray-500\">Status</p>\n        <p className={`font-bold ${state === 'connected' ? 'text-green-600' : 'text-yellow-600'}`}>\n          {state.toUpperCase()}\n        </p>\n        {address && <p className=\"text-xs font-mono mt-1\">{address}</p>}\n      </div>\n      \n      {state === 'connected' && (\n        <Button onClick={disconnect} variant=\"destructive\">\n          Disconnect Wallet\n        </Button>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Provides the core 'state' (e.g., connected, connecting, disconnected) of the SDK.",
            "Exposes the 'address' of the currently connected wallet.",
            "Contains utility functions like 'disconnect' and 'openSettings' to control the SDK behavior."
          ],
          "related": ["useWalletTopic", "useDataCenterContext", "useAccountInfo"]
        }
      ]
    },
    {
      "name": "Positions",
      "patterns": [
        {
          "name": "usePositionClose",
          "description": "Hook for usePositionClose",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A specialized hook for closing an open trading position. It abstracts the logic of calculating the required market order size to flatten the position.",
          "example": "import { usePositionClose } from '@orderly.network/hooks';\n\nexport const ClosePositionButton = ({ symbol, size }) => {\n  const { closePosition, isClosing } = usePositionClose();\n\n  const handleClose = async () => {\n    try {\n      // Executes a market order to reduce the position to 0\n      await closePosition({ \n        symbol: symbol,\n        // Usually calculates the opposite side automatically based on current position\n      });\n    } catch (error) {\n      console.error('Failed to close position', error);\n    }\n  };\n\n  return (\n    <button \n      onClick={handleClose} \n      disabled={isClosing}\n      className=\"bg-red-500 text-white px-4 py-2 rounded\"\n    >\n      {isClosing ? 'Closing...' : 'Close Position'}\n    </button>\n  );\n};",
          "notes": [
            "This typically executes a MARKET order to ensure the position is closed immediately.",
            "It automatically determines the side (BUY or SELL) required to close the position based on current holdings.",
            "Be aware of slippage risks when closing large positions via market orders."
          ],
          "related": ["usePosition", "useOrderEntry", "useAccountInfo"]
        },
        {
          "name": "usePositionStream",
          "description": "Hook for usePositionStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Maintains a real-time stream of the user's open positions. It calculates and returns key performance metrics like Unrealized PnL and Return on Investment (ROI) as market prices move.",
          "example": "import { usePositionStream } from '@orderly.network/hooks';\n\nexport const AccountSummary = () => {\n  // Streams real-time position updates, calculating PnL on the fly\n  const { unrealPnL, total_unreal_pnl, unrealPnlROI } = usePositionStream();\n\n  return (\n    <div className=\"account-stats\">\n      <div className=\"stat-card\">\n        <span>Total Unrealized PnL</span>\n        <span className={total_unreal_pnl >= 0 ? 'profit' : 'loss'}>\n          {total_unreal_pnl.toFixed(2)} USDC\n        </span>\n      </div>\n      <div className=\"stat-card\">\n        <span>ROI</span>\n        <span>{unrealPnlROI.toFixed(2)}%</span>\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Requires the user to be connected/wallet authenticated to return private position data.",
            "Values update frequently with market ticks; useful for live portfolio dashboards.",
            "Returns aggregated values (total) and potentially individual position breakdowns depending on implementation details."
          ],
          "related": ["usePrivateDataObserver", "useAccount", "useOrderbookStream"]
        }
      ]
    },
    {
      "name": "Account & Wallet",
      "patterns": [
        {
          "name": "useAccountInfo",
          "description": "Hook for useAccountInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the user's account information from the Orderly Network. This includes equity, total balance, available margin, and account health metrics.",
          "example": "import { useAccountInfo } from '@orderly.network/hooks';\n\nexport const AccountBalance = () => {\n  // Fetches comprehensive account data including balance and equity\n  const { accountInfo, isLoading } = useAccountInfo();\n\n  if (isLoading) return <div>Loading balance...</div>;\n\n  return (\n    <div className=\"account-summary\">\n      <h3>Account Overview</h3>\n      <p>Total Equity: ${accountInfo?.equity}</p>\n      <p>Available Balance: ${accountInfo?.availableBalance}</p>\n      <p>Margin Ratio: {accountInfo?.marginRatio}%</p>\n    </div>\n  );\n};",
          "notes": [
            "Data is usually real-time or near real-time, reflecting recent trades and funding payments.",
            "Essential for calculating buying power and displaying account health to the user.",
            "Returns undefined or null if the user is not connected or authenticated."
          ],
          "related": ["usePortfolio", "useApiKeyManager", "usePosition"]
        },
        {
          "name": "useSubAccountAlgoOrderStream",
          "description": "Hook for useSubAccountAlgoOrderStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Streams algorithmic orders (such as Stop-Loss, Take-Profit, or Iceberg orders) associated with a specific sub-account. This is distinct from standard limit/market orders.",
          "example": "import { useSubAccountAlgoOrderStream } from '@orderly.network/hooks';\n\nexport const AlgoOrdersPanel = ({ accountId }: { accountId: number }) => {\n  // Subscribes to algorithmic orders (Take Profit, Stop Loss, TWAP) for a specific sub-account.\n  // Returns a list of active conditional orders.\n  const { data: algoOrders } = useSubAccountAlgoOrderStream({ accountId });\n\n  return (\n    <div className=\"algo-orders\">\n      <h4>Conditional Orders (Account {accountId})</h4>\n      <ul>\n        {algoOrders?.map((algo) => (\n          <li key={algo.algo_order_id}>\n            <span>{algo.type}: {algo.symbol}</span>\n            <span>Trigger: {algo.trigger_price}</span>\n            <span>Status: {algo.status}</span>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};",
          "notes": [
            "Crucial for managing risk strategies that run in the background.",
            "Filters by `accountId`, allowing support for multi-account architectures.",
            "Updates trigger conditions and execution status in real-time."
          ],
          "related": ["useOrderStream", "useSubAccountList", "useAlgoOrderHistory"]
        },
        {
          "name": "useWalletSubscription",
          "description": "Hook for useWalletSubscription",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Subscribes to the user's wallet state via WebSocket, providing real-time updates on balances and portfolio changes.",
          "example": "import { useWalletSubscription } from \"@orderly.network/hooks\";\nimport { useEffect, useState } from \"react\";\n\nexport const WalletSummary = () => {\n  const [balance, setBalance] = useState(\"0\");\n\n  // Subscribes to wallet updates via WebSocket\n  useWalletSubscription((data) => {\n    // Callback triggered on balance change\n    console.log(\"Wallet update:\", data);\n    // Update local state with new total equity or available balance\n    if (data.account) {\n      setBalance(data.account.total_equity);\n    }\n  });\n\n  return (\n    <div className=\"wallet-summary\">\n      <h3>Total Equity: ${balance}</h3>\n    </div>\n  );\n};",
          "notes": [
            "Uses a callback pattern to handle incoming data updates efficiently.",
            "Keeps the UI in sync with the backend without manual polling.",
            "Essential for dashboards displaying real-time PnL and available margin."
          ],
          "related": ["useBalanceTopic", "useTransfer"]
        },
        {
          "name": "useWalletTopic",
          "description": "Hook for useWalletTopic",
          "installation": "npm install @orderly.network/hooks",
          "usage": "This hook manages the WebSocket subscription for the user's wallet data. It provides real-time updates on account balances, equity, and holding status without requiring manual polling.",
          "example": "import { useWalletTopic } from '@orderly.network/hooks';\n\nexport const WalletBalance = () => {\n  // Subscribes to the wallet websocket topic for real-time balance updates\n  const { data, error, isConnected } = useWalletTopic();\n\n  if (error) return <div>Error loading wallet data</div>;\n  if (!isConnected) return <div>Connecting to wallet feed...</div>;\n\n  return (\n    <div className=\"p-4 border rounded\">\n      <h3 className=\"font-bold mb-2\">Real-time Wallet Overview</h3>\n      {/* Data structure typically contains total_equity, available_balance, etc. */}\n      <p>Equity: {data?.holding?.total_equity || 'Loading...'}</p>\n      <p>Available: {data?.holding?.available_balance || 'Loading...'}</p>\n    </div>\n  );\n};",
          "notes": [
            "Automatically handles connection and reconnection logic to the Orderly WebSocket.",
            "Returns the latest 'holding' object which includes total equity and available balance.",
            "Must be used within an OrderlyProvider to ensure authentication context is available."
          ],
          "related": ["useOrderlyContext", "useAccountInfo", "usePrivateTopic"]
        },
        {
          "name": "useSubAccountDataObserver",
          "description": "Hook for useSubAccountDataObserver",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Monitors the asset holdings of a specific sub-account. It returns an array of assets and their balances, updating reactively as the sub-account trades or transfers funds.",
          "example": "import { useSubAccountDataObserver } from '@orderly.network/hooks';\n\nexport const SubAccountHoldings = ({ accountId }: { accountId: number }) => {\n  // Observes the holdings (balances) of a specific sub-account\n  const { holding, isLoading } = useSubAccountDataObserver(accountId);\n\n  if (isLoading) return <p>Loading sub-account data...</p>;\n\n  return (\n    <div className=\"border p-4 rounded bg-gray-50\">\n      <h4 className=\"font-bold mb-2\">Sub-Account #{accountId} Holdings</h4>\n      \n      {holding && holding.length > 0 ? (\n        <ul className=\"space-y-2\">\n          {holding.map((asset: any) => (\n            <li key={asset.token} className=\"flex justify-between\">\n              <span className=\"uppercase font-medium\">{asset.token}</span>\n              <span className=\"font-mono\">\n                {parseFloat(asset.total_balance).toFixed(4)}\n              </span>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p className=\"text-gray-500\">No assets found in this sub-account.</p>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Requires a valid 'accountId' (sub-account ID) as an argument.",
            "Returns a 'holding' array containing token details and balances.",
            "Ideal for portfolio management views across multiple accounts."
          ],
          "related": ["useSubAccountWS", "useSubAccountMaxWithdrawal", "useSubAccounts"]
        },
        {
          "name": "useSubAccountMaxWithdrawal",
          "description": "Hook for useSubAccountMaxWithdrawal",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Calculates the maximum withdrawable amount for a specific token from a sub-account, taking into account pending orders and margin requirements to prevent liquidation.",
          "example": "import { useSubAccountMaxWithdrawal } from '@orderly.network/hooks';\nimport { useState } from 'react';\n\nexport const SubAccountWithdraw = ({ accountId, token }: { accountId: number, token: string }) => {\n  const [amount, setAmount] = useState('');\n  \n  // Calculates the maximum amount that can be withdrawn from a sub-account for a specific token\n  const { data: maxWithdrawal, isLoading } = useSubAccountMaxWithdrawal(accountId, token);\n\n  const handleMaxClick = () => {\n    if (maxWithdrawal) {\n      setAmount(maxWithdrawal.max_withdrawal);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col gap-2\">\n      <label className=\"text-sm font-medium\">Withdraw Amount ({token})</label>\n      <div className=\"relative\">\n        <input \n          type=\"number\" \n          value={amount} \n          onChange={(e) => setAmount(e.target.value)}\n          className=\"w-full border rounded p-2 pr-16\"\n          placeholder=\"0.00\"\n        />\n        <button \n          onClick={handleMaxClick}\n          disabled={isLoading}\n          className=\"absolute right-2 top-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded hover:bg-blue-200\"\n        >\n          MAX\n        </button>\n      </div>\n      {isLoading && <p className=\"text-xs text-gray-500\">Calculating limits...</p>}\n    </div>\n  );\n};",
          "notes": [
            "Essential for building withdrawal forms to prevent user errors.",
            "Returns an object with 'max_withdrawal' value.",
            "Logic accounts for locked funds (used in open orders)."
          ],
          "related": ["useSubAccountDataObserver", "useSubAccountWS", "useWithdraw"]
        },
        {
          "name": "useSubAccountWS",
          "description": "Hook for useSubAccountWS",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Establishes and maintains a WebSocket connection dedicated to a specific sub-account. It streams real-time updates for that account's trades, orders, and balance changes.",
          "example": "import { useSubAccountWS } from '@orderly.network/hooks';\nimport { useEffect } from 'react';\n\nexport const SubAccountMonitor = ({ accountId }: { accountId: number }) => {\n  // Manages the WebSocket connection specifically for sub-account updates\n  const { status, lastMessage } = useSubAccountWS(accountId);\n\n  useEffect(() => {\n    if (lastMessage) {\n      console.log(`Update for Sub-Account ${accountId}:`, lastMessage);\n      // Handle real-time updates, e.g., trigger a toast or update local state\n    }\n  }, [lastMessage, accountId]);\n\n  return (\n    <div className=\"flex items-center gap-2 text-sm\">\n      <span>Sub-Account #{accountId} Feed:</span>\n      <span className={`w-2 h-2 rounded-full ${\n        status === 'open' ? 'bg-green-500' : 'bg-red-500'\n      }`}></span>\n      <span className=\"text-gray-500 capitalize\">{status}</span>\n    </div>\n  );\n};",
          "notes": [
            "Ensures real-time data synchronization for the specified sub-account.",
            "Returns connection 'status' (open, closed, connecting) and 'lastMessage'.",
            "Useful when building a dashboard that monitors specific sub-account activity."
          ],
          "related": ["useSubAccountDataObserver", "useSubAccountMaxWithdrawal", "useWalletTopic"]
        },
        {
          "name": "useAccountRewardsHistory",
          "description": "Hook for useAccountRewardsHistory",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves a history of trading rewards earned by the user. The data is typically segmented by 'epoch_id' (campaign period) and 'broker' (the specific broker entity).",
          "example": "import { useAccountRewardsHistory } from '@orderly.network/hooks';\n\nexport const RewardsHistoryTable = () => {\n  // Fetches historical trading rewards data grouped by epoch and broker\n  const { data, isLoading } = useAccountRewardsHistory();\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <h2 className=\"text-2xl font-bold mb-4\">Trading Rewards History</h2>\n      \n      {isLoading ? (\n        <p>Loading history...</p>\n      ) : (\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Epoch ID</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Broker</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Reward Amount</th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {data && data.length > 0 ? (\n              data.map((reward: any) => (\n                <tr key={`${reward.epoch_id}-${reward.broker}`}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {reward.epoch_id}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {reward.broker}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium\">\n                    {reward.reward} USDC\n                  </td>\n                </tr>\n              ))\n            ) : (\n              <tr>\n                <td colSpan={3} className=\"px-6 py-4 text-center text-gray-500\">\n                  No rewards history available.\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Returns a list where each item contains 'epoch_id' and 'broker'.",
            "Useful for tracking performance across different trading reward campaigns.",
            "Data may be paginated depending on the history length."
          ],
          "related": ["useReferralRebateSummary", "useAccountInfo", "useCommission"]
        },
        {
          "name": "useAccount",
          "description": "Hook for useAccount",
          "installation": "npm install @orderly.network/hooks",
          "usage": "The core hook for managing Orderly account state. It provides flags to distinguish between main and sub-accounts, and imperative methods to create, update, or refresh account details from the chain.",
          "example": "import { useAccount } from '@orderly.network/hooks';\n\nexport const AccountManager = () => {\n  const {\n    isMainAccount,\n    subAccount,\n    refresh,\n    create,\n    update\n  } = useAccount();\n\n  const handleCreateSubAccount = async () => {\n    try {\n      await create();\n      await refresh(); // Refresh state after creation\n    } catch (err) {\n      console.error('Failed to create sub-account', err);\n    }\n  };\n\n  return (\n    <div className=\"account-panel\">\n      <div className=\"status-badge\">\n        {isMainAccount ? 'Main Account' : 'Sub-Account'}\n      </div>\n      \n      {isMainAccount && (\n        <button onClick={handleCreateSubAccount}>\n          Create Sub-Account\n        </button>\n      )}\n\n      {subAccount && (\n        <div className=\"sub-account-info\">\n          <p>Address: {subAccount.address}</p>\n        </div>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Always check `isMainAccount` before allowing actions that are restricted to main accounts (like creating sub-accounts).",
            "The `refresh` function is vital when you perform an action outside the hook (like a direct contract call) and need to sync the UI.",
            "The `create` and `update` methods are asynchronous and require a connected wallet."
          ],
          "related": ["useKeyStore", "useWallet"]
        }
      ]
    },
    {
      "name": "Orderly Network",
      "patterns": [
        {
          "name": "usePortfolio",
          "description": "Hook for usePortfolio",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a high-level view of the user's entire portfolio, aggregating values from all positions and wallets into a single snapshot.",
          "example": "import { usePortfolio } from '@orderly.network/hooks';\n\nexport const PortfolioDashboard = () => {\n  // Aggregates data across all assets and positions\n  const { portfolioValue, totalUnrealizedPnl } = usePortfolio();\n\n  return (\n    <div className=\"portfolio-card\">\n      <h2>My Portfolio</h2>\n      <div className=\"stat\">\n        <span>Total Value:</span>\n        <span className=\"font-bold\">${portfolioValue}</span>\n      </div>\n      <div className={`stat ${totalUnrealizedPnl >= 0 ? 'text-green-500' : 'text-red-500'}`}>\n        <span>Unrealized PnL:</span>\n        <span>${totalUnrealizedPnl}</span>\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Useful for dashboard views where individual asset details are less important than the total picture.",
            "Calculates total Unrealized PnL across all open positions automatically.",
            "Helps users track overall performance rather than per-symbol performance."
          ],
          "related": ["useAccountInfo", "usePosition", "useFundingRateBySymbol"]
        },
        {
          "name": "useStatisticsDaily",
          "description": "Hook for useStatisticsDaily",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a summary of the user's daily trading performance, specifically returning Volume (`vol`), Profit and Loss (`pnl`), and Return on Investment (`roi`). Ideal for dashboard summaries.",
          "example": "import { useStatisticsDaily } from '@orderly.network/hooks';\n\nexport const DailyStatsCard = () => {\n  // Fetches aggregated daily trading statistics\n  // Returns: vol (Volume), pnl (Profit and Loss), roi (Return on Investment)\n  const { stats, isLoading } = useStatisticsDaily();\n\n  if (isLoading) return <div>Calculating stats...</div>;\n\n  return (\n    <div className=\"grid grid-cols-3 gap-4\">\n      <div className=\"p-4 bg-blue-50 rounded\">\n        <p className=\"text-xs text-gray-500 uppercase\">Volume (24h)</p>\n        <p className=\"text-xl font-bold\">${stats?.vol.toLocaleString()}</p>\n      </div>\n      <div className=\"p-4 bg-green-50 rounded\">\n        <p className=\"text-xs text-gray-500 uppercase\">Realized PnL</p>\n        <p className={`text-xl font-bold ${stats?.pnl >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n          ${stats?.pnl.toFixed(2)}\n        </p>\n      </div>\n      <div className=\"p-4 bg-purple-50 rounded\">\n        <p className=\"text-xs text-gray-500 uppercase\">ROI</p>\n        <p className=\"text-xl font-bold\">{stats?.roi}%</p>\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Data is typically aggregated for the current day or the most recent completed trading day.",
            "ROI is calculated based on realized PnL versus account equity.",
            "Useful for quick health checks of a trading account without querying individual orders."
          ],
          "related": ["useAssetsHistory", "useOrderHistory", "usePositions"]
        },
        {
          "name": "useBalanceSubscription",
          "description": "Hook for useBalanceSubscription",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Maintains a real-time connection to listen for balance changes. It updates the state instantly when a trade executes, a fee is charged, or a transfer completes, without requiring a page refresh.",
          "example": "import { useBalanceSubscription } from '@orderly.network/hooks';\n\nexport const LiveBalanceDisplay = () => {\n  // Subscribes to real-time balance updates via WebSocket\n  const { balances, loading } = useBalanceSubscription();\n\n  // Calculate total equity across all tokens\n  const totalEquity = balances?.reduce((acc, curr) => acc + (curr.usd_value || 0), 0) || 0;\n\n  return (\n    <div className=\"flex items-center space-x-4\">\n      <div className=\"text-right\">\n        <p className=\"text-xs text-gray-500\">Total Balance (Live)</p>\n        <p className=\"text-xl font-bold font-mono\">\n          ${totalEquity.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n        </p>\n      </div>\n      <div className={`h-2 w-2 rounded-full ${loading ? 'bg-yellow-400' : 'bg-green-500'}`} \n           title={loading ? 'Connecting...' : 'Live'} />\n    </div>\n  );\n};",
          "notes": [
            "Uses WebSocket under the hood for low-latency updates.",
            "Automatically re-subscribes if the connection drops.",
            "Prefer this over polling `useAccount` for UI elements that need instant feedback."
          ],
          "related": ["useAccount", "useWSObserver", "useOrderbook"]
        },
        {
          "name": "useChain",
          "description": "Hook for useChain",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A simple hook to identify the currently connected blockchain. It returns the `chain_name` (e.g., 'arbitrum'), allowing the UI to adapt based on the network the user has selected in their wallet.",
          "example": "import { useChain } from '@orderly.network/hooks';\n\nexport const NetworkIndicator = () => {\n  // Returns the current chain context (e.g., 'arbitrum', 'optimism')\n  const { chainName, isSupported } = useChain();\n\n  return (\n    <div className=\"flex items-center space-x-2\">\n      <span className={`w-3 h-3 rounded-full ${isSupported ? 'bg-green-500' : 'bg-red-500'}`}></span>\n      <span className=\"text-sm font-medium capitalize\">\n        {chainName || 'Unknown Network'}\n      </span>\n      {!isSupported && (\n        <span className=\"text-xs text-red-500 border border-red-500 px-1 rounded\">\n          Unsupported\n        </span>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Essential for multi-chain dApps to display correct network info.",
            "Can be used to gate features that are only available on specific chains.",
            "Derives data from the wallet provider (e.g., MetaMask, WalletConnect)."
          ],
          "related": ["useChainInfo", "useAccount", "useWallet"]
        },
        {
          "name": "useChainInfo",
          "description": "Hook for useChainInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides detailed metadata about the current blockchain connection, such as the Chain ID, Block Explorer URL, and native currency information. This is useful for constructing transaction links or displaying network-specific icons.",
          "example": "import { useChainInfo } from '@orderly.network/hooks';\n\nexport const BlockExplorerLink = ({ txHash }: { txHash: string }) => {\n  // Retrieves detailed configuration for the current chain\n  const { chainId, explorerUrl, nativeCurrency } = useChainInfo();\n\n  return (\n    <div className=\"p-4 border rounded bg-gray-50\">\n      <h4 className=\"font-bold mb-2\">Chain Details</h4>\n      <div className=\"text-sm space-y-1\">\n        <p><strong>Chain ID:</strong> {chainId}</p>\n        <p><strong>Native Currency:</strong> {nativeCurrency?.name} ({nativeCurrency?.symbol})</p>\n        \n        {explorerUrl && txHash && (\n          <a \n            href={`${explorerUrl}/tx/${txHash}`} \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            className=\"inline-block mt-2 text-blue-600 hover:underline\"\n          >\n            View Transaction on Explorer &rarr;\n          </a>\n        )}\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Returns the `explorerUrl` which is vital for creating 'View on Etherscan' links.",
            "Helps in validating transaction parameters before sending.",
            "More comprehensive than `useChain`, offering config objects rather than just names."
          ],
          "related": ["useChain", "useTransferHistory", "useAccount"]
        },
        {
          "name": "useChains",
          "description": "Hook for useChains",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the list of blockchain networks supported by the Orderly Network, separating them into testnet and mainnet configurations. This is essential for multi-chain wallet connection and switching logic.",
          "example": "import { useChains } from '@orderly.network/hooks';\n\nexport const ChainSelector = () => {\n  // Returns configurations for supported networks (e.g., Arbitrum, Optimism)\n  const { testnet, mainnet } = useChains();\n\n  // Example: Displaying mainnet chain IDs\n  return (\n    <div>\n      <h3>Supported Mainnets</h3>\n      <ul>\n        {mainnet.map((chain) => (\n          <li key={chain.id}>\n            {chain.name}: {chain.id}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};",
          "notes": [
            "Returns an array of chain objects containing metadata like chainId, name, and RPC URLs.",
            "Useful for dynamically generating network switchers in your UI.",
            "Ensure you check the environment (testnet vs mainnet) to display the correct list to users."
          ],
          "related": ["useDeposit", "useWallet", "useAccount"]
        },
        {
          "name": "useComputedLTV",
          "description": "Hook for useComputedLTV",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Computes the specific Loan-to-Value (LTV) metrics for a given asset quantity. It breaks down the calculation into the quantity, current index price, and the asset's risk weight.",
          "example": "import { useComputedLTV } from '@orderly.network/hooks';\n\nexport const MarginHealth = ({ symbol, quantity }: { symbol: string; quantity: number }) => {\n  // Calculates Loan-to-Value components based on current oracle prices and risk weights\n  const { qty, indexPrice, weight } = useComputedLTV(symbol, quantity);\n\n  if (!indexPrice) return <div>Loading price data...</div>;\n\n  const notionalValue = qty * indexPrice;\n  const weightedValue = notionalValue * weight;\n\n  return (\n    <div className=\"p-4 border rounded\">\n      <h4>Margin Analysis for {symbol}</h4>\n      <p>Index Price: ${indexPrice.toFixed(2)}</p>\n      <p>Risk Weight: {(weight * 100).toFixed(2)}%</p>\n      <p>Weighted Collateral Value: ${weightedValue.toFixed(2)}</p>\n    </div>\n  );\n};",
          "notes": [
            "Essential for building custom margin calculators or liquidation risk UIs.",
            "The 'weight' return value is crucial for understanding how much collateral value an asset contributes.",
            "Values update in real-time as oracle prices change."
          ],
          "related": ["useAccount", "usePosition", "useMarginInfo"]
        },
        {
          "name": "useConvert",
          "description": "Hook for useConvert",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides functionality to convert between different token representations (like bridged tokens vs native tokens) supported within the Orderly ecosystem.",
          "example": "import { useConvert } from '@orderly.network/hooks';\n\nexport const AssetConverter = () => {\n  // Hook to handle asset conversion logic (e.g., USDC.e to USDC)\n  const { convert, isLoading } = useConvert();\n\n  const handleConvert = async () => {\n    try {\n      const txHash = await convert({\n        fromToken: 'USDC.e',\n        toToken: 'USDC',\n        amount: '100'\n      });\n      console.log('Conversion successful:', txHash);\n    } catch (error) {\n      console.error('Conversion failed:', error);\n    }\n  };\n\n  return (\n    <button onClick={handleConvert} disabled={isLoading}>\n      {isLoading ? 'Converting...' : 'Convert 100 USDC.e to USDC'}\n    </button>\n  );\n};",
          "notes": [
            "Abstracts the complexity of approving and executing token swaps or conversions.",
            "Usually handles the transaction signing and submission automatically.",
            "Check the specific token pairs supported by the SDK before implementing the UI."
          ],
          "related": ["useDeposit", "useBalance", "useAllowance"]
        },
        {
          "name": "useFundingDetails",
          "description": "Hook for useFundingDetails",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides granular information about the funding state of a perpetual market, including the next funding timestamp and estimated rates.",
          "example": "import { useFundingDetails } from '@orderly.network/hooks';\n\nexport const FundingInfo = ({ symbol }: { symbol: string }) => {\n  // Fetches detailed funding metrics including estimated funding and timestamps\n  const details = useFundingDetails(symbol);\n\n  if (!details) return <div>Loading funding details...</div>;\n\n  return (\n    <div className=\"text-sm\">\n      <h4>Funding Details: {symbol}</h4>\n      <div className=\"flex justify-between\">\n        <span>Next Funding:</span>\n        <span>{new Date(details.nextFundingTime).toLocaleTimeString()}</span>\n      </div>\n      <div className=\"flex justify-between\">\n        <span>Est. Rate:</span>\n        <span className={details.estimatedRate > 0 ? 'text-green-500' : 'text-red-500'}>\n          {details.estimatedRate}%\n        </span>\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Useful for displaying a countdown to the next funding fee payment.",
            "Helps traders understand the current cost of holding long or short positions.",
            "Data is usually updated frequently (near real-time)."
          ],
          "related": ["useFundingRate", "useFundingRateHistory", "useMarkets"]
        },
        {
          "name": "useFundingRate",
          "description": "Hook for useFundingRate",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A lightweight hook to get the instantaneous funding rate for a specific trading pair.",
          "example": "import { useFundingRate } from '@orderly.network/hooks';\n\nexport const CurrentFundingRate = ({ symbol }: { symbol: string }) => {\n  // Fetches the current funding rate for a specific symbol\n  const { rate, markPrice, indexPrice } = useFundingRate(symbol);\n\n  if (rate === undefined) return null;\n\n  return (\n    <div className=\"font-mono\">\n      <span className=\"text-gray-500\">Funding:</span>\n      <span className={rate >= 0 ? 'text-green-400' : 'text-red-400'}>\n        {rate > 0 ? '+' : ''}{(rate * 100).toFixed(4)}%\n      </span>\n    </div>\n  );\n};",
          "notes": [
            "Returns a simple number representing the rate (e.g., 0.0001 for 0.01%).",
            "Ideal for ticker headers or list views where space is limited.",
            "Often used in conjunction with Mark Price to show the basis."
          ],
          "related": ["useFundingDetails", "useFundingRates", "useMarkets"]
        },
        {
          "name": "useFundingRates",
          "description": "Hook for useFundingRates",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Aggregates current funding rate data across all perpetual markets in a single object.",
          "example": "import { useFundingRates } from '@orderly.network/hooks';\n\nexport const AllFundingRates = () => {\n  // Fetches current funding rates for all available symbols\n  const fundingRates = useFundingRates();\n\n  return (\n    <table className=\"w-full text-left\">\n      <thead>\n        <tr>\n          <th>Symbol</th>\n          <th>Rate</th>\n          <th>Next Funding</th>\n        </tr>\n      </thead>\n      <tbody>\n        {Object.entries(fundingRates).map(([symbol, data]) => (\n          <tr key={symbol}>\n            <td>{symbol}</td>\n            <td>{(data.rate * 100).toFixed(4)}%</td>\n            <td>{new Date(data.nextFundingTime).toLocaleTimeString()}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};",
          "notes": [
            "Returns a dictionary/map keyed by symbol for easy lookup.",
            "More efficient than calling `useFundingRate` multiple times for different symbols.",
            "Useful for building a market overview dashboard."
          ],
          "related": ["useFundingRatesStore", "useFutures", "useMarkets"]
        },
        {
          "name": "useFundingRatesStore",
          "description": "Hook for useFundingRatesStore",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides direct access to the global state store managing funding rates, allowing for optimized reads and subscriptions without re-fetching.",
          "example": "import { useFundingRatesStore } from '@orderly.network/hooks';\n\nexport const RateDisplay = ({ symbol }: { symbol: string }) => {\n  // Accesses the global Zustand store for funding rates without triggering fetch\n  // Useful for high-frequency updates or derived state\n  const getRate = useFundingRatesStore((state) => state.getRate);\n  const currentRate = getRate(symbol);\n\n  return (\n    <span>\n      Live Rate: {currentRate ? (currentRate * 100).toFixed(4) + '%' : 'N/A'}\n    </span>\n  );\n};",
          "notes": [
            "Leverages a state management pattern (like Zustand) for performance.",
            "Allows subscribing to specific slices of state to prevent unnecessary re-renders.",
            "Best used when you need to access funding data inside other hooks or heavy components."
          ],
          "related": ["useFundingRates", "useFundingRate", "useMarkets"]
        },
        {
          "name": "useFutures",
          "description": "Hook for useFutures",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the master list of all available perpetual futures markets, including their configuration parameters (tick size, min order size) and status.",
          "example": "import { useFutures } from '@orderly.network/hooks';\n\nexport const MarketList = () => {\n  // Fetches configuration and status for all Futures/Perpetual markets\n  const { data } = useFutures();\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n      {data?.map((market) => (\n        <div key={market.symbol} className=\"border p-4 rounded shadow-sm\">\n          <h3 className=\"font-bold\">{market.symbol}</h3>\n          <p>Min Size: {market.min_order_size}</p>\n          <p>Tick Size: {market.tick_size}</p>\n          <p>Status: <span className={market.status === 'ACTIVE' ? 'text-green-500' : 'text-red-500'}>{market.status}</span></p>\n        </div>\n      ))}\n    </div>\n  );\n};",
          "notes": [
            "The primary source of truth for which symbols can be traded.",
            "Contains metadata required for form validation (e.g., precision, min amounts).",
            "Check the 'status' field to hide suspended or maintenance markets from users."
          ],
          "related": ["useMarkets", "useOrderBook", "useFundingRate"]
        },
        {
          "name": "useInternalTransfer",
          "description": "Hook for useInternalTransfer",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Handles the logic for moving funds between the user's Exchange Wallet (Broker) and the Orderly Trading Account.",
          "example": "import React, { useState } from 'react';\nimport { useInternalTransfer } from '@orderly.network/hooks';\n\nexport const TransferFunds = () => {\n  const [amount, setAmount] = useState('');\n  // Hook to handle transfers between Orderly Account and Broker Wallet\n  const { transfer, isLoading } = useInternalTransfer();\n\n  const handleTransfer = async () => {\n    try {\n      // Assuming token and direction are handled or defaults are set\n      await transfer({\n        token: 'USDC',\n        amount: parseFloat(amount),\n        // brokerId: 'BROKER_ID' // May be required depending on context\n      });\n      alert('Transfer successful!');\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  return (\n    <div>\n      <input \n        type=\"number\" \n        value={amount} \n        onChange={(e) => setAmount(e.target.value)} \n        placeholder=\"Amount\"\n      />\n      <button \n        onClick={handleTransfer} \n        disabled={isLoading || !amount}\n      >\n        {isLoading ? 'Transferring...' : 'Transfer'}\n      </button>\n    </div>\n  );\n};",
          "notes": [
            "Usually requires a signature from the user's wallet to authorize the movement of funds.",
            "Returns loading states to prevent double-submission of transfer requests.",
            "Critical for ensuring the user has balance in the Orderly account before placing orders."
          ],
          "related": ["useHoldingStream", "useWallet", "useDeposit"]
        },
        {
          "name": "useMaintenanceStatus",
          "description": "Hook for useMaintenanceStatus",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Checks the operational status of the Orderly Network. It returns a boolean or status object indicating whether the system is currently under maintenance.",
          "example": "import React from 'react';\nimport { useMaintenanceStatus } from '@orderly.network/hooks';\n\nexport const TradingInterface = () => {\n  // Checks if the system is under maintenance\n  const isMaintenance = useMaintenanceStatus();\n\n  if (isMaintenance) {\n    return (\n      <div className=\"h-screen flex items-center justify-center bg-yellow-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-bold text-yellow-600\">System Under Maintenance</h2>\n          <p>Trading is temporarily disabled. Please check back later.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <h1>Order Book & Trading</h1>\n      {/* Main trading UI components */}\n    </div>\n  );\n};",
          "notes": [
            "Crucial for UX; prevents users from placing orders or attempting transactions that will fail during downtime.",
            "Should be checked at the root level of the application to block trading actions globally.",
            "May return detailed status information (e.g., reason, estimated end time) depending on the API version."
          ],
          "related": ["useSystemConfig", "useOrderType", "usePlaceOrder"]
        },
        {
          "name": "useOdosQuote",
          "description": "Hook for useOdosQuote",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Integrates with the Odos aggregator to find the best swap route and price between two tokens. It returns the expected output amount and the path the swap will take.",
          "example": "import { useOdosQuote } from '@orderly.network/hooks';\n\nexport const SwapQuote = () => {\n  const [fromAmount, setFromAmount] = useState('100');\n  // Fetches a swap quote from the Odos aggregator.\n  // Calculates the expected output amount and route for a token swap.\n  const { data: quote, isLoading } = useOdosQuote({\n    fromToken: 'USDC',\n    toToken: 'ETH',\n    amount: fromAmount\n  });\n\n  return (\n    <div className=\"swap-box\">\n      <input \n        value={fromAmount} \n        onChange={(e) => setFromAmount(e.target.value)} \n        placeholder=\"Input Amount\"\n      />\n      <div className=\"quote-result\">\n        {isLoading ? 'Calculating...' : `Expected Output: ${quote?.outAmount || '0'} ETH`}\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Used in the 'Swap' interface before the user confirms the transaction.",
            "Requires `fromToken`, `toToken`, and `amount` as input parameters.",
            "The quote object usually contains a `pathId` or `routeId` needed to execute the actual swap."
          ],
          "related": ["useOdosSwap", "useTokens", "useBalance"]
        },
        {
          "name": "useOpenInterest",
          "description": "Hook for useOpenInterest",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the total open interest for a perpetual or futures market. This metric represents the total number of active contracts held by market participants.",
          "example": "import { useOpenInterest } from '@orderly.network/hooks';\n\nexport const MarketDepth = ({ symbol }: { symbol: string }) => {\n  // Fetches historical or current open interest data for a specific market.\n  // Returns data indicating the total number of outstanding derivative contracts.\n  const { data: oiData } = useOpenInterest({ symbol });\n\n  return (\n    <div className=\"market-metric\">\n      <h4>Open Interest</h4>\n      <div className=\"value\">\n        {oiData?.sumOpenInterest || '0'} {symbol.split('_')[1]}\n      </div>\n      <p className=\"change\">\n        {oiData?.change24h > 0 ? '+' : ''}{oiData?.change24h}% (24h)\n      </p>\n    </div>\n  );\n};",
          "notes": [
            "A key indicator of market liquidity and sentiment.",
            "Often displayed alongside price charts or market overview stats.",
            "Data may include historical breakdowns to show OI trends over time."
          ],
          "related": ["useMarket", "useFundingRate", "useMarketsStream"]
        },
        {
          "name": "useSettleSubscription",
          "description": "Hook for useSettleSubscription",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Subscribes to the settlement channel to listen for events like PnL settlement, liquidations, or funding fee updates. It ensures the application reacts immediately when a user's balance or position is modified by the system.",
          "example": "import { useSettleSubscription } from '@orderly.network/hooks';\nimport { useEffect } from 'react';\n\nexport const SettlementMonitor = () => {\n  // Subscribes to settlement events (PnL settlement, funding)\n  const data = useSettleSubscription();\n\n  useEffect(() => {\n    if (data) {\n      console.log('Settlement Event Received:', data);\n      // Trigger notification, update balance, or refresh portfolio\n    }\n  }, [data]);\n\n  return null; // This hook is primarily for side-effects/background listening\n};",
          "notes": [
            "Operates in the background to keep user balances synchronized.",
            "Essential for accurate accounting after funding rate payments or liquidations.",
            "Often used in conjunction with a balance refresh or notification system."
          ],
          "related": ["usePrivateDataObserver", "useAccount", "usePositionStream"]
        },
        {
          "name": "useStorageLedgerAddress",
          "description": "Hook for useStorageLedgerAddress",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the on-chain address of the Orderly Storage Ledger associated with the current account or environment. This is necessary for advanced interactions like verifying transaction signatures or reading on-chain state directly.",
          "example": "import { useStorageLedgerAddress } from '@orderly.network/hooks';\n\nexport const ContractInteraction = () => {\n  // Retrieves the smart contract address of the Orderly Storage Ledger\n  const storageAddress = useStorageLedgerAddress();\n\n  const handleVerify = () => {\n    if (!storageAddress) return;\n    console.log(`Verifying data on chain at: ${storageAddress}`);\n    // Logic to view transaction on Near/Etherscan based on this address\n  };\n\n  return (\n    <div className=\"contract-info\">\n      <p>Storage Ledger Address:</p>\n      <code>{storageAddress || 'Loading...'}</code>\n      <button onClick={handleVerify}>Verify on Explorer</button>\n    </div>\n  );\n};",
          "notes": [
            "Returns a string representing the contract address.",
            "Useful for debugging or building custom transaction flows.",
            "Depends on the current network configuration (Testnet vs Mainnet)."
          ],
          "related": ["useAccount", "useOrderlyConfig", "useWallet"]
        },
        {
          "name": "useTokensInfo",
          "description": "Hook for useTokensInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves a list of all supported tokens with their metadata, such as decimal precision, visual assets, and chain compatibility.",
          "example": "import { useTokensInfo } from \"@orderly.network/hooks\";\n\nexport const AssetList = () => {\n  // Fetches metadata for all supported tokens (decimals, chains, logos)\n  const { data: tokens, isLoading } = useTokensInfo();\n\n  return (\n    <div className=\"asset-grid\">\n      {isLoading ? (\n        <p>Loading assets...</p>\n      ) : (\n        tokens?.map((token) => (\n          <div key={token.token_id} className=\"asset-card\">\n            <img src={token.logo} alt={token.symbol} />\n            <h3>{token.symbol}</h3>\n            <p>Decimals: {token.decimals}</p>\n            <p>Chains: {token.chains.join(', ')}</p>\n          </div>\n        ))\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Crucial for rendering deposit/withdraw forms correctly.",
            "Provides token decimals which are necessary for formatting UI amounts (e.g., formatting ETH to 18 decimals).",
            "Includes chain information to verify if a token is supported on the currently connected network."
          ],
          "related": ["useTokenInfo", "useWithdraw"]
        },
        {
          "name": "useTokenInfo",
          "description": "Hook for useTokenInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A focused hook to retrieve metadata for a single token, typically identified by its address or symbol.",
          "example": "import { useTokenInfo } from \"@orderly.network/hooks\";\n\nexport const TokenBalanceDisplay = ({ tokenAddress }: { tokenAddress: string }) => {\n  // Fetches specific metadata for a single token by address or symbol\n  const { data: tokenInfo } = useTokenInfo(tokenAddress);\n\n  if (!tokenInfo) return null;\n\n  return (\n    <div className=\"token-row\">\n      <span>{tokenInfo.symbol}</span>\n      {/* Use decimals from hook to format raw balance */}\n      <span>{tokenInfo.decimals} decimals</span>\n    </div>\n  );\n};",
          "notes": [
            "More efficient than useTokensInfo if you only need data for one asset.",
            "Returns undefined if the token is not found or supported.",
            "Useful for dynamically rendering details for a user-selected asset."
          ],
          "related": ["useTokensInfo", "useTransfer"]
        },
        {
          "name": "useTransfer",
          "description": "Hook for useTransfer",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Executes transfer operations between the user's broker wallet and their Orderly trading account.",
          "example": "import { useTransfer } from \"@orderly.network/hooks\";\n\nexport const AccountTransfer = () => {\n  // Handles transfers between Trading Account and Wallet (Account)\n  const { transfer, isLoading, error } = useTransfer();\n\n  const handleTransfer = async () => {\n    try {\n      await transfer({\n        token: \"USDC\",\n        amount: \"100\",\n        // 'BROKER_TO_ACCOUNT' (Deposit) or 'ACCOUNT_TO_BROKER' (Withdraw)\n        type: \"BROKER_TO_ACCOUNT\" \n      });\n      alert(\"Transfer successful!\");\n    } catch (err) {\n      console.error(\"Transfer failed\", err);\n    }\n  };\n\n  return (\n    <button onClick={handleTransfer} disabled={isLoading}>\n      {isLoading ? \"Processing...\" : \"Transfer 100 USDC\"}\n    </button>\n  );\n};",
          "notes": [
            "Supports both depositing funds to trade and withdrawing funds back to the wallet.",
            "Requires the user to have sufficient balance and approved token allowance.",
            "The 'type' field determines the direction of the funds flow."
          ],
          "related": ["useWalletSubscription", "useTokenInfo"]
        },
        {
          "name": "useBalanceTopic",
          "description": "Hook for useBalanceTopic",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A specialized WebSocket hook that subscribes specifically to the balance topic, providing raw data streams for token holdings.",
          "example": "import { useBalanceTopic } from \"@orderly.network/hooks\";\n\nexport const CustomBalanceTracker = () => {\n  // Low-level hook to subscribe to the specific 'balance' WS topic\n  // Useful if you need raw access to the topic message or custom filtering\n  const { data, isConnected } = useBalanceTopic();\n\n  return (\n    <div className=\"balance-tracker\">\n      <div>Status: {isConnected ? \"Connected\" : \"Disconnected\"}</div>\n      \n      <ul>\n        {data?.map((item: any, index: number) => (\n          <li key={index}>\n            {item.token}: {item.holding} (Available: {item.available_balance})\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};",
          "notes": [
            "Provides granular control over balance data streams.",
            "Often used internally by higher-level hooks like useWalletSubscription.",
            "Data format matches the Orderly WebSocket API balance structure directly."
          ],
          "related": ["useWalletSubscription", "useTokensInfo"]
        }
      ]
    },
    {
      "name": "Market Data",
      "patterns": [
        {
          "name": "useFundingRateBySymbol",
          "description": "Hook for useFundingRateBySymbol",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the funding rate for a specific trading pair. This is critical for perpetual futures traders to understand the cost of holding positions.",
          "example": "import { useFundingRateBySymbol } from '@orderly.network/hooks';\n\nexport const FundingRateIndicator = ({ symbol }) => {\n  // Fetches the current and predicted funding rate for a specific perpetual\n  const { fundingRate, nextFundingRate } = useFundingRateBySymbol(symbol);\n\n  const formatRate = (rate) => `${(rate * 100).toFixed(4)}%`;\n\n  return (\n    <div className=\"funding-info\">\n      <span>Funding: </span>\n      <span className={fundingRate > 0 ? 'text-green-500' : 'text-red-500'}>\n        {formatRate(fundingRate)}\n      </span>\n      {nextFundingRate && (\n        <span className=\"text-gray-400 text-xs ml-2\">\n          (Next: {formatRate(nextFundingRate)})\n        </span>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Funding rates are typically updated every 8 hours, but this hook provides the current rate.",
            "Positive rates mean Longs pay Shorts; negative rates mean Shorts pay Longs.",
            "Displaying the 'Next' funding rate helps traders anticipate upcoming costs."
          ],
          "related": ["usePosition", "usePortfolio", "useOrderEntity"]
        },
        {
          "name": "useIndexPrice",
          "description": "Hook for useIndexPrice",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches the current Index Price for a specific trading pair. The Index Price represents the fair value of the underlying asset, often used to calculate funding rates.",
          "example": "import React from 'react';\nimport { useIndexPrice } from '@orderly.network/hooks';\n\nexport const PerpFairValue = ({ symbol }: { symbol: string }) => {\n  // Fetches the index price for a specific derivative symbol\n  const { data } = useIndexPrice(symbol);\n\n  return (\n    <div className=\"text-sm text-gray-500\">\n      Index Price: {data ? `$${Number(data).toFixed(2)}` : 'Loading...'}\n    </div>\n  );\n};",
          "notes": [
            "Essential for derivatives trading to understand the fair value of the contract versus the mark price or last traded price.",
            "Unlike streams, this hook may rely on polling or a specific fetch request depending on implementation.",
            "Returns 'unknown' (data) which is typically a number or string representing the price."
          ],
          "related": ["useMarkPrice", "useFundingRate", "useIndexPricesStream"]
        },
        {
          "name": "useIndexPricesStream",
          "description": "Hook for useIndexPricesStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Streams real-time index prices for multiple symbols simultaneously. It returns a data object containing all prices and a helper function `getIndexPrice` to query specific symbols.",
          "example": "import React from 'react';\nimport { useIndexPricesStream } from '@orderly.network/hooks';\n\nexport const MarketTicker = () => {\n  // Streams index prices for all symbols and provides a helper to get specific prices\n  const { data, getIndexPrice } = useIndexPricesStream();\n\n  const ethPrice = getIndexPrice('PERP_ETH_USDC');\n  const btcPrice = getIndexPrice('PERP_BTC_USDC');\n\n  return (\n    <div className=\"flex gap-4\">\n      <div>BTC Index: ${btcPrice ? Number(btcPrice).toFixed(1) : '-'}</div>\n      <div>ETH Index: ${ethPrice ? Number(ethPrice).toFixed(1) : '-'}</div>\n    </div>\n  );\n};",
          "notes": [
            "More efficient than calling `useIndexPrice` multiple times if you need prices for several symbols on one screen.",
            "The `getIndexPrice` helper simplifies accessing the raw data map without manual key lookups.",
            "Data updates automatically via WebSocket push."
          ],
          "related": ["useMarkPricesStream", "useOrderbookStream", "useIndexPrice"]
        },
        {
          "name": "useLeverageBySymbol",
          "description": "Hook for useLeverageBySymbol",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A lightweight hook specifically designed to fetch the current leverage setting for a given symbol without the overhead of update functions or configuration arrays.",
          "example": "import React from 'react';\nimport { useLeverageBySymbol } from '@orderly.network/hooks';\n\nexport const CurrentLeverageDisplay = ({ symbol }: { symbol: string }) => {\n  // Simple hook to retrieve the current leverage value for a specific symbol\n  const leverage = useLeverageBySymbol(symbol);\n\n  return (\n    <div className=\"badge badge-secondary\">\n      Leverage: {leverage ? `${leverage}x` : 'Loading'}\n    </div>\n  );\n};",
          "notes": [
            "Ideal for read-only components like headers, position lists, or summary cards.",
            "Returns the leverage number directly (or undefined if not loaded).",
            "Use `useLeverage` if you need to modify the leverage; use this for display only."
          ],
          "related": ["useLeverage", "usePosition", "useSymbolInfo"]
        },
        {
          "name": "useMarkPrice",
          "description": "Hook for useMarkPrice",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches the Mark Price for a specific symbol. The Mark Price is a standardized price used to calculate unrealized PnL and trigger liquidations, preventing market manipulation.",
          "example": "import React from 'react';\nimport { useMarkPrice } from '@orderly.network/hooks';\n\nexport const LiquidationPriceCalc = ({ symbol }: { symbol: string }) => {\n  // Fetches the mark price used for unrealized PnL and liquidation calculations\n  const { data: markPrice } = useMarkPrice(symbol);\n\n  return (\n    <div className=\"text-xs text-gray-400\">\n      Mark Price: {markPrice ? `$${Number(markPrice).toFixed(4)}` : '--'}\n    </div>\n  );\n};",
          "notes": [
            "Mark Price is generally more stable than the Last Traded Price during high volatility.",
            "This is the price you should use to calculate the equity of open positions in real-time.",
            "Returns 'data' which is typically a number."
          ],
          "related": ["useIndexPrice", "usePositionStream", "useMarkPricesStream"]
        },
        {
          "name": "useMarkPricesStream",
          "description": "Hook for useMarkPricesStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Streams real-time Mark Prices for all available symbols. This is optimized for dashboards that need to display values for multiple assets simultaneously.",
          "example": "import React from 'react';\nimport { useMarkPricesStream } from '@orderly.network/hooks';\n\nexport const PortfolioValue = () => {\n  // Streams mark prices for all symbols, useful for total portfolio valuation\n  const markPrices = useMarkPricesStream();\n\n  // Assuming markPrices returns an object { 'PERP_ETH_USDC': 2500.5, ... }\n  const hasPrices = markPrices && Object.keys(markPrices).length > 0;\n\n  return (\n    <div className=\"p-4 bg-white shadow rounded\">\n      <h3 className=\"font-semibold\">Market Overview</h3>\n      {hasPrices ? (\n        <div className=\"grid grid-cols-2 gap-2 mt-2\">\n          {Object.entries(markPrices).slice(0, 4).map(([symbol, price]) => (\n            <div key={symbol} className=\"text-sm\">\n              {symbol.split('_')[1]}: <span className=\"font-mono\">${Number(price).toFixed(2)}</span>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <p>Loading market data...</p>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Highly efficient for portfolio summary screens where calculating total equity requires current prices for all held assets.",
            "Updates via WebSocket, ensuring PnL calculations are always based on the latest liquidation prices.",
            "The structure of the returned data is usually a map keyed by symbol."
          ],
          "related": ["useHoldingStream", "usePositionStream", "useIndexPricesStream"]
        },
        {
          "name": "useMarketList",
          "description": "Hook for useMarketList",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches the static or semi-static list of available trading pairs (markets) on the Orderly Network, including metadata like symbol, display name, and base currency.",
          "example": "import React from 'react';\nimport { useMarketList } from '@orderly.network/hooks';\n\nexport const MarketSelector = ({ onSelect }: { onSelect: (symbol: string) => void }) => {\n  // Fetches the list of all available trading markets (symbols)\n  const { data: markets } = useMarketList();\n\n  return (\n    <select \n      className=\"w-full p-2 border rounded\" \n      onChange={(e) => onSelect(e.target.value)}\n    >\n      <option value=\"\">Select a Market</option>\n      {markets?.map((market) => (\n        <option key={market.symbol} value={market.symbol}>\n          {market.display_name || market.symbol} ({market.base_currency})\n        </option>\n      ))}\n    </select>\n  );\n};",
          "notes": [
            "Essential for populating dropdowns, navigation menus, or market filters in your application.",
            "Contains configuration data such as tick size, lot size, and min order quantity for each market.",
            "Data may be cached or fetched once per session as it doesn't change as frequently as price data."
          ],
          "related": ["useMarketConfig", "useSymbolInfo", "useOrderbook"]
        },
        {
          "name": "useMarketMap",
          "description": "Hook for useMarketMap",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves a complete map of all available markets and their static configurations. This is ideal for populating dropdowns or validating trading pairs without making individual API calls for each market.",
          "example": "import { useMarketMap } from '@orderly.network/hooks';\n\nexport const MarketSelector = () => {\n  // Fetches the static configuration for all available markets.\n  // Returns a map/object where keys are symbols (e.g., \"PERP_ETH_USDC\")\n  // and values contain market info like min order size, tick size, etc.\n  const marketMap = useMarketMap();\n\n  return (\n    <select>\n      {Object.entries(marketMap).map(([symbol, info]) => (\n        <option key={symbol} value={symbol}>\n          {info.display_name || symbol}\n        </option>\n      ))}\n    </select>\n  );\n};",
          "notes": [
            "The returned object is a dictionary keyed by market symbol (e.g., 'SPOT_ETH_USDC').",
            "Data includes static metadata like `min_order_size`, `tick_size`, and `quantity_precision`.",
            "This data is usually fetched once and cached, making it very performant for UI rendering."
          ],
          "related": ["useMarket", "useMarketsStream", "useMarketsStore"]
        },
        {
          "name": "useMarket",
          "description": "Hook for useMarket",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches detailed metadata and current state for a specific market symbol. It provides essential trading parameters like decimal precision and current open interest.",
          "example": "import { useMarket } from '@orderly.network/hooks';\n\nexport const MarketStats = ({ symbol }: { symbol: string }) => {\n  // Fetches specific dynamic data for a single market.\n  // Returns specific fields like quote_dp (decimal places), created_time, and openInterest.\n  const { quote_dp, created_time, openInterest } = useMarket({ symbol });\n\n  if (!quote_dp) return <div>Loading market data...</div>;\n\n  return (\n    <div className=\"p-4 border rounded\">\n      <h3>Market: {symbol}</h3>\n      <p>Quote Decimals: {quote_dp}</p>\n      <p>Open Interest: {openInterest}</p>\n      <p>Created At: {new Date(created_time).toLocaleDateString()}</p>\n    </div>\n  );\n};",
          "notes": [
            "Requires a `symbol` argument (e.g., 'PERP_BTC_USDC').",
            "Useful for determining how many decimal places to display for prices (`quote_dp`).",
            "Returns `openInterest` which is crucial for futures/perpetual markets analysis."
          ],
          "related": ["useMarketMap", "useOpenInterest", "useMarketTradeStream"]
        },
        {
          "name": "useMarketsStore",
          "description": "Hook for useMarketsStore",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Manages the client-side state for market lists, specifically handling user interactions like favoriting specific trading pairs. It persists these preferences for the session.",
          "example": "import { useMarketsStore } from '@orderly.network/hooks';\n\nexport const FavoriteMarkets = () => {\n  // Accesses the global state for markets, specifically user preferences.\n  // Returns the 'updateFavorites' function to toggle favorite status.\n  const { updateFavorites, favorites } = useMarketsStore();\n\n  const toggleFavorite = (symbol: string) => {\n    // Toggles the market symbol in the user's favorites list\n    updateFavorites(symbol);\n  };\n\n  return (\n    <div>\n      <h4>Favorite Markets</h4>\n      <ul>\n        {favorites.map((symbol) => (\n          <li key={symbol}>\n            {symbol}\n            <button onClick={() => toggleFavorite(symbol)}>Remove</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};",
          "notes": [
            "Provides `updateFavorites` to add or remove a symbol from the favorites list.",
            "Often used in conjunction with `useMarketMap` to display full details for the favorited symbols.",
            "State is managed globally, so changes reflect immediately across all components using this store."
          ],
          "related": ["useMarketMap", "useMarketsStream", "useMarket"]
        },
        {
          "name": "useMarketsStream",
          "description": "Hook for useMarketsStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Streams real-time ticker data for all markets simultaneously. This is the backbone of the 'Markets' page, showing 24h price changes, volume, and current prices across the exchange.",
          "example": "import { useMarketsStream } from '@orderly.network/hooks';\n\nexport const MarketListOverview = () => {\n  // Subscribes to a summary stream for all markets (or a batch).\n  // Returns 'data' containing 24h ticker info (price, volume, change) for all markets.\n  const { data } = useMarketsStream();\n\n  return (\n    <div className=\"market-overview\">\n      <table>\n        <thead>\n          <tr>\n            <th>Symbol</th>\n            <th>Last Price</th>\n            <th>24h Change</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data?.map((market) => (\n            <tr key={market.symbol}>\n              <td>{market.symbol}</td>\n              <td>{market.close_price}</td>\n              <td style={{ color: market.change_24h >= 0 ? 'green' : 'red' }}>\n                {market.change_24h}%\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};",
          "notes": [
            "Provides a high-level overview of every market without needing to subscribe to each individually.",
            "Data includes `close_price`, `volume_24h`, and `change_24h`.",
            "Highly efficient for dashboard views where you need to monitor multiple assets at once."
          ],
          "related": ["useMarketMap", "useMarketTradeStream", "useMarketsStore"]
        },
        {
          "name": "useRwaSymbolsInfo",
          "description": "Hook for useRwaSymbolsInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Determines if a trading symbol is a Real World Asset (RWA), which typically has restricted trading hours unlike standard crypto perps. It returns the current open status and timestamps for the next session.",
          "example": "import { useRwaSymbolsInfo } from '@orderly.network/hooks';\n\nexport const TradingStatus = ({ symbol }: { symbol: string }) => {\n  // Checks if the symbol is a Real World Asset (RWA) and its market hours\n  const { isRwa, open, nextOpen, nextClose } = useRwaSymbolsInfo(symbol);\n\n  if (!isRwa) {\n    return <div className=\"status\">Market Open (24/7)</div>;\n  }\n\n  return (\n    <div className=\"status rwa\">\n      {open ? (\n        <span className=\"open\">RWA Market Open</span>\n      ) : (\n        <span className=\"closed\">\n          Market Closed. Opens: {new Date(nextOpen).toLocaleTimeString()}\n        </span>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Crucial for disabling trading buttons when RWA markets are closed.",
            "Returns timestamps (nextOpen, nextClose) which need formatting for display.",
            "Returns 'false' for standard crypto pairs, allowing for unified logic."
          ],
          "related": ["useRwaSymbolsInfoStore", "useInitRwaSymbolsRuntime", "useSymbolInfo"]
        },
        {
          "name": "useRwaSymbolsInfoStore",
          "description": "Hook for useRwaSymbolsInfoStore",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides direct access to the internal state store (Zustand) that holds RWA symbol information. This is more efficient than using the hook if you need to access data for multiple symbols or prevent unnecessary re-renders.",
          "example": "import { useRwaSymbolsInfoStore } from '@orderly.network/hooks';\n\nexport const MarketStatusIndicator = () => {\n  // Accesses the global Zustand store for RWA data without re-fetching\n  // Useful for accessing multiple symbols' status at once\n  const { symbols } = useRwaSymbolsInfoStore();\n\n  return (\n    <div className=\"market-list\">\n      {Object.entries(symbols).map(([symbol, info]: [string, any]) => (\n        <div key={symbol} className=\"item\">\n          {symbol}: {info.open ? 'OPEN' : 'CLOSED'}\n        </div>\n      ))}\n    </div>\n  );\n};",
          "notes": [
            "Accesses the store directly, useful for global state management.",
            "Does not trigger fetches itself; relies on `useInitRwaSymbolsRuntime` to populate data.",
            "Best used in components that need to read RWA status without side effects."
          ],
          "related": ["useRwaSymbolsInfo", "useInitRwaSymbolsRuntime", "useSymbolInfo"]
        },
        {
          "name": "useInitRwaSymbolsRuntime",
          "description": "Hook for useInitRwaSymbolsRuntime",
          "installation": "npm install @orderly.network/hooks",
          "usage": "An initialization hook that fetches the RWA trading schedules from the API and sets up the internal timers to track market open/close events. It ensures the RWA store is populated and kept up to date.",
          "example": "import { useInitRwaSymbolsRuntime } from '@orderly.network/hooks';\n\nexport const AppProvider = ({ children }: { children: React.ReactNode }) => {\n  // Initializes the RWA system: fetches schedule and starts timers\n  // Should be called once at the root of the application\n  useInitRwaSymbolsRuntime();\n\n  return (\n    <div className=\"app-layout\">\n      {children}\n    </div>\n  );\n};",
          "notes": [
            "Must be called in a parent component (like App or Layout) so it runs for the entire session.",
            "Handles the synchronization of time for market open/close events.",
            "Required for other RWA hooks (`useRwaSymbolsInfo`) to function correctly."
          ],
          "related": ["useRwaSymbolsInfo", "useRwaSymbolsInfoStore", "useOrderlyContext"]
        },
        {
          "name": "useSymbolInfo",
          "description": "Hook for useSymbolInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves detailed metadata for a specific trading symbol, including trading limits (min/max order size), price precision (tick size), and step size. This is critical for validating order inputs before submission.",
          "example": "import { useSymbolInfo } from '@orderly.network/hooks';\n\nexport const TradingForm = ({ symbol }: { symbol: string }) => {\n  // Fetches static metadata for a symbol (tick size, min order size, etc.)\n  const symbolInfo = useSymbolInfo(symbol);\n\n  if (!symbolInfo) return <div>Loading symbol info...</div>;\n\n  return (\n    <form className=\"trade-form\">\n      <div className=\"input-group\">\n        <label>Price (Increment: {symbolInfo.tick_size})</label>\n        <input \n          type=\"number\" \n          step={symbolInfo.tick_size} \n          placeholder=\"Price\" \n        />\n      </div>\n      <div className=\"input-group\">\n        <label>Quantity (Min: {symbolInfo.min_order_size})</label>\n        <input \n          type=\"number\" \n          step={symbolInfo.step_size} \n          placeholder=\"Quantity\" \n        />\n      </div>\n    </form>\n  );\n};",
          "notes": [
            "Data is relatively static but should be fetched to ensure UI matches current contract settings.",
            "Essential for input validation (e.g., preventing orders smaller than min_order_size).",
            "Returns null or undefined if the symbol does not exist."
          ],
          "related": ["useOrderbookStream", "useRwaSymbolsInfo", "useMarkets"]
        },
        {
          "name": "useSymbolLeverage",
          "description": "Hook for useSymbolLeverage",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Manages the leverage configuration for a specific trading symbol. It allows fetching the current leverage and updating it.",
          "example": "import { useSymbolLeverage } from \"@orderly.network/hooks\";\n\nexport const LeverageControl = ({ symbol }: { symbol: string }) => {\n  // Returns loading state and leverage data/mutators\n  const { isLoading, leverage, setLeverage, maxLeverage } = useSymbolLeverage(symbol);\n\n  const handleLeverageChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const val = parseInt(e.target.value);\n    if (val > 0 && val <= maxLeverage) {\n      await setLeverage(val);\n    }\n  };\n\n  if (isLoading) return <div>Loading leverage settings...</div>;\n\n  return (\n    <div className=\"leverage-control\">\n      <label>Current Leverage: {leverage}x</label>\n      <input \n        type=\"range\" \n        min=\"1\" \n        max={maxLeverage} \n        value={leverage} \n        onChange={handleLeverageChange} \n      />\n    </div>\n  );\n};",
          "notes": [
            "Returns an isLoading boolean to handle UI states during leverage updates.",
            "Usually interacts with the Orderly API to persist leverage changes per symbol.",
            "Ensure you validate user input against maxLeverage to avoid API errors."
          ],
          "related": ["useSymbolsInfo", "usePosition"]
        },
        {
          "name": "useSymbolsInfo",
          "description": "Hook for useSymbolsInfo",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches comprehensive static information about all trading pairs (symbols) available on the exchange.",
          "example": "import { useSymbolsInfo } from \"@orderly.network/hooks\";\n\nexport const MarketSelector = () => {\n  // Fetches metadata for all available symbols (tick size, min order size, etc.)\n  const { data: symbols, isLoading, error } = useSymbolsInfo();\n\n  if (isLoading) return <select disabled><option>Loading markets...</option></select>;\n  if (error) return <div>Error loading markets</div>;\n\n  return (\n    <select className=\"market-select\">\n      {symbols?.map((symbol) => (\n        <option key={symbol.symbol} value={symbol.symbol}>\n          {symbol.symbol} ({symbol.base_currency})\n        </option>\n      ))}\n    </select>\n  );\n};",
          "notes": [
            "Essential for determining trading rules like min order quantity and price precision.",
            "Data is relatively static, but this hook ensures it is fetched and cached.",
            "Use this to populate dropdowns or validate order forms before submission."
          ],
          "related": ["useSymbolsInfoStore", "useTokenInfo"]
        },
        {
          "name": "useSymbolsInfoStore",
          "description": "Hook for useSymbolsInfoStore",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides direct access to the symbols info global state store (Zustand), allowing efficient reads without prop drilling or fetching.",
          "example": "import { useSymbolsInfoStore } from \"@orderly.network/hooks\";\n\nexport const SymbolDisplay = ({ symbolId }: { symbolId: string }) => {\n  // Accesses the global Zustand store for symbol info without re-fetching\n  // Useful for high-frequency renders where you don't want to trigger API calls\n  const getSymbol = useSymbolsInfoStore((state) => state.getSymbol);\n  \n  const symbolData = getSymbol(symbolId);\n\n  if (!symbolData) return <span>Symbol not found</span>;\n\n  return (\n    <div className=\"symbol-info\">\n      <h2>{symbolData.symbol}</h2>\n      <p>Min Size: {symbolData.min_order_size}</p>\n    </div>\n  );\n};",
          "notes": [
            "Reads from the store populated by useSymbolsInfo or other mechanisms.",
            "Highly performant for components that need instant access to market data.",
            "You can select specific slices of state to prevent unnecessary re-renders."
          ],
          "related": ["useSymbolsInfo", "useTickerStream"]
        }
      ]
    },
    {
      "name": "WebSocket & Streaming",
      "patterns": [
        {
          "name": "useWSObserver",
          "description": "Hook for useWSObserver",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A low-level hook for observing raw WebSocket messages and connection states. It allows developers to subscribe to specific Orderly Network topics and handle incoming messages manually, useful for custom UI logic not covered by higher-level hooks.",
          "example": "import { useWSObserver } from '@orderly.network/hooks';\n\nexport const WSEventListener = () => {\n  // Subscribe to a specific WebSocket topic (e.g., account updates)\n  // This is a lower-level hook often used for custom event handling\n  const { data, connectionStatus } = useWSObserver({\n    topic: 'account',\n    // Optional: filter events based on specific criteria\n    filter: (msg) => msg.event === 'ORDER_FILLED'\n  });\n\n  return (\n    <div className=\"p-4 border rounded\">\n      <h3 className=\"font-bold\">WS Status: {connectionStatus}</h3>\n      <pre className=\"mt-2 text-xs bg-gray-100 p-2\">\n        {JSON.stringify(data, null, 2)}\n      </pre>\n    </div>\n  );\n};",
          "notes": [
            "Primarily used for internal logic or advanced custom features requiring raw WS access.",
            "Automatically handles connection lifecycle (mount/unmount) to prevent memory leaks.",
            "Requires knowledge of specific Orderly WS topic strings to function correctly."
          ],
          "related": ["useBalanceSubscription", "useOrderbook", "useAccount"]
        },
        {
          "name": "useHoldingStream",
          "description": "Hook for useHoldingStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Streams the user's real-time account balances, distinguishing between available funds (holding) and funds locked in open orders (frozen).",
          "example": "import React from 'react';\nimport { useHoldingStream } from '@orderly.network/hooks';\n\nexport const PortfolioBalance = () => {\n  // Returns frozen (locked in orders) and holding (available balance)\n  const { frozen, holding } = useHoldingStream();\n\n  return (\n    <div className=\"p-4 border rounded\">\n      <h3 className=\"font-bold\">Portfolio Assets</h3>\n      {holding && Object.keys(holding).length > 0 ? (\n        <ul>\n          {Object.entries(holding).map(([token, amount]) => (\n            <li key={token} className=\"flex justify-between\">\n              <span>{token}</span>\n              <span>\n                Available: {Number(amount).toFixed(4)} | \n                Frozen: {frozen?.[token] ? Number(frozen[token]).toFixed(4) : '0.00'}\n              </span>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>Loading holdings...</p>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Provides real-time updates via WebSocket, so the UI reflects balance changes immediately after fills or cancellations.",
            "The 'frozen' value represents funds locked in active orders, while 'holding' is the free collateral available for trading.",
            "Returns undefined initially while the WebSocket connection is being established."
          ],
          "related": ["useAccount", "useWallet", "usePositionStream"]
        },
        {
          "name": "usePrivateDataObserver",
          "description": "Hook for usePrivateDataObserver",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A generic observer hook that listens to private data channels (like orders, settlements, or asset changes) via the websocket. It is useful for building custom UI components that react to backend state changes.",
          "example": "import { usePrivateDataObserver } from '@orderly.network/hooks';\n\nexport const OrderHistory = () => {\n  // Observes private data updates (e.g., orders, fills) pushed by the server\n  const { rows } = usePrivateDataObserver('ORDER');\n\n  return (\n    <table className=\"order-table\">\n      <thead>\n        <tr>\n          <th>Symbol</th>\n          <th>Side</th>\n          <th>Price</th>\n          <th>Quantity</th>\n          <th>Status</th>\n        </tr>\n      </thead>\n      <tbody>\n        {rows && rows.length > 0 ? (\n          rows.map((order: any, index) => (\n            <tr key={index}>\n              <td>{order.symbol}</td>\n              <td>{order.side}</td>\n              <td>{order.price}</td>\n              <td>{order.quantity}</td>\n              <td>{order.status}</td>\n            </tr>\n          ))\n        ) : (\n          <tr><td colSpan={5}>No recent orders</td></tr>\n        )}\n      </tbody>\n    </table>\n  );\n};",
          "notes": [
            "Requires a topic (e.g., 'ORDER', 'ASSET') to filter the data stream.",
            "Provides 'rows' (arrays of data) and 'row' (single item update) for flexible rendering.",
            "Essential for keeping local state in sync with the Orderly backend without manual polling."
          ],
          "related": ["usePositionStream", "useSettleSubscription", "useAccount"]
        },
        {
          "name": "usePublicDataObserver",
          "description": "Hook for usePublicDataObserver",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Listens to public market data channels such as recent trades, tickers, or candle updates. It allows the UI to react to public market events without managing individual subscriptions.",
          "example": "import { usePublicDataObserver } from '@orderly.network/hooks';\n\nexport const RecentTrades = () => {\n  // Observes public trade streams for a specific symbol or market\n  const trades = usePublicDataObserver('TRADE');\n\n  return (\n    <div className=\"recent-trades\">\n      <h4>Recent Trades</h4>\n      <ul>\n        {trades.slice(0, 10).map((trade: any, i) => (\n          <li key={i}>\n            <span className={trade.side === 'BUY' ? 'green' : 'red'}>\n              {trade.side}\n            </span>\n            <span>{trade.price}</span>\n            <span>{trade.size}</span>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};",
          "notes": [
            "Does not require authentication.",
            "Useful for displaying 'Last Price' or 'Recent Trades' lists.",
            "Data structure depends on the specific topic subscribed to (e.g., TRADE vs TICKER)."
          ],
          "related": ["useOrderbookStream", "useSymbolInfo", "useMarketsStream"]
        },
        {
          "name": "useTickerStream",
          "description": "Hook for useTickerStream",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Subscribes to the WebSocket ticker stream for a specific symbol to receive real-time price and volume updates.",
          "example": "import { useTickerStream } from \"@orderly.network/hooks\";\n\nexport const PriceTicker = ({ symbol }: { symbol: string }) => {\n  // Subscribes to a websocket stream for real-time price updates\n  const { data, error } = useTickerStream(symbol);\n\n  if (error) return <div>Stream error</div>;\n  if (!data) return <div>Connecting...</div>;\n\n  // data usually contains: last_price, mark_price, 24h_volume, etc.\n  const priceColor = data.price_change_percent >= 0 ? 'text-green-500' : 'text-red-500';\n\n  return (\n    <div className=\"ticker\">\n      <span className=\"font-bold\">{symbol}</span>\n      <span className={priceColor}>{data.last_price}</span>\n      <span>{data.price_change_percent}%</span>\n    </div>\n  );\n};",
          "notes": [
            "Maintains an open WebSocket connection; updates happen automatically.",
            "Handle the 'loading' or 'connecting' state gracefully as sockets take a moment.",
            "Ideal for displaying 24h change, mark price, and last traded price in headers."
          ],
          "related": ["useSymbolsInfo", "useOrderbook"]
        },
        {
          "name": "useWS",
          "description": "Hook for useWS",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Manages the WebSocket connection to Orderly for real-time data streams. It provides methods to send requests, subscribe to topics, and listen for incoming messages.",
          "example": "import { useWS } from '@orderly.network/hooks';\nimport { useEffect } from 'react';\n\nexport const OrderBookFeed = () => {\n  // Hook to manage WebSocket connections and subscriptions\n  const { on, send, ws } = useWS();\n\n  useEffect(() => {\n    // Subscribe to a topic\n    send({\n      id: 1,\n      event: 'subscribe',\n      topic: 'orderbook',\n      params: { symbol: 'PERP_ETH_USDC' }\n    });\n\n    // Listen for messages\n    const unsubscribe = on('message', (data) => {\n      if (data.topic === 'orderbook') {\n        console.log('Orderbook update:', data.data);\n      }\n    });\n\n    return () => {\n      // Cleanup on unmount\n      unsubscribe();\n    };\n  }, [on, send]);\n\n  return <div>Listening to OrderBook...</div>;\n};",
          "notes": [
            "WebSockets are essential for real-time features like order books, trade history, and account updates.",
            "Always use the 'on' method to listen to events rather than accessing the WebSocket instance directly to ensure proper cleanup.",
            "The hook automatically handles reconnection logic if the connection drops."
          ],
          "related": ["useWsStatus", "useNetworkInfo"]
        },
        {
          "name": "useWsStatus",
          "description": "Hook for useWsStatus",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a reactive status indicator for the WebSocket connection. It allows the UI to reflect the real-time connectivity state (connected, connecting, disconnected, or error).",
          "example": "import { useWsStatus } from '@orderly.network/hooks';\n\nexport const ConnectionIndicator = () => {\n  // Returns the current status of the WebSocket connection\n  const status = useWsStatus();\n\n  const getStatusColor = () => {\n    switch (status) {\n      case 'connected': return 'bg-green-500';\n      case 'connecting': return 'bg-yellow-500';\n      case 'disconnected': return 'bg-red-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <div className={`w-3 h-3 rounded-full ${getStatusColor()}`} />\n      <span className=\"capitalize text-sm\">{status}</span>\n    </div>\n  );\n};",
          "notes": [
            "Use this to visually warn users when they are disconnected from the real-time feed.",
            "It helps prevent user confusion when data stops updating due to network issues.",
            "Combine with 'useWS' to implement manual 'Reconnect' buttons if the auto-reconnect fails."
          ],
          "related": ["useWS", "useNetworkInfo"]
        }
      ]
    },
    {
      "name": "Analytics",
      "patterns": [
        {
          "name": "useAssetsHistory",
          "description": "Hook for useAssetsHistory",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the historical asset or equity value of the user's account over time. This is essential for rendering portfolio performance charts or account growth tables.",
          "example": "import { useAssetsHistory } from '@orderly.network/hooks';\n\nexport const AssetHistoryChart = () => {\n  // Fetches historical balance/equity snapshots for the connected account\n  const { data, isLoading, error } = useAssetsHistory({\n    // Optional: pagination or time range parameters\n    limit: 30\n  });\n\n  if (isLoading) return <div>Loading asset history...</div>;\n  if (error) return <div>Error loading history</div>;\n\n  return (\n    <div className=\"space-y-2\">\n      <h3 className=\"text-lg font-semibold\">Portfolio History</h3>\n      <ul className=\"divide-y\">\n        {data?.map((snapshot, index) => (\n          <li key={index} className=\"flex justify-between py-2\">\n            <span>{new Date(snapshot.timestamp).toLocaleDateString()}</span>\n            <span className=\"font-mono\">${snapshot.total_equity.toFixed(2)}</span>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};",
          "notes": [
            "Data is usually aggregated by day or hour depending on the timeframe requested.",
            "Requires the user to be connected (wallet signed in) to fetch specific account data.",
            "Useful for calculating 'All Time High' or visualizing PnL trends."
          ],
          "related": ["useStatisticsDaily", "useAccount", "useBalanceSubscription"]
        },
        {
          "name": "useDistributionHistory",
          "description": "Hook for useDistributionHistory",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches the history of reward distributions for the user, such as trading rebates or staking yields. It provides metrics including the `annual_rate` for current or historical periods.",
          "example": "import { useDistributionHistory } from '@orderly.network/hooks';\n\nexport const RewardsTracker = () => {\n  // Fetches history of token distributions (e.g., staking rewards, fee rebates)\n  // Returns data including annual_rate metrics\n  const { distributions, annualRate } = useDistributionHistory();\n\n  return (\n    <div className=\"bg-white p-4 shadow rounded\">\n      <div className=\"mb-4\">\n        <span className=\"text-gray-500\">Current Annual Rate:</span>\n        <span className=\"ml-2 font-bold text-green-600\">{annualRate}%</span>\n      </div>\n      \n      <h4 className=\"font-bold border-b pb-2\">Past Distributions</h4>\n      <div className=\"mt-2\">\n        {distributions?.map((dist, i) => (\n          <div key={i} className=\"flex justify-between text-sm py-1\">\n            <span>{dist.token}</span>\n            <span>{dist.amount}</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Essential for displaying ROI on staking or market maker programs.",
            "The `annual_rate` return value helps users estimate future earnings.",
            "May return empty arrays if the user has not yet qualified for distributions."
          ],
          "related": ["useFundingFeeHistory", "useVaultsHistory", "useAccount"]
        },
        {
          "name": "useFundingFeeHistory",
          "description": "Hook for useFundingFeeHistory",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the history of funding fees associated with perpetual futures positions. It indicates whether the user paid or received fees and includes the `annual_rate` applicable at the time of the event.",
          "example": "import { useFundingFeeHistory } from '@orderly.network/hooks';\n\nexport const FundingFeeLog = () => {\n  // Fetches history of funding fees paid or received for perpetual futures\n  // Returns data including annual_rate context\n  const { fees, isLoading } = useFundingFeeHistory({\n    symbol: 'PERP_ETH_USDC' // Optional: filter by specific trading pair\n  });\n\n  return (\n    <div className=\"overflow-x-auto\">\n      <table className=\"min-w-full text-sm text-left\">\n        <thead className=\"bg-gray-50\">\n          <tr>\n            <th className=\"p-2\">Time</th>\n            <th className=\"p-2\">Symbol</th>\n            <th className=\"p-2\">Amount</th>\n            <th className=\"p-2\">Rate (Annual)</th>\n          </tr>\n        </thead>\n        <tbody>\n          {fees?.map((fee, i) => (\n            <tr key={i} className=\"border-b\">\n              <td className=\"p-2\">{new Date(fee.timestamp).toLocaleString()}</td>\n              <td className=\"p-2\">{fee.symbol}</td>\n              <td className={`p-2 ${fee.amount > 0 ? 'text-green-500' : 'text-red-500'}`}>\n                {fee.amount}\n              </td>\n              <td className=\"p-2\">{fee.annual_rate}%</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};",
          "notes": [
            "Critical for derivatives traders to track the cost of holding long/short positions.",
            "Positive amounts usually indicate fees received, negative indicate fees paid.",
            "Filtering by symbol is recommended if the user trades multiple perps."
          ],
          "related": ["useDistributionHistory", "usePositions", "useStatisticsDaily"]
        },
        {
          "name": "useTransferHistory",
          "description": "Hook for useTransferHistory",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the log of funds moving in and out of the Orderly account (Deposits/Withdrawals). This tracks the bridge transactions between the user's wallet and the Orderly smart contract.",
          "example": "import { useTransferHistory } from '@orderly.network/hooks';\n\nexport const TransactionLog = () => {\n  // Fetches history of deposits and withdrawals (transfers)\n  const { data, error } = useTransferHistory({\n    pageSize: 10\n  });\n\n  return (\n    <div className=\"max-w-md mx-auto\">\n      <h3 className=\"font-bold mb-3\">Recent Transfers</h3>\n      {error && <p className=\"text-red-500 text-sm\">Failed to load transfers</p>}\n      \n      <div className=\"space-y-3\">\n        {data?.map((tx) => (\n          <div key={tx.transaction_hash} className=\"flex justify-between items-center p-3 border rounded\">\n            <div>\n              <p className=\"font-medium capitalize\">{tx.type}</p>\n              <p className=\"text-xs text-gray-400\">{new Date(tx.timestamp).toLocaleDateString()}</p>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"font-mono\">{tx.amount} {tx.token}</p>\n              <span className={`text-xs px-2 py-0.5 rounded-full ${\n                tx.status === 'CONFIRMED' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\n              }`}>\n                {tx.status}\n              </span>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Includes transaction hashes for verification on block explorers.",
            "Statuses usually indicate pending, confirmed, or failed states.",
            "Crucial for reconciling wallet balances with exchange balances."
          ],
          "related": ["useAccount", "useBalanceSubscription", "useChainInfo"]
        },
        {
          "name": "useFundingRateHistory",
          "description": "Hook for useFundingRateHistory",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves a time-series array of historical funding rates for a specific market.",
          "example": "import { useFundingRateHistory } from '@orderly.network/hooks';\n\nexport const FundingChart = ({ symbol }: { symbol: string }) => {\n  // Fetches historical funding rates for charting\n  const { data, isLoading } = useFundingRateHistory(symbol);\n\n  if (isLoading) return <div>Loading chart data...</div>;\n\n  return (\n    <div>\n      <h3>Funding Rate History: {symbol}</h3>\n      <ul>\n        {data?.map((point, index) => (\n          <li key={index}>\n            {new Date(point.timestamp).toLocaleDateString()}: {(point.rate * 100).toFixed(4)}%\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};",
          "notes": [
            "Returns an array of objects containing timestamps and corresponding rates.",
            "Essential for rendering historical performance charts.",
            "Includes an `isLoading` boolean to handle async data fetching states gracefully."
          ],
          "related": ["useFundingRate", "useFutures", "useMarkets"]
        }
      ]
    },
    {
      "name": "Assets & Vault",
      "patterns": [
        {
          "name": "useVaultsHistory",
          "description": "Hook for useVaultsHistory",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Retrieves the history of interactions with Orderly Vaults, such as depositing liquidity or withdrawing shares. This is specific to users participating in liquidity pools rather than just spot trading.",
          "example": "import { useVaultsHistory } from '@orderly.network/hooks';\n\nexport const VaultActivity = () => {\n  // Fetches history specific to Orderly Vaults (liquidity provision)\n  const { history } = useVaultsHistory({\n    vaultAddress: '0x123...' // Optional: specific vault address\n  });\n\n  return (\n    <div className=\"bg-gray-50 p-4 rounded-lg\">\n      <h3 className=\"font-semibold mb-2\">Vault Activity</h3>\n      {history && history.length > 0 ? (\n        <ul className=\"space-y-2\">\n          {history.map((entry, idx) => (\n            <li key={idx} className=\"flex justify-between text-sm bg-white p-2 rounded shadow-sm\">\n              <span>{entry.action} (Shares)</span>\n              <span className=\"font-mono\">{entry.amount}</span>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p className=\"text-gray-400 text-sm\">No vault activity found.</p>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Tracks share issuance and redemption, not just token transfers.",
            "Important for calculating yield earned from liquidity provision.",
            "May require specific permissions if the vault is private or whitelisted."
          ],
          "related": ["useDistributionHistory", "useAssetsHistory", "useAccount"]
        },
        {
          "name": "useDeposit",
          "description": "Hook for useDeposit",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Fetches the necessary metadata (contract address, decimals, chain ID) for depositing assets into the Orderly clearinghouse.",
          "example": "import { useDeposit } from '@orderly.network/hooks';\n\nexport const DepositInfo = ({ tokenSymbol }: { tokenSymbol: string }) => {\n  // Retrieves contract details required to deposit a specific token\n  const { symbol, address, decimals, chainId, network } = useDeposit(tokenSymbol);\n\n  if (!address) return <div>Loading deposit info...</div>;\n\n  return (\n    <div className=\"bg-gray-100 p-4 rounded\">\n      <h3>Deposit {symbol}</h3>\n      <p><strong>Network:</strong> {network}</p>\n      <p><strong>Chain ID:</strong> {chainId}</p>\n      <p><strong>Contract Address:</strong> {address}</p>\n      <p><strong>Decimals:</strong> {decimals}</p>\n      \n      <div className=\"mt-2 text-xs text-gray-500\">\n        Send only {symbol} to this address on {network}.\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Returns the specific Vault address for the selected token and chain.",
            "Critical for ensuring users send funds to the correct contract to avoid loss of assets.",
            "Use the 'decimals' field to format user input correctly before transaction construction."
          ],
          "related": ["useChains", "useWithdraw", "useBalance"]
        },
        {
          "name": "useMaxWithdrawal",
          "description": "Hook for useMaxWithdrawal",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Calculates the withdrawable balance for a specific token. It factors in account equity, margin used for open positions, and any unsettled funds to ensure the user doesn't go below maintenance margin.",
          "example": "import { useMaxWithdrawal } from '@orderly.network/hooks';\n\nexport const WithdrawalForm = ({ token }: { token: string }) => {\n  // Fetches the maximum amount of a specific token the user can withdraw right now.\n  // Accounts for locked funds, margin requirements, and pending orders.\n  const { data: maxAmount, isLoading } = useMaxWithdrawal({ token });\n\n  if (isLoading) return <div>Checking limits...</div>;\n\n  return (\n    <form>\n      <label>Withdraw {token}</label>\n      <input \n        type=\"number\" \n        max={maxAmount} \n        placeholder={`Max: ${maxAmount}`} \n      />\n      <p className=\"text-xs text-gray-500\">\n        Available to withdraw: {maxAmount} {token}\n      </p>\n    </form>\n  );\n};",
          "notes": [
            "Essential for Wallet/Withdrawal UIs to prevent invalid withdrawal requests.",
            "The value updates dynamically if the user's positions or margin changes.",
            "Returns `undefined` or `0` if the token is not supported or the account has insufficient funds."
          ],
          "related": ["useAccount", "useBalance", "usePositionStream"]
        },
        {
          "name": "useWithdraw",
          "description": "Hook for useWithdraw",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Handles the logic for withdrawing funds from the Orderly account to an external blockchain address.",
          "example": "import { useWithdraw } from \"@orderly.network/hooks\";\n\nexport const WithdrawalForm = () => {\n  // Returns a function to initiate withdrawal and related state\n  // The prompt mentions returns: symbol, decimals, address, chainId, network\n  // These are likely parameters for the withdraw function or config helpers.\n  const { withdraw, isLoading } = useWithdraw();\n\n  const handleWithdraw = async () => {\n    await withdraw({\n      symbol: \"USDC\",\n      amount: \"50\",\n      // Destination address\n      address: \"0x123...\", \n      chainId: 1, // Ethereum Mainnet\n      network: \"ethereum\"\n    });\n  };\n\n  return (\n    <div>\n      <h3>Withdraw Funds</h3>\n      <button onClick={handleWithdraw} disabled={isLoading}>\n        {isLoading ? \"Withdrawing...\" : \"Withdraw to External Wallet\"}\n      </button>\n    </div>\n  );\n};",
          "notes": [
            "Requires specific details like chainId and network to ensure routing is correct.",
            "Often involves a transaction signature on the user's wallet.",
            "Check for 'decimals' using the hook or related hooks to ensure amount precision."
          ],
          "related": ["useTokenInfo", "useTokensInfo"]
        }
      ]
    },
    {
      "name": "Risk Management",
      "patterns": [
        {
          "name": "useLeverage",
          "description": "Hook for useLeverage",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Manages the leverage settings for a specific trading symbol. It allows fetching current leverage, updating it, and retrieving the allowed leverage steps (levers) and maximum limits.",
          "example": "import React, { useState } from 'react';\nimport { useLeverage } from '@orderly.network/hooks';\n\nexport const LeverageControl = ({ symbol }: { symbol: string }) => {\n  const [localLeverage, setLocalLeverage] = useState(1);\n  \n  // Returns update function, loading state, allowed levers, current leverage, and max leverage\n  const { update, isLoading, leverageLevers, curLeverage, maxLeverage } = useLeverage(symbol);\n\n  const handleUpdate = async () => {\n    await update(localLeverage);\n  };\n\n  return (\n    <div className=\"flex flex-col gap-2\">\n      <label>Adjust Leverage (Max: {maxLeverage}x)</label>\n      <div className=\"flex gap-2\">\n        <input \n          type=\"range\" \n          min=\"1\" \n          max={maxLeverage} \n          step=\"1\" \n          value={localLeverage}\n          onChange={(e) => setLocalLeverage(Number(e.target.value))}\n        />\n        <span>{localLeverage}x</span>\n      </div>\n      <p>Current: {curLeverage}x</p>\n      <button onClick={handleUpdate} disabled={isLoading}>\n        {isLoading ? 'Updating...' : 'Set Leverage'}\n      </button>\n    </div>\n  );\n};",
          "notes": [
            "`leverageLevers` typically provides an array of allowed values (e.g., [1, 2, 5, 10, 20]) to ensure compliance with risk rules.",
            "Changing leverage often requires a backend request and may affect your margin requirements immediately.",
            "Always check `maxLeverage` before allowing user input to prevent API errors."
          ],
          "related": ["usePositionStream", null, "useMarginInfo", "useLeverageBySymbol"]
        }
      ]
    },
    {
      "name": "Referral & Rewards",
      "patterns": [
        {
          "name": "useReferralRebateSummary",
          "description": "Hook for useReferralRebateSummary",
          "installation": "npm install @orderly.network/hooks",
          "usage": "Provides a summary of the rebates (earnings) the user has generated through the referral program. It aggregates the financial rewards earned over time.",
          "example": "import { useReferralRebateSummary } from '@orderly.network/hooks';\n\nexport const EarningsOverview = () => {\n  // Fetches the total rebates/earnings accumulated from the referral program\n  const { data, isLoading } = useReferralRebateSummary();\n\n  return (\n    <div className=\"bg-gradient-to-r from-purple-500 to-indigo-600 text-white p-6 rounded-lg\">\n      <h3 className=\"text-lg opacity-90\">Total Rebates Earned</h3>\n      \n      {isLoading ? (\n        <div className=\"h-8 w-32 bg-white/20 rounded animate-pulse mt-2\"></div>\n      ) : (\n        <div className=\"text-4xl font-bold mt-2\">\n          {data?.total_rebate ? `$${parseFloat(data.total_rebate).toFixed(2)}` : '$0.00'}\n        </div>\n      )}\n      \n      <button className=\"mt-4 bg-white text-purple-600 px-4 py-2 rounded text-sm font-semibold hover:bg-gray-100\">\n        Withdraw Earnings\n      </button>\n    </div>\n  );\n};",
          "notes": [
            "Returns a summary object, typically containing 'total_rebate' or similar fields.",
            "Data is crucial for displaying the financial incentive of the referral program.",
            "Updates may have a slight delay depending on the chain finality."
          ],
          "related": ["useCommission", "useRefereeInfo", "useAccountRewardsHistory"]
        }
      ]
    },
    {
      "name": "Data Fetching",
      "patterns": [
        {
          "name": "useMediaQuery",
          "description": "Hook for useMediaQuery",
          "installation": "npm install @orderly.network/hooks",
          "usage": "A responsive design hook that listens for changes in the viewport size and returns a boolean indicating if the query matches. It is optimized for performance within the SDK ecosystem.",
          "example": "import { useMediaQuery } from '@orderly.network/hooks';\n\nexport const ResponsiveLayout = () => {\n  // Checks if the viewport matches a specific breakpoint (e.g., mobile)\n  const isMobile = useMediaQuery('(max-width: 768px)');\n\n  return (\n    <div className=\"layout\">\n      <header>\n        <h1>Orderly Trade</h1>\n      </header>\n      \n      <main className=\"content\">\n        {isMobile ? (\n          <div className=\"mobile-view\">\n            <p>Compact trading view for mobile</p>\n          </div>\n        ) : (\n          <div className=\"desktop-view\">\n            <p>Full dashboard with charts and orderbook</p>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};",
          "notes": [
            "Uses standard CSS media query syntax (strings).",
            "The hook automatically adds and removes event listeners on window resize.",
            "Ideal for conditionally rendering heavy components (like charts) only on desktop to save mobile resources."
          ],
          "related": ["useConfig", "useAccount"]
        }
      ]
    },
    {
      "name": "UI Components",
      "patterns": [
        {
          "name": "CheckboxIcon",
          "description": "A visual icon component used to represent the checked state of a checkbox. It is typically used within custom checkbox implementations to render the checkmark, supporting color variations via className.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use this when building custom form controls or indicators where you need a consistent checkmark visual that matches the Orderly design system.",
          "example": "import { CheckboxIcon } from \"@orderly.network/ui\";\nimport { cnBase } from \"@orderly.network/ui\";\n\nexport const MyCheckbox = () => {\n  return (\n    <div className=\"flex items-center gap-2\">\n      {/* Primary color variant */}\n      <CheckboxIcon className={cnBase(\"oui-text-primary\")} />\n      \n      {/* White color variant */}\n      <CheckboxIcon className={cnBase(\"oui-text-white bg-gray-800 rounded\")} />\n    </div>\n  );\n};",
          "notes": [
            "Does not handle state logic (checked/unchecked) internally; it is purely presentational.",
            "Internal usage suggests using utility classes like 'oui-text-primary' or 'oui-text-white' for coloring."
          ],
          "related": ["Checkbox", "Radio", "Icon"]
        },
        {
          "name": "EmptyStateIcon",
          "description": "A graphical icon designed specifically for empty states (e.g., no search results, empty lists, or zero balance). It provides a consistent visual cue to users when content is absent.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Place this inside tables, lists, or dashboard cards when the data array is empty or null to improve user experience.",
          "example": "import { EmptyStateIcon } from \"@orderly.network/ui\";\n\nexport const NoData = () => {\n  return (\n    <div className=\"flex flex-col items-center justify-center py-10\">\n      <EmptyStateIcon className=\"w-16 h-16 text-gray-500 mb-4\" />\n      <p className=\"text-gray-400\">No data found</p>\n    </div>\n  );\n};",
          "notes": [
            "No specific props are exposed in the context, so styling is likely handled via standard className props.",
            "Often paired with text describing the empty state."
          ],
          "related": ["EmptyState", "Icon", "Table"]
        },
        {
          "name": "InputPrefix",
          "description": "A layout wrapper component that positions content (typically an icon or label) at the start (left) of an input field. It ensures consistent alignment and spacing for input decorations.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use this to add visual context to an input, such as a currency symbol ($), a search icon, or a username prefix.",
          "example": "import { InputPrefix } from \"@orderly.network/ui\";\nimport { Search } from \"lucide-react\";\n\nexport const SearchInput = () => {\n  return (\n    <div className=\"relative flex items-center w-full\">\n      <InputPrefix \n        id=\"search-input\"\n        prefix={<Search className=\"w-4 h-4 text-gray-400\" />}\n        className=\"pl-3\"\n      />\n      <input \n        id=\"search-input\"\n        type=\"text\" \n        placeholder=\"Search assets...\"\n        className=\"w-full py-2 pl-10 pr-4 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:border-primary\"\n      />\n    </div>\n  );\n};",
          "notes": [
            "Requires an 'id' prop to associate with the input element for accessibility.",
            "The 'prefix' prop accepts React nodes (strings, icons, or components)."
          ],
          "related": ["InputSuffix", "TextField", "Input"]
        },
        {
          "name": "InputSuffix",
          "description": "A layout wrapper component that positions content at the end (right) of an input field. It is commonly used for currency symbols, units, or action buttons (like 'Max' or 'Clear').",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use this to append static text or interactive elements to the right side of an input field without breaking the layout.",
          "example": "import { InputSuffix } from \"@orderly.network/ui\";\nimport { DollarSign } from \"lucide-react\";\n\nexport const AmountInput = () => {\n  return (\n    <div className=\"relative flex items-center w-full\">\n      <input \n        id=\"amount-input\"\n        type=\"number\" \n        placeholder=\"0.00\"\n        className=\"w-full py-2 pl-4 pr-10 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:border-primary\"\n      />\n      <InputSuffix \n        id=\"amount-input\"\n        suffix={<span className=\"text-gray-400 font-mono\">USD</span>}\n        className=\"pr-3\"\n      />\n    </div>\n  );\n};",
          "notes": [
            "Works in tandem with InputPrefix to create fully decorated inputs.",
            "Ensure the input has enough right padding to prevent text overlap with the suffix."
          ],
          "related": ["InputPrefix", "TextField", "Input"]
        },
        {
          "name": "TextField",
          "description": "A standard text input wrapper that combines a label, input field, and error handling into a single component. It supports full-width layouts and is commonly used in forms.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use this for standard data entry forms such as login, registration, or settings where labeled text inputs are required.",
          "example": "import { TextField } from \"@orderly.network/ui\";\n\nexport const ReferralForm = () => {\n  return (\n    <div className=\"space-y-4\">\n      <TextField \n        label=\"Referral Code\" \n        placeholder=\"Enter code...\"\n        fullWidth \n        value=\"\"\n        onChange={() => {}}\n      />\n      \n      <TextField \n        label=\"Sub-account Name\"\n        placeholder={`Sub-account 1`}\n        fullWidth \n        value=\"\"\n        onChange={() => {}}\n      />\n    </div>\n  );\n};",
          "notes": [
            "The 'fullWidth' prop makes the input take 100% of the parent container's width.",
            "Internal usage shows it can handle dynamic placeholders based on counts (e.g., Sub-account 1)."
          ],
          "related": ["InputPrefix", "InputSuffix", "NumberField"]
        },
        {
          "name": "ExtensionProvider",
          "description": "A React Context provider that enables the plugin/extension system for the Orderly UI. It must wrap the application tree to allow `ExtensionSlot` components to function.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Wrap your root application component with this provider if you intend to use the extension system to inject custom UI elements at specific points.",
          "example": "import { ExtensionProvider } from \"@orderly.network/ui\";\nimport { App } from \"./App\";\n\nexport const Root = () => {\n  const extensions = {\n    // Custom extension configurations\n  };\n\n  return (\n    <ExtensionProvider extensions={extensions}>\n      <App />\n    </ExtensionProvider>\n  );\n};",
          "notes": [
            "Required for `ExtensionSlot` to work.",
            "Accepts an 'extensions' prop to configure available plugins."
          ],
          "related": ["ExtensionSlot", "useExtension", "PluginContext"]
        },
        {
          "name": "ExtensionSlot",
          "description": "A placeholder component that renders registered extensions (plugins) at specific, predefined positions within the UI. It allows for dynamic content injection without modifying the core layout code.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Place these components in your layout where you want to allow third-party or internal plugins to inject their own UI elements (e.g., adding a button to the mobile menu).",
          "example": "import { ExtensionSlot } from \"@orderly.network/ui\";\nimport { ExtensionPositionEnum } from \"@orderly.network/ui\";\n\nexport const MobileMenu = () => {\n  return (\n    <div className=\"mobile-menu-container\">\n      <h3>Menu</h3>\n      \n      {/* This slot renders any extension registered for the Mobile Account Menu */}\n      <ExtensionSlot position={ExtensionPositionEnum.MobileAccountMenu} />\n      \n      {/* This slot renders content when data is empty */}\n      <ExtensionSlot position={ExtensionPositionEnum.EmptyDataIdentifier} />\n    </div>\n  );\n};",
          "notes": [
            "Requires a 'position' prop, usually an enum value like 'MobileAccountMenu' or 'EmptyDataIdentifier'.",
            "If no extension is registered for a position, the slot renders nothing."
          ],
          "related": ["ExtensionProvider", "ExtensionPositionEnum", "Plugin"]
        },
        {
          "name": "CombineSelect",
          "description": "A compact select component that combines a trigger and a dropdown list. It is designed for small footprints (like 'xs' size) and is often used for selecting assets, timeframes, or types.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use this in headers, toolbars, or table rows where space is limited but a selection is required.",
          "example": "import { CombineSelect } from \"@orderly.network/ui\";\n\nexport const AssetSelector = () => {\n  const options = [\n    { label: \"BTC\", value: \"BTC\" },\n    { label: \"ETH\", value: \"ETH\" },\n    { label: \"SOL\", value: \"SOL\" },\n  ];\n\n  return (\n    <CombineSelect \n      size=\"xs\"\n      options={options}\n      defaultValue=\"BTC\"\n      onValueChange={(val) => console.log(\"Selected:\", val)}\n    />\n  );\n};",
          "notes": [
            "Supports a 'size' prop, with 'xs' being a common usage pattern seen internally.",
            "Handles 'onValueChange' for updates when the user selects an option."
          ],
          "related": ["Select", "Dropdown", "TextField"]
        },
        {
          "name": "TokenSelect",
          "description": "A specialized dropdown component designed for selecting cryptocurrency tokens. It typically handles token display, search functionality, and selection state management.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use the TokenSelect component whenever the user needs to choose a specific asset for trading, depositing, or withdrawing. It abstracts the complexity of token lists and UI presentation.",
          "example": "import React from \"react\";\nimport { TokenSelect } from \"@orderly.network/ui\";\n\nconst MyTokenPicker = () => {\n  // Define available tokens\n  const tokens = [\n    { symbol: \"ETH\", name: \"Ethereum\", logo: \"/eth.png\" },\n    { symbol: \"USDC\", name: \"USD Coin\", logo: \"/usdc.png\" },\n    { symbol: \"BTC\", name: \"Bitcoin\", logo: \"/btc.png\" },\n  ];\n\n  const handleSelect = (token: any) => {\n    console.log(\"Selected token:\", token);\n  };\n\n  return (\n    <div className=\"w-64\">\n      <TokenSelect\n        tokens={tokens}\n        onSelect={handleSelect}\n        defaultValue=\"USDC\"\n      />\n    </div>\n  );\n};\n\nexport default MyTokenPicker;",
          "notes": [
            "Installation: npm install @orderly.network/ui",
            "Ensure the tokens array follows the structure { symbol, name, logo }.",
            "Integrates well with the Orderly Wallet and Trading contexts."
          ],
          "related": ["Select", "TokenInput", "useTokenList"]
        },
        {
          "name": "SliderTip",
          "description": "A tooltip component specifically designed to accompany range sliders. It displays the current numerical value and positions itself relative to the slider thumb.",
          "installation": "npm install @orderly.network/ui",
          "usage": "SliderTip is used to provide precise feedback to users as they drag a slider handle. It calculates its position based on the current value relative to the maximum value.",
          "example": "import React, { useState } from \"react\";\nimport { SliderTip } from \"@orderly.network/ui\";\n\nconst MySliderWithTip = () => {\n  const [value, setValue] = useState(50);\n  const max = 100;\n\n  return (\n    <div className=\"relative w-full py-10\">\n      {/* Visual representation of a slider track */}\n      <div className=\"h-2 bg-gray-700 rounded-full w-full\">\n        <div \n          className=\"h-full bg-blue-500 rounded-full\" \n          style={{ width: `${(value / max) * 100}%` }} \n        />\n      </div>\n\n      {/* The floating tip component */}\n      <SliderTip\n        value={value}\n        max={max}\n        className=\"text-blue-400\"\n      />\n\n      <input\n        type=\"range\"\n        min=\"0\"\n        max={max}\n        value={value}\n        onChange={(e) => setValue(Number(e.target.value))}\n        className=\"absolute top-0 w-full opacity-0 cursor-pointer h-10\"\n      />\n    </div>\n  );\n};\n\nexport default MySliderWithTip;",
          "notes": [
            "Installation: npm install @orderly.network/ui",
            "Requires a 'value' and 'max' prop to calculate positioning correctly.",
            "Often used internally by the main Slider component but can be composed for custom implementations."
          ],
          "related": ["Slider", "Input", "Tooltip"]
        },
        {
          "name": "DataFilter",
          "description": "A UI component for filtering data sets, typically rendered as a segmented control or a tab bar. It allows users to switch between different views or data categories.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Place DataFilter above tables or lists to allow users to toggle between different data states (e.g., Open vs. Closed positions, different timeframes).",
          "example": "import React, { useState } from \"react\";\nimport { DataFilter } from \"@orderly.network/ui\";\n\nconst MyFilteredTable = () => {\n  const [filter, setFilter] = useState(\"open\");\n\n  const filterItems = [\n    { label: \"Open Orders\", value: \"open\" },\n    { label: \"Order History\", value: \"history\" },\n    { label: \"Trade History\", value: \"trades\" },\n  ];\n\n  return (\n    <div className=\"p-4\">\n      <DataFilter\n        items={filterItems}\n        onFilter={(val) => {\n          setFilter(val);\n          console.log(\"Filter changed to:\", val);\n        }}\n        defaultValue=\"open\"\n        className=\"mb-4\"\n      />\n      \n      <div className=\"text-gray-400\">\n        Currently showing: <span className=\"text-white\">{filter}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default MyFilteredTable;",
          "notes": [
            "Installation: npm install @orderly.network/ui",
            "The 'items' prop expects an array of objects with 'label' and 'value'.",
            "Controlled component: use 'onFilter' to update your parent state."
          ],
          "related": ["DataTable", "Tabs", "Status"]
        },
        {
          "name": "DataTable",
          "description": "A comprehensive table component that handles data rendering, loading states, and empty states. It is the primary container for displaying structured financial data.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use DataTable for displaying order history, positions, or trade history. It supports column definitions and custom row rendering.",
          "example": "import React from \"react\";\nimport { DataTable } from \"@orderly.network/ui\";\n\nconst MyOrderTable = () => {\n  const columns = [\n    { key: \"symbol\", title: \"Market\" },\n    { key: \"side\", title: \"Side\" },\n    { key: \"size\", title: \"Size\" },\n    { key: \"price\", title: \"Price\" },\n  ];\n\n  const data = [\n    { id: 1, symbol: \"PERP-ETH\", side: \"BUY\", size: \"1.5\", price: \"2200.00\" },\n    { id: 2, symbol: \"PERP-BTC\", side: \"SELL\", size: \"0.5\", price: \"42000.00\" },\n  ];\n\n  return (\n    <DataTable\n      columns={columns}\n      dataSource={data}\n      loading={false}\n      emptyView={<div className=\"p-4 text-center text-gray-500\">No orders found</div>}\n      classNames={{\n        root: \"oui-bg-base-7 oui-rounded-lg\",\n        header: \"oui-text-gray-400\"\n      }}\n    />\n  );\n};\n\nexport default MyOrderTable;",
          "notes": [
            "Installation: npm install @orderly.network/ui",
            "Pass 'loading={true}' to show a skeleton loader.",
            "Use 'emptyView' to customize the UI when data is empty.",
            "Supports custom classNames via the 'classNames' prop for deep styling."
          ],
          "related": ["DataFilter", "TableBody", "TableCell"]
        },
        {
          "name": "TableBody",
          "description": "The body section of the DataTable, responsible for rendering the list of rows. It handles the iteration over data and application of row-specific styles.",
          "installation": "npm install @orderly.network/ui",
          "usage": "While typically used internally by DataTable, TableBody can be used directly when building highly custom table layouts that need specific row rendering logic outside the standard DataTable wrapper.",
          "example": "import React from \"react\";\nimport { TableBody } from \"@orderly.network/ui\";\n\nconst CustomTableSection = () => {\n  // Mock row data structure expected by TableBody\n  const rows = [\n    {\n      id: \"row-1\",\n      cells: [\n        { value: \"ETH-USDC\", key: \"market\" },\n        { value: \"Long\", key: \"side\" },\n        { value: \"$1,200\", key: \"size\" }\n      ]\n    }\n  ];\n\n  return (\n    <table className=\"w-full text-left\">\n      <thead>\n        <tr>\n          <th className=\"p-2\">Market</th>\n          <th className=\"p-2\">Side</th>\n          <th className=\"p-2\">Size</th>\n        </tr>\n      </thead>\n      {/* Usage of TableBody component */}\n      <TableBody\n        rows={rows}\n        bordered={false}\n        className=\"text-sm\"\n      />\n    </table>\n  );\n};\n\nexport default CustomTableSection;",
          "notes": [
            "Installation: npm install @orderly.network/ui",
            "Expects a 'rows' prop where each row contains a 'cells' array.",
            "The 'bordered' prop toggles borders between rows."
          ],
          "related": ["DataTable", "TableCell", "TableHeader"]
        },
        {
          "name": "TableCell",
          "description": "A low-level component responsible for rendering individual data cells within a table row. It handles formatting and alignment of cell content.",
          "installation": "npm install @orderly.network/ui",
          "usage": "TableCell is useful for ensuring consistent formatting (like alignment, colors, or font styles) across different table implementations without repeating logic.",
          "example": "import React from \"react\";\nimport { TableCell } from \"@orderly.network/ui\";\n\nconst MyCustomCell = () => {\n  // Example cell object structure\n  const cellData = {\n    key: \"price\",\n    value: \"2450.50\",\n    align: \"right\", // optional alignment\n    className: \"text-green-500 font-mono\"\n  };\n\n  return (\n    <td className=\"p-2 border-b border-gray-700\">\n      <TableCell cell={cellData} />\n    </td>\n  );\n};\n\nexport default MyCustomCell;",
          "notes": [
            "Installation: npm install @orderly.network/ui",
            "The 'cell' prop typically contains the value and styling metadata.",
            "Automatically handles alignment (left/right/center) if specified in the cell config."
          ],
          "related": ["TableBody", "DataTable", "NumTypePnl"]
        },
        {
          "name": "NumTypeRoi",
          "description": "A typography component specifically designed to display Return on Investment (ROI) figures. It automatically applies color coding based on the value (positive, negative, or zero).",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use NumTypeRoi in portfolio summaries, strategy cards, or position lists to quickly visualize profitability.",
          "example": "import React from \"react\";\nimport { NumTypeRoi } from \"@orderly.network/ui\";\n\nconst RoiDisplay = () => {\n  return (\n    <div className=\"flex flex-col gap-2 p-4 bg-gray-800 rounded\">\n      <div className=\"flex justify-between\">\n        <span>Strategy A:</span>\n        {/* Positive ROI - usually green */}\n        <NumTypeRoi value={12.5} decimals={2} suffix=\"%\" />\n      </div>\n      \n      <div className=\"flex justify-between\">\n        <span>Strategy B:</span>\n        {/* Negative ROI - usually red */}\n        <NumTypeRoi value={-5.4} decimals={2} suffix=\"%\" />\n      </div>\n\n      <div className=\"flex justify-between\">\n        <span>Strategy C:</span>\n        {/* Zero ROI - usually neutral/gray */}\n        <NumTypeRoi value={0} decimals={2} suffix=\"%\" />\n      </div>\n    </div>\n  );\n};\n\nexport default RoiDisplay;",
          "notes": [
            "Installation: npm install @orderly.network/ui",
            "Automatically handles color logic (Green for > 0, Red for < 0).",
            "Accepts 'decimals' prop for precision control."
          ],
          "related": ["NumTypePnl", "Percent", "Stat"]
        },
        {
          "name": "NumTypePnl",
          "description": "A specialized typography component for displaying Profit and Loss (PnL) values. It formats currency values and applies semantic coloring (green for profit, red for loss).",
          "installation": "npm install @orderly.network/ui",
          "usage": "Essential for trading interfaces, position rows, and portfolio dashboards where financial performance needs to be instantly recognizable.",
          "example": "import React from \"react\";\nimport { NumTypePnl } from \"@orderly.network/ui\";\n\nconst PnlDisplay = () => {\n  return (\n    <div className=\"p-4 border border-gray-700 rounded\">\n      <h3 className=\"mb-2 text-gray-400\">Unrealized PnL</h3>\n      \n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between items-center\">\n          <span>ETH Position:</span>\n          {/* Profit */}\n          <NumTypePnl value={150.25} decimals={2} prefix=\"$\" />\n        </div>\n\n        <div className=\"flex justify-between items-center\">\n          <span>BTC Position:</span>\n          {/* Loss */}\n          <NumTypePnl value=-42.10 decimals={2} prefix=\"$\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PnlDisplay;",
          "notes": [
            "Installation: npm install @orderly.network/ui",
            "Supports 'prefix' (e.g., '$') and 'decimals' props.",
            "Mirrors the behavior of NumTypeRoi but tailored for currency values."
          ],
          "related": ["NumTypeRoi", "Currency", "DataTable"]
        },
        {
          "name": "NumTypeNotional",
          "description": "A typography component specifically designed to display notional values (the total value of a position or contract). It handles formatting for large financial figures and appends the appropriate currency symbol.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Use this in position tables, portfolio summaries, or trade details where the total dollar value of an asset or contract needs to be displayed clearly.",
          "example": "import { NumTypeNotional } from \"@orderly.network/ui\";\n\nexport const PositionNotional = () => {\n  return (\n    <div className=\"flex flex-col gap-2\">\n      <div>\n        <label className=\"text-xs text-gray-500\">Position Notional</label>\n        <NumTypeNotional \n          value={12500.45} \n          symbol=\"USDT\" \n          className=\"text-lg font-medium\"\n        />\n      </div>\n      {/* Example with large number formatting */}\n      <NumTypeNotional \n        value={1500000} \n        symbol=\"USDT\" \n        options={{ notation: \"compact\" }} \n      />\n    </div>\n  );\n};",
          "notes": [
            "Automatically handles decimal precision based on the symbol provided.",
            "Supports standard Intl.NumberFormat options via the 'options' prop."
          ],
          "related": ["NumTypeAssetValue", "NumTypeCollateral", "useSymbolInfo"]
        },
        {
          "name": "NumTypeAssetValue",
          "description": "A specialized typography component for displaying asset values, such as wallet balances or specific asset quantities. It ensures correct decimal places for crypto assets.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Ideal for displaying user balances in the header, account overview, or deposit/withdraw modals.",
          "example": "import { NumTypeAssetValue } from \"@orderly.network/ui\";\n\nexport const WalletBalance = () => {\n  return (\n    <div className=\"p-4 border rounded\">\n      <h3 className=\"text-sm text-gray-400 mb-1\">Available Balance</h3>\n      <NumTypeAssetValue \n        value={0.4521} \n        symbol=\"ETH\" \n        className=\"text-2xl font-bold text-white\"\n      />\n      \n      <div className=\"mt-4\">\n        <h3 className=\"text-sm text-gray-400 mb-1\">USD Value</h3>\n        <NumTypeAssetValue \n          value={1250.00} \n          symbol=\"USDT\" \n          showSymbol={true}\n        />\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Precision is usually derived from the asset's metadata defined in the Orderly SDK.",
            "Can be configured to hide or show the currency symbol."
          ],
          "related": ["NumTypeNotional", "NumTypeCollateral", "useAccountBalance"]
        },
        {
          "name": "NumTypeCollateral",
          "description": "Typography component for displaying collateral values. It is tailored to show the amount of assets posted as margin in trading accounts.",
          "installation": "npm install @orderly.network/ui",
          "usage": "Used in margin calculators, account summary cards, and risk monitoring dashboards.",
          "example": "import { NumTypeCollateral } from \"@orderly.network/ui\";\n\nexport const MarginInfo = () => {\n  return (\n    <div className=\"flex justify-between items-center py-2 border-b border-gray-800\">\n      <span className=\"text-gray-400 text-sm\">Total Collateral</span>\n      <NumTypeCollateral \n        value={5432.10} \n        symbol=\"USDC\" \n        status=\"positive\" // Optional: affects color if supported\n      />\n    </div>\n  );\n};",
          "notes": [
            "Often used in conjunction with risk ratio calculations.",
            "Formatting aligns with the exchange's collateral requirements."
          ],
          "related": ["NumTypeAssetValue", "NumTypeNotional", "useMarginAccount"]
        },
        {
          "name": "AuthGuard",
          "description": "A wrapper component that conditionally renders its children based on the user's authentication state. If the user is not authenticated, it displays a Connect Wallet button instead.",
          "installation": "npm install @orderly.network/ui-connector",
          "usage": "Essential for protecting trade execution buttons, settings pages, or any feature requiring an active Orderly Key session.",
          "example": "import { AuthGuard } from \"@orderly.network/ui-connector\";\nimport { PlaceOrderButton } from \"./PlaceOrderButton\";\n\nexport const ProtectedTradeAction = () => {\n  return (\n    <AuthGuard \n      networkId={orderly_network_id} // e.g., 201 or 202\n      buttonProps={{\n        size: \"md\",\n        fullWidth: true,\n        className: \"bg-blue-600 hover:bg-blue-700\"\n      }}\n    >\n      {/* This content only renders if the user is authenticated */}\n      <PlaceOrderButton />\n    </AuthGuard>\n  );\n};",
          "notes": [
            "Passes button props directly to the underlying trigger button when unauthenticated.",
            "Requires the Orderly network ID to function correctly."
          ],
          "related": ["AuthGuardEmpty", "WalletConnectorWidget", "useOrderlyContext"]
        },
        {
          "name": "AuthGuardEmpty",
          "description": "Similar to AuthGuard, but renders nothing (an empty state) if the user is not authenticated, rather than prompting them to connect.",
          "installation": "npm install @orderly.network/ui-connector",
          "usage": "Useful for UI elements that should simply disappear if the user is logged out, keeping the interface clean without aggressive 'Connect' prompts.",
          "example": "import { AuthGuardEmpty } from \"@orderly.network/ui-connector\";\nimport { AccountSettings } from \"./AccountSettings\";\n\nexport const SilentProtection = () => {\n  return (\n    <AuthGuardEmpty networkId={orderly_network_id}>\n      {/* If not authenticated, renders nothing (null) instead of a button */}\n      <AccountSettings />\n    </AuthGuardEmpty>\n  );\n};",
          "notes": [
            "Does not render any fallback UI by default.",
            "Useful for dashboard widgets that are irrelevant to guest users."
          ],
          "related": ["AuthGuard", "useAccount"]
        },
        {
          "name": "WalletConnectorWidget",
          "description": "A standalone widget that triggers the wallet connection modal. It serves as the primary entry point for users to link their Web3 wallet.",
          "installation": "npm install @orderly.network/ui-connector",
          "usage": "Place in the navigation bar or landing page header to allow users to initiate the onboarding flow.",
          "example": "import { WalletConnectorWidget } from \"@orderly.network/ui-connector\";\n\nexport const HeaderConnect = () => {\n  return (\n    <header className=\"flex justify-end p-4\">\n      <WalletConnectorWidget \n        // Optional: Customize the button appearance if supported by theme\n        className=\"rounded-lg\"\n      />\n    </header>\n  );\n};",
          "notes": [
            "Handles the detection of installed wallets (e.g., MetaMask, WalletConnect).",
            "Integrates automatically with the Orderly Key generation flow."
          ],
          "related": ["AuthGuard", "useWallet"]
        },
        {
          "name": "LeverageInput",
          "description": "An input component specifically designed for entering leverage multipliers. It typically includes validation to ensure the value is within the allowed range for the specific market.",
          "installation": "npm install @orderly.network/ui-leverage",
          "usage": "Used in trading forms where users need to manually type or adjust their leverage for a position.",
          "example": "import { LeverageInput } from \"@orderly.network/ui-leverage\";\nimport { useState } from \"react\";\n\nexport const LeverageControl = () => {\n  const [leverage, setLeverage] = useState(5);\n\n  return (\n    <div className=\"w-48\">\n      <label className=\"text-xs text-gray-500 mb-1 block\">Leverage (x)</label>\n      <LeverageInput \n        value={leverage}\n        onChange={(val) => setLeverage(val)}\n        max={20}\n        step={1}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Usually accepts numeric values representing the multiplier (e.g., 5 for 5x).",
            "May trigger margin recalculation on change."
          ],
          "related": ["LeverageSelector", "useLeverage"]
        },
        {
          "name": "LeverageSelector",
          "description": "A selector component (often a slider or a set of preset buttons) that allows users to quickly select a leverage level without typing.",
          "installation": "npm install @orderly.network/ui-leverage",
          "usage": "Provides a faster, more user-friendly way to adjust leverage compared to a raw text input, often found in the trading panel header.",
          "example": "import { LeverageSelector } from \"@orderly.network/ui-leverage\";\nimport { useState } from \"react\";\n\nexport const QuickLeveragePicker = () => {\n  const [leverage, setLeverage] = useState(10);\n\n  return (\n    <LeverageSelector \n      value={leverage}\n      onChange={setLeverage}\n      // Preset options often rendered as a slider or quick-select buttons\n      options={[1, 2, 5, 10, 20, 50, 100]} \n      max={100}\n    />\n  );\n};",
          "notes": [
            "Visual feedback often indicates the risk level associated with higher leverage.",
            "Synchronizes with the LeverageInput state if both are present."
          ],
          "related": ["LeverageInput", "usePositionRisk"]
        },
        {
          "name": "LTVRiskTooltipUI",
          "description": "A tooltip component designed to display Loan-to-Value (LTV) risk metrics. It typically visualizes the distance between the current LTV and liquidation thresholds, helping users understand the safety margin of their borrowed positions.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Wrap text or an icon representing the LTV ratio with this component to provide users with detailed risk information on hover or click.",
          "example": "import React from \"react\";\nimport { LTVRiskTooltipUI } from \"@orderly.network/ui-order-entry\";\n\nexport const LTVRiskExample = () => {\n  // Example: Calculating risk level based on Loan-to-Value ratio\n  const currentLTV = 0.75; // 75%\n  const maintenanceLTV = 0.85;\n\n  return (\n    <div className=\"p-4 border rounded\">\n      <h3 className=\"text-sm font-semibold mb-2\">Position Risk</h3>\n      \n      {/* The tooltip wraps the trigger content */}\n      <LTVRiskTooltipUI \n        ltv={currentLTV}\n        maintenanceLtv={maintenanceLTV}\n      >\n        <span className=\"text-blue-500 cursor-help underline\">\n          Current LTV: {(currentLTV * 100).toFixed(2)}%\n        </span>\n      </LTVRiskTooltipUI>\n    </div>\n  );\n};",
          "notes": [
            "Ensure the LTV value passed is a decimal (e.g., 0.5 for 50%), not a percentage integer.",
            "Useful in margin trading dashboards or portfolio summaries."
          ],
          "related": ["AccountBalance", "MarginRatio", "PositionTable"]
        },
        {
          "name": "AdditionalConfigButton",
          "description": "A toggle button used to reveal or hide advanced order configuration options within the order entry form. It provides visual feedback (active state) to indicate whether additional settings are currently exposed.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Place this button above or below the main input fields (Price/Size) to allow users to access Take Profit, Stop Loss, or Time-In-Force settings.",
          "example": "import React, { useState } from \"react\";\nimport { AdditionalConfigButton } from \"@orderly.network/ui-order-entry\";\n\nexport const ConfigButtonExample = () => {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  return (\n    <div className=\"flex flex-col items-start gap-2\">\n      <p className=\"text-xs text-gray-500\">Order Configuration</p>\n      \n      {/* Button toggles the visibility of advanced order settings */}\n      <AdditionalConfigButton \n        active={isExpanded}\n        onClick={() => setIsExpanded(!isExpanded)}\n      />\n      \n      {isExpanded && (\n        <div className=\"mt-2 p-2 bg-gray-100 rounded text-sm\">\n          Advanced settings (TP/SL, Post-Only) are now visible.\n        </div>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "The 'active' prop usually changes the button's icon or background color to indicate state.",
            "It does not contain the logic for the settings itself, only the trigger mechanism."
          ],
          "related": ["OrderEntry", "AdvancedTPSLResult", "OrderTypeSelect"]
        },
        {
          "name": "AdvancedTPSLResult",
          "description": "Displays the calculated result and validation status of Take Profit (TP) and Stop Loss (SL) settings. It shows the trigger prices and highlights any validation errors before the user submits the order.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Render this component inside the advanced settings panel of the order entry form to give users a summary of their conditional orders.",
          "example": "import React from \"react\";\nimport { AdvancedTPSLResult } from \"@orderly.network/ui-order-entry\";\n\nexport const TPSLResultExample = () => {\n  // Mock order data based on internal usage patterns\n  const mockOrder = {\n    trigger_price: \"2800.00\",\n    tp_trigger_price: \"2900.00\",\n    sl_trigger_price: \"2700.00\",\n    quantity: \"0.5\"\n  };\n\n  const mockSymbolInfo = {\n    symbol: \"PERP_ETH_USDC\",\n    tick_size: 0.1,\n    min_order_size: 0.01\n  };\n\n  const mockErrors = {\n    tp_error: null, // string or null\n    sl_error: \"Price too close to mark\"\n  };\n\n  return (\n    <div className=\"w-full max-w-md border p-4 rounded\">\n      <h4 className=\"text-sm font-bold mb-3\">TP/SL Summary</h4>\n      \n      <AdvancedTPSLResult \n        order={mockOrder}\n        symbolInfo={mockSymbolInfo}\n        errors={mockErrors}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Requires the 'order' object to contain TP/SL specific fields.",
            "The 'errors' prop is crucial for user feedback; pass null if no errors exist."
          ],
          "related": ["AdditionalConfigButton", "OrderEntry", "OrderConfirm"]
        },
        {
          "name": "AssetInfo",
          "description": "Provides a snapshot of asset-specific trading information, such as the estimated liquidation price, current mark price, and whether the asset is currently tradeable.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Ideally placed at the top of the Order Entry component to inform users about the specific asset they are interacting with and their current position risk.",
          "example": "import React from \"react\";\nimport { AssetInfo } from \"@orderly.network/ui-order-entry\";\n\nexport const AssetInfoExample = () => {\n  return (\n    <div className=\"bg-white border rounded-lg p-4 shadow-sm\">\n      <AssetInfo \n        canTrade={true}\n        quote=\"USDC\"\n        estLiqPrice=\"1850.50\"\n        markPrice=\"2100.00\"\n      />\n    </div>\n  );\n};",
          "notes": [
            "If 'canTrade' is false, the component might visually disable trading actions or show a maintenance message.",
            "Estimates liquidation price based on the user's current position and margin."
          ],
          "related": ["SymbolSelect", null, "AccountBalance"]
        },
        {
          "name": "EffectiveFeeUI",
          "description": "A UI component to display the 'effective' fee rate (the rate the user actually pays after accounting for discounts like VIP tiers or token staking).",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Use this in the fee summary section of the order entry form to show the user their discounted rates.",
          "example": "import React from \"react\";\nimport { EffectiveFeeUI } from \"@orderly.network/ui-order-entry\";\n\nexport const EffectiveFeeExample = () => {\n  // Example rates after VIP/Staking discounts\n  const rates = {\n    maker: 0.0002, // 0.02%\n    taker: 0.0005  // 0.05%\n  };\n\n  return (\n    <div className=\"flex gap-4\">\n      <EffectiveFeeUI \n        type=\"maker\"\n        value={rates.maker}\n        currency=\"USDC\"\n      />\n      <EffectiveFeeUI \n        type=\"taker\"\n        value={rates.taker}\n        currency=\"USDC\"\n      />\n    </div>\n  );\n};",
          "notes": [
            "Distinct from 'RegularFeesUI' as it implies dynamic calculation based on user tier.",
            "Often used in conjunction with a tooltip explaining how the discount was calculated."
          ],
          "related": ["RegularFeesUI", "EffectiveFeesWidget", "AccountBalance"]
        },
        {
          "name": "EffectiveFeesWidget",
          "description": "A compact widget that displays both Maker and Taker effective fee rates simultaneously. It is a higher-level component than `EffectiveFeeUI`.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Place this in the header of the trading interface or within the order entry sidebar to constantly remind the user of their current fee tier.",
          "example": "import React from \"react\";\nimport { EffectiveFeesWidget } from \"@orderly.network/ui-order-entry\";\n\nexport const EffectiveFeesWidgetExample = () => {\n  return (\n    <div className=\"p-4 bg-gray-50 rounded border\">\n      <h5 className=\"text-xs text-gray-500 mb-2\">Your Fee Rates</h5>\n      <EffectiveFeesWidget \n        maker={0.0002} \n        taker={0.0005} \n      />\n    </div>\n  );\n};",
          "notes": [
            "Accepts numeric decimal values for fees.",
            "Automatically formats the display (e.g., converting 0.0002 to 0.02%)."
          ],
          "related": ["FeesWidget", "EffectiveFeeUI", "VIPStatus"]
        },
        {
          "name": "FeesWidget",
          "description": "A general-purpose widget for displaying fee information associated with a specific trading symbol. It may fetch or display standard base rates for the asset.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Useful when displaying fee schedules for a market before the user engages with the order entry form, or as a general reference.",
          "example": "import React from \"react\";\nimport { FeesWidget } from \"@orderly.network/ui-order-entry\";\n\nexport const FeesWidgetExample = () => {\n  return (\n    <div className=\"w-full\">\n      <FeesWidget \n        symbol=\"PERP_BTC_USDC\" \n      />\n    </div>\n  );\n};",
          "notes": [
            "Requires the 'symbol' prop to identify the market.",
            "May display different data than 'EffectiveFeesWidget' if it shows base rates rather than user-specific rates."
          ],
          "related": ["EffectiveFeesWidget", "SymbolInfo", "MarketList"]
        },
        {
          "name": "RegularFeesUI",
          "description": "Displays the standard or 'regular' fee rates for a user or market, excluding any specific discounts or VIP benefits.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Helpful for comparison purposes, showing the user what they would pay without their current benefits, or displaying the base market fees.",
          "example": "import React from \"react\";\nimport { RegularFeesUI } from \"@orderly.network/ui-order-entry\";\n\nexport const RegularFeesExample = () => {\n  // Base rates without discounts\n  const baseRates = {\n    maker: 0.0005, // 0.05%\n    taker: 0.0010  // 0.10%\n  };\n\n  return (\n    <div className=\"text-sm text-gray-600\">\n      <p className=\"mb-1\">Standard Rates:</p>\n      <div className=\"flex gap-2\">\n        <RegularFeesUI fee={baseRates.maker} label=\"Maker\" />\n        <span>/</span>\n        <RegularFeesUI fee={baseRates.taker} label=\"Taker\" />\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Often used side-by-side with EffectiveFeeUI to highlight savings.",
            "Props typically include the raw fee value and a display label."
          ],
          "related": ["EffectiveFeeUI", "FeesWidget", "VIPProgram"]
        },
        {
          "name": "RegularFeesWidget",
          "description": "A read-only widget that displays the current Maker and Taker fee rates for a specific market or account type.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Use this in the order entry footer or header to inform users of the trading costs before they execute a trade.",
          "example": "import React from \"react\";\nimport { RegularFeesWidget } from \"@orderly.network/ui-order-entry\";\n\nexport const FeeDisplayExample = () => {\n  // Example: Fetching fees from an API or config\n  const takerFee = \"0.0005\"; // 0.05%\n  const makerFee = \"0.0002\"; // 0.02%\n\n  return (\n    <div className=\"fee-container\">\n      <RegularFeesWidget \n        taker={takerFee} \n        maker={makerFee} \n      />\n    </div>\n  );\n};",
          "notes": [
            "Props accept strings or numbers representing the fee rate (e.g., '0.001' for 0.1%).",
            "Often used dynamically to show different fees for RWA (Real World Assets) vs standard assets."
          ],
          "related": ["OrderEntryWidget", "OrderEntry", "AccountInfo"]
        },
        {
          "name": "OrderEntryHeader",
          "description": "The top section of the order entry form that displays the trading pair and controls for order side (Buy/Sell) and order type (Limit/Market).",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Place this at the very top of your trading interface to allow users to switch between Long/Short and Market/Limit orders.",
          "example": "import React, { useState } from \"react\";\nimport { OrderEntryHeader } from \"@orderly.network/ui-order-entry\";\n\nexport const HeaderExample = () => {\n  const [side, setSide] = useState(\"buy\");\n  const [orderType, setOrderType] = useState(\"limit\");\n\n  return (\n    <OrderEntryHeader\n      symbol=\"PERP_ETH_USDC\"\n      canTrade={true}\n      side={side}\n      order_type={orderType}\n      onSideChange={setSide}\n      onOrderTypeChange={setOrderType}\n    />\n  );\n};",
          "notes": [
            "The `canTrade` prop typically disables the header controls if the market is closed or the user cannot trade.",
            "It handles the visual state for 'Buy' (usually green) and 'Sell' (usually red) modes."
          ],
          "related": ["OrderEntry", "OrderInput", "OrderBook"]
        },
        {
          "name": "OrderInput",
          "description": "Core input fields for entering Price and Amount (Quantity), often including percentage shortcuts and validation logic.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "This is the primary interaction point for users to define how much they want to trade and at what price.",
          "example": "import React, { useState } from \"react\";\nimport { OrderInput } from \"@orderly.network/ui-order-entry\";\n\nexport const InputExample = () => {\n  const [values, setValues] = useState({\n    price: \"2000.50\",\n    quantity: \"0.5\"\n  });\n\n  const handleChange = (key: string, value: string) => {\n    setValues(prev => ({ ...prev, [key]: value }));\n  };\n\n  return (\n    <OrderInput\n      values={values}\n      onValueChange={handleChange}\n      priceInputContainerWidth=\"100%\"\n      symbol=\"PERP_ETH_USDC\"\n    />\n  );\n};",
          "notes": [
            "Requires a `values` object containing `price` and `quantity`.",
            "Automatically handles number formatting and decimal precision based on the symbol's tick size and step size."
          ],
          "related": ["OrderEntryHeader", "ReduceOnlySwitch", "OrderEntry"]
        },
        {
          "name": "PnlInputProvider",
          "description": "A provider component that manages the state and inputs for Take Profit (TP) and Stop Loss (SL) orders attached to a position.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Wrap your TP/SL input fields with this provider to handle the complex logic of conditional orders.",
          "example": "import React from \"react\";\nimport { PnlInputProvider } from \"@orderly.network/ui-order-entry\";\n\nexport const StopLossExample = () => {\n  const stopLossValues = {\n    trigger_price: \"1900.00\",\n    price: \"1895.00\" // Limit price for the stop order\n  };\n\n  return (\n    <div className=\"pnl-section\">\n      <h4>Stop Loss</h4>\n      <PnlInputProvider\n        type=\"SL\"\n        values={stopLossValues}\n        onValueChange={(key, val) => console.log(`Updated ${key}:`, val)}\n      />\n    </div>\n  );\n};",
          "notes": [
            "The `type` prop determines if the inputs are configured for 'SL' (Stop Loss) or 'TP' (Take Profit).",
            "It usually expects a `values` object matching the specific structure of trigger and execution prices."
          ],
          "related": ["OrderEntry", "OrderInput", "PositionTable"]
        },
        {
          "name": "ReduceOnlySwitch",
          "description": "A toggle switch that allows users to specify if an order should only reduce an existing position, not open a new one.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Essential for closing positions or managing risk without accidentally increasing leverage.",
          "example": "import React, { useState } from \"react\";\nimport { ReduceOnlySwitch } from \"@orderly.network/ui-order-entry\";\n\nexport const ReduceOnlyExample = () => {\n  const [isReduceOnly, setIsReduceOnly] = useState(false);\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <ReduceOnlySwitch\n        checked={isReduceOnly}\n        onCheckedChange={setIsReduceOnly}\n      />\n      <span className=\"text-sm\">Reduce Only Position</span>\n    </div>\n  );\n};",
          "notes": [
            "Standard controlled component pattern using `checked` and `onCheckedChange`.",
            "Commonly found near the Submit button in the order entry form."
          ],
          "related": ["OrderEntry", "OrderInput", "PostOnlySwitch"]
        },
        {
          "name": "OrderEntry",
          "description": "The foundational logic and layout component for the order entry interface. It combines inputs, headers, and submission logic.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "Use this when you need to build a custom order entry form but want to reuse the internal logic and layout structure of Orderly.",
          "example": "import React, { useState } from \"react\";\nimport { OrderEntry } from \"@orderly.network/ui-order-entry\";\n\nexport const OrderEntryContainer = () => {\n  // This component typically expects a complex state object\n  // containing price, size, side, reduce_only flags, etc.\n  const [orderState, setOrderState] = useState({\n    symbol: \"PERP_ETH_USDC\",\n    side: \"buy\",\n    order_type: \"limit\",\n    price: \"\",\n    quantity: \"\",\n    reduce_only: false\n  });\n\n  return (\n    <div className=\"order-entry-panel\">\n      <OrderEntry\n        {...orderState}\n        onStateChange={setOrderState}\n        onSubmit={() => console.log(\"Order Placed\")}\n      />\n    </div>\n  );\n};",
          "notes": [
            "It is highly composable and accepts a spread of state properties.",
            "Distinct from `OrderEntryWidget` in that it is often used for deeper customization rather than a drop-in solution."
          ],
          "related": ["OrderEntryWidget", "OrderInput", "OrderEntryHeader"]
        },
        {
          "name": "OrderEntryWidget",
          "description": "A high-level, all-in-one widget that provides a fully functional trading interface (Header, Inputs, Buttons) with minimal setup.",
          "installation": "npm install @orderly.network/ui-order-entry",
          "usage": "The fastest way to integrate trading capabilities into your app. Just provide a symbol and a container.",
          "example": "import React, { useRef } from \"react\";\nimport { OrderEntryWidget } from \"@orderly.network/ui-order-entry\";\n\nexport const WidgetExample = () => {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <div ref={containerRef} className=\"h-[600px] w-full\">\n      <OrderEntryWidget \n        symbol=\"PERP_ETH_USDC\" \n        containerRef={containerRef}\n        // Optional: Disable specific features like TP/SL\n        disableFeatures={[]}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Handles internal state management automatically.",
            "The `containerRef` is often used for calculating dimensions or portal rendering context."
          ],
          "related": ["OrderEntry", "MobileOrderListWidget", "AccountInfo"]
        },
        {
          "name": "MobileOrderListWidget",
          "description": "A mobile-optimized widget for displaying a list of orders (Open, History, or Conditional) with touch-friendly interactions.",
          "installation": "npm install @orderly.network/ui-orders",
          "usage": "Ideal for mobile layouts where screen real estate is limited. It handles filtering and navigation between order states.",
          "example": "import React, { useState } from \"react\";\nimport { MobileOrderListWidget } from \"@orderly.network/ui-orders\";\n\nexport const MobileOrdersExample = () => {\n  const [activeSymbol, setActiveSymbol] = useState(\"PERP_ETH_USDC\");\n\n  return (\n    <div className=\"mobile-view\">\n      <MobileOrderListWidget\n        // Pass undefined to show orders for all symbols\n        symbol={activeSymbol} \n        onSymbolChange={(newSymbol) => setActiveSymbol(newSymbol || \"\")}\n      />\n    </div>\n  );\n};",
          "notes": [
            "If `symbol` is undefined, the widget typically displays orders for all trading pairs.",
            "Includes callbacks for handling symbol changes or order cancellations."
          ],
          "related": ["OrderEntryWidget", "OrderList", "PositionTable"]
        },
        {
          "name": "Orders",
          "description": "A comprehensive component for displaying and managing user orders. It typically includes tabs for Open Orders, Order History, and Conditional Orders, handling the data fetching and state management internally.",
          "installation": "npm install @orderly.network/ui-orders",
          "usage": "Use this component on the 'Trade' or 'Portfolio' page to give users a complete view of their trading activity. It replaces the need to build individual tables for order states.",
          "example": "import React from \"react\";\nimport { Orders } from \"@orderly.network/ui-orders\";\n\nexport const OrdersPage = () => {\n  return (\n    <div className=\"orderly-container\">\n      <Orders \n        // Optional: Filter by specific symbol if needed, though often handled internally via tabs\n        // symbol=\"PERP_ETH_USDC\" \n      />\n    </div>\n  );\n};",
          "notes": [
            "Ensure the OrderlyProvider is wrapping your application to handle authentication and context.",
            "This component usually renders tabs for different order states (Open, History)."
          ],
          "related": ["OrderTable", "CancelAllButton", "useOrders"]
        },
        {
          "name": "ShareButtonWidget",
          "description": "A button widget that triggers a modal to share trade details or PnL (Profit and Loss) information. It can be attached to specific orders or positions.",
          "installation": "npm install @orderly.network/ui-orders",
          "usage": "Place this button inside a table row (e.g., in an Order History or Position table) to allow users to share their successful trades on social media or via a link.",
          "example": "import React from \"react\";\nimport { ShareButtonWidget } from \"@orderly.network/ui-orders\";\n\nexport const TradeShareExample = () => {\n  // Mock order object based on internal usage patterns\n  const mockOrder = {\n    order_id: 123456789,\n    symbol: \"PERP_ETH_USDC\",\n    side: \"BUY\",\n    price: 2500,\n    quantity: 0.5\n  };\n\n  const shareConfig = {\n    // Configuration specific to how PnL is displayed in the share modal\n    showPnL: true,\n    theme: \"dark\"\n  };\n\n  return (\n    <ShareButtonWidget \n      order={mockOrder}\n      sharePnLConfig={shareConfig}\n      modalId=\"share-pnl-modal-1\"\n    />\n  );\n};",
          "notes": [
            "Requires a `sharePnLConfig` object to customize the appearance of the shared content.",
            "The `modalId` prop is used to manage the visibility of the sharing modal."
          ],
          "related": ["Orders", "Positions", "SharePnLModal"]
        },
        {
          "name": "CloseAllPositionsWidget",
          "description": "A widget that provides functionality to close all open positions, either for a specific trading pair or across the entire portfolio.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Ideally placed in the header of the Positions section or as a floating action button. It provides a quick way to exit the market.",
          "example": "import React from \"react\";\nimport { CloseAllPositionsWidget } from \"@orderly.network/ui-positions\";\n\nexport const PositionManager = () => {\n  return (\n    <div className=\"flex justify-end p-4\">\n      {/* Closes all positions for PERP_ETH_USDC */}\n      <CloseAllPositionsWidget symbol=\"PERP_ETH_USDC\" />\n      \n      {/* Closes all positions across all symbols if symbol is undefined or omitted */}\n      {/* <CloseAllPositionsWidget /> */}\n    </div>\n  );\n};",
          "notes": [
            "Passing a `symbol` prop restricts the action to that specific market.",
            "Omitting the `symbol` prop usually attempts to close all positions across all markets."
          ],
          "related": ["Positions", "PositionTable", "usePositions"]
        },
        {
          "name": "LiquidationWidget",
          "description": "A desktop-optimized table widget displaying liquidation history. It shows details of positions that were liquidated.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Use this in the 'History' or 'Portfolio' section to allow users to review past liquidation events.",
          "example": "import React from \"react\";\nimport { LiquidationWidget } from \"@orderly.network/ui-positions\";\n\nexport const LiquidationHistory = () => {\n  return (\n    <div className=\"orderly-liquidation-widget\">\n      <h3>Liquidation History</h3>\n      {/* Displays liquidation history for a specific symbol */}\n      <LiquidationWidget symbol=\"PERP_BTC_USDC\" />\n    </div>\n  );\n};",
          "notes": [
            "If `symbol` is undefined, it may show liquidations for all symbols depending on implementation.",
            "This is the desktop variant; use `MobileLiquidationWidget` for mobile views."
          ],
          "related": ["MobileLiquidationWidget", "PositionHistoryWidget", "useAccountHistory"]
        },
        {
          "name": "MobileLiquidationWidget",
          "description": "A mobile-optimized card or list view for liquidation history. It supports pagination via `enableLoadMore` and custom styling.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Implement this within your mobile layout routes to display liquidation data in a touch-friendly format.",
          "example": "import React from \"react\";\nimport { MobileLiquidationWidget } from \"@orderly.network/ui-positions\";\n\nexport const MobileLiquidationView = () => {\n  return (\n    <div className=\"mobile-view\">\n      <MobileLiquidationWidget \n        enableLoadMore\n        symbol={undefined} // undefined implies all symbols\n        classNames={{\n          cell: \"text-sm text-gray-400\",\n          row: \"border-b border-gray-800\"\n        }}\n      />\n    </div>\n  );\n};",
          "notes": [
            "The `classNames` prop allows deep customization of cell and row styles for mobile branding.",
            "The `enableLoadMore` prop is crucial for handling large datasets on mobile devices."
          ],
          "related": ["LiquidationWidget", "MobilePositionHistoryWidget", "InfiniteScroll"]
        },
        {
          "name": "PositionHistoryWidget",
          "description": "A desktop table widget displaying the history of closed positions. It calculates and shows realized PnL.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Essential for the 'History' tab of a trading interface, allowing users to track their past performance.",
          "example": "import React from \"react\";\nimport { PositionHistoryWidget } from \"@orderly.network/ui-positions\";\n\nexport const ClosedPositions = () => {\n  return (\n    <PositionHistoryWidget \n      // Filter by symbol, or undefined for all\n      symbol={undefined} \n      // Control decimal precision for PnL display\n      pnlNotionalDecimalPrecision={2}\n    />\n  );\n};",
          "notes": [
            "Use `pnlNotionalDecimalPrecision` to ensure PnL numbers align with your app's financial display standards.",
            "Leaving `symbol` undefined fetches history for all traded assets."
          ],
          "related": ["MobilePositionHistoryWidget", "LiquidationWidget", "usePositionHistory"]
        },
        {
          "name": "MobilePositionHistoryWidget",
          "description": "A mobile-optimized view for closed position history. It often includes a selector to filter by symbol.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Use this in the mobile version of your portfolio or history page to display closed trades in a condensed format.",
          "example": "import React from \"react\";\nimport { MobilePositionHistoryWidget } from \"@orderly.network/ui-positions\";\n\nexport const MobileHistoryView = () => {\n  const handleSymbolChange = (symbol: string) => {\n    console.log(\"Filtering history by:\", symbol);\n  };\n\n  return (\n    <MobilePositionHistoryWidget \n      symbol={undefined} \n      onSymbolChange={handleSymbolChange}\n    />\n  );\n};",
          "notes": [
            "The `onSymbolChange` callback allows you to sync the history filter with other mobile UI elements (like a dropdown).",
            "Layout is typically vertical cards rather than a horizontal table."
          ],
          "related": ["PositionHistoryWidget", "MobileLiquidationWidget", "useSymbolInfo"]
        },
        {
          "name": "NumeralWithCtx",
          "description": "A utility component that formats numbers (prices, sizes) based on the current symbol's context (tick size, step size) and specified rounding mode.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Use this inside custom table cells or display cards where you need strict control over decimal places and rounding according to the market's rules.",
          "example": "import React from \"react\";\nimport { NumeralWithCtx } from \"@orderly.network/ui-positions\";\nimport { Decimal } from \"decimal.js\";\n\nexport const PriceDisplay = () => {\n  return (\n    <div className=\"price-info\">\n      <span>Mark Price: </span>\n      {/* Displays number with context-aware decimal precision and rounding */}\n      <NumeralWithCtx \n        value={2500.123456789}\n        rm={Decimal.ROUND_DOWN}\n        className=\"text-green-500 font-mono\"\n      />\n    </div>\n  );\n};",
          "notes": [
            "The `rm` prop accepts rounding modes from the `decimal.js` library (e.g., `Decimal.ROUND_DOWN`).",
            "It automatically fetches precision settings from the Orderly context if available."
          ],
          "related": ["useSymbolInfo", "Decimal", "FormatNumber"]
        },
        {
          "name": "Positions",
          "description": "A desktop-optimized table component that displays the user's current open trading positions. It supports filtering by symbol and handles standard position data display (size, entry price, mark price, PnL, etc.).",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Install: npm install @orderly.network/ui-positions. Use this component when you need a clean, tabular view of user positions within a larger dashboard layout.",
          "example": "import React from \"react\";\nimport { Positions } from \"@orderly.network/ui-positions\";\n\nexport const MyPositions = () => {\n  return (\n    <div className=\"orderly-positions-container\">\n      {/* Displays a desktop-friendly table of open positions */}\n      <Positions \n        symbol=\"PERP_ETH_USDC\" \n        onRowClick={(position) => console.log(\"Clicked position:\", position)}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Requires the OrderlyProvider context to fetch account data.",
            "Passing a specific `symbol` prop filters the table to show only that asset's position.",
            "Best suited for desktop or tablet viewports."
          ],
          "related": ["MobilePositions", "usePositions", "PositionsWidget"]
        },
        {
          "name": "MobilePositions",
          "description": "A mobile-optimized card view for displaying open positions. Instead of a dense table, it renders individual cards for each position, making it easier to interact with on touchscreens.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Install: npm install @orderly.network/ui-positions. Use this in responsive layouts where the screen width is narrow, typically inside a mobile-specific route or a collapsible drawer.",
          "example": "import React from \"react\";\nimport { MobilePositions } from \"@orderly.network/ui-positions\";\n\nexport const MyMobilePositions = () => {\n  return (\n    <div className=\"orderly-mobile-positions\">\n      {/* Displays a card-based list view for mobile screens */}\n      <MobilePositions \n        onRowClick={(position) => console.log(\"Navigate to details\", position)}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Layout automatically adjusts for vertical scrolling on mobile devices.",
            "Shares the same data source as `Positions` but renders a different UI tree.",
            "Often paired with a bottom sheet for position actions (Close/TP/SL)."
          ],
          "related": ["Positions", "MobilePositionsWidget", "usePositions"]
        },
        {
          "name": "CombinePositions",
          "description": "Displays positions in a combined or aggregated format. This is often used to show net exposure across different instruments or to group positions by underlying asset in cross-margin modes.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Install: npm install @orderly.network/ui-positions. Use this when your trading strategy involves viewing net exposure rather than individual isolated positions.",
          "example": "import React from \"react\";\nimport { CombinePositions } from \"@orderly.network/ui-positions\";\n\nexport const CombinedView = () => {\n  return (\n    <CombinePositions \n      // Aggregates positions, useful for cross-margin views\n      onRowClick={(data) => console.log(\"Combined data:\", data)}\n    />\n  );\n};",
          "notes": [
            "Logic for combination depends on the account mode (Isolated vs Cross).",
            "UI structure is similar to `Positions` but data is pre-aggregated."
          ],
          "related": ["Positions", "CombinePositionsWidget", "useAccount"]
        },
        {
          "name": "PositionsWidget",
          "description": "A full-featured widget that includes the positions table along with headers, summaries, and potentially action buttons. It is a self-contained unit ready to drop into a trading dashboard.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Install: npm install @orderly.network/ui-positions. Ideal for the main 'Positions' tab of your application where you need a complete, ready-to-go interface without building custom headers.",
          "example": "import React from \"react\";\nimport { PositionsWidget } from \"@orderly.network/ui-positions\";\n\nexport const PositionsDashboardWidget = () => {\n  return (\n    <PositionsWidget \n      // If undefined, shows all symbols. If set, filters to specific symbol.\n      symbol={undefined} \n      // Controls decimal precision for PnL display\n      pnlNotionalDecimalPrecision={2}\n    />\n  );\n};",
          "notes": [
            "Based on internal usage, `pnlNotionalDecimalPrecision` is a key prop for formatting numbers.",
            "Handles the 'show all symbols' vs 'single symbol' logic internally via the `symbol` prop."
          ],
          "related": ["MobilePositionsWidget", "Positions", "usePositions"]
        },
        {
          "name": "MobilePositionsWidget",
          "description": "The mobile counterpart to `PositionsWidget`. It provides a complete mobile interface for positions, including headers and navigation controls, wrapped in a responsive layout.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Install: npm install @orderly.network/ui-positions. Use this for the mobile view of your positions page. It handles touch interactions and mobile-specific layouts automatically.",
          "example": "import React from \"react\";\nimport { MobilePositionsWidget } from \"@orderly.network/ui-positions\";\n\nexport const MobileWidget = () => {\n  const handleSymbolChange = (symbol: string) => {\n    console.log(\"Switching context to symbol:\", symbol);\n  };\n\n  return (\n    <MobilePositionsWidget \n      symbol={undefined}\n      onSymbolChange={handleSymbolChange}\n    />\n  );\n};",
          "notes": [
            "Includes `onSymbolChange` callback to handle navigation when a user taps a specific position symbol.",
            "Optimized for small screens with collapsible details."
          ],
          "related": ["PositionsWidget", "MobilePositions", "useSymbolInfo"]
        },
        {
          "name": "CombinePositionsWidget",
          "description": "A widget wrapper for the `CombinePositions` view. It provides the aggregated position data within a standard widget container, consistent with the rest of the Orderly UI ecosystem.",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Install: npm install @orderly.network/ui-positions. Use this to provide a consistent UI look and feel while displaying combined/aggregated position data.",
          "example": "import React from \"react\";\nimport { CombinePositionsWidget } from \"@orderly.network/ui-positions\";\n\nexport const CombinedWidget = () => {\n  return (\n    <div style={{ height: \"400px\" }}>\n      <CombinePositionsWidget />\n    </div>\n  );\n};",
          "notes": [
            "Useful for portfolio overview dashboards.",
            "Maintains styling consistency with `PositionsWidget`."
          ],
          "related": ["CombinePositions", "PositionsWidget", "AccountSummary"]
        },
        {
          "name": "ReversePositionWidget",
          "description": "A specialized widget that allows users to quickly reverse their current position (e.g., closing a Long and opening a Short of the same size in one action).",
          "installation": "npm install @orderly.network/ui-positions",
          "usage": "Install: npm install @orderly.network/ui-positions. Place this in a trading modal or a quick-actions panel to enable rapid position flipping strategies.",
          "example": "import React from \"react\";\nimport { ReversePositionWidget } from \"@orderly.network/ui-positions\";\n\nexport const ReversePosition = () => {\n  return (\n    <ReversePositionWidget \n      symbol=\"PERP_BTC_USDC\"\n      onSuccess={() => console.log(\"Position reversed successfully\")}\n    />\n  );\n};",
          "notes": [
            "Requires an active position in the specified symbol to function meaningfully.",
            "Handles the order submission logic for closing and opening simultaneously."
          ],
          "related": ["PositionsWidget", "usePlaceOrder", "ClosePositionWidget"]
        },
        {
          "name": "AccountSummary",
          "description": "A high-level summary component that displays key account metrics such as Total Equity, Available Balance, and Unrealized PnL. It is highly configurable via the `elementKeys` prop.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Install: npm install @orderly.network/ui-scaffold. Use this in the header of your app or the top of the dashboard to give users a quick overview of their account health.",
          "example": "import React from \"react\";\nimport { AccountSummary } from \"@orderly.network/ui-scaffold\";\n\n// Define which metrics to display\ntype AccountSummaryKeys = \"total_equity\" | \"available_balance\" | \"unrealized_pnl\";\n\nexport const MyAccountSummary = () => {\n  const elementKeys: AccountSummaryKeys[] = [\"total_equity\", \"available_balance\", \"unrealized_pnl\"];\n\n  return (\n    <AccountSummary \n      elementKeys={elementKeys}\n      // Additional props can be passed to customize layout or styling\n    />\n  );\n};",
          "notes": [
            "The `elementKeys` prop allows you to strictly control which data points are shown.",
            "Data is automatically fetched from the Orderly context.",
            "Supports custom rendering if you need to wrap values in specific styles."
          ],
          "related": ["AccountBalance", "useAccount", "PositionsWidget"]
        },
        {
          "name": "BottomNav",
          "description": "A mobile-first bottom navigation bar component used to switch between primary views in the application.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Use this component to render the primary navigation menu on mobile devices. It accepts an array of menu items and handles the active state highlighting.",
          "example": "import React from \"react\";\nimport { BottomNav } from \"@orderly.network/ui-scaffold\";\n\n// Define the structure of your menu items\nconst mainMenus = [\n  {\n    key: \"trade\",\n    label: \"Trade\",\n    icon: <YourTradeIcon />,\n    activeIcon: <YourActiveTradeIcon />,\n  },\n  {\n    key: \"portfolio\",\n    label: \"Portfolio\",\n    icon: <YourPortfolioIcon />,\n    activeIcon: <YourActivePortfolioIcon />,\n  },\n];\n\nexport const MobileNavigation = () => {\n  const [activeKey, setActiveKey] = React.useState(\"trade\");\n\n  return (\n    <BottomNav\n      mainMenus={mainMenus}\n      activeKey={activeKey}\n      onChange={(key) => setActiveKey(key)}\n    />\n  );\n};",
          "notes": [
            "Ensure your menu items include both an 'icon' and an 'activeIcon' for visual feedback.",
            "Typically used within a MobileScaffold or fixed at the bottom of the viewport."
          ],
          "related": ["BottomNavTradingMenu", "MobileScaffold", "BottomNavWidget"]
        },
        {
          "name": "BottomNavWidget",
          "description": "A widget wrapper for the BottomNav that likely encapsulates state management and routing logic for the navigation bar.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Use this when you want a drop-in navigation solution that handles its own state and menu configuration without manually passing props.",
          "example": "import React from \"react\";\nimport { BottomNavWidget } from \"@orderly.network/ui-scaffold\";\n\nexport const AppLayout = () => {\n  return (\n    <div className=\"h-screen flex flex-col\">\n      {/* Main content area */}\n      <main className=\"flex-1 overflow-auto\">\n        {/* App content goes here */}\n      </main>\n\n      {/* Widget wrapper for BottomNav logic */}\n      <BottomNavWidget />\n    </div>\n  );\n};",
          "notes": [
            "This is useful for quick scaffolding where custom menu configuration isn't immediately necessary.",
            "It automatically integrates with the app's routing context."
          ],
          "related": ["BottomNav", "MobileScaffold", "FooterWidget"]
        },
        {
          "name": "BottomNavTradingMenu",
          "description": "A specific menu item component designed for the trading context within the bottom navigation.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Use this to render individual tabs, specifically for trading-related sections, within a custom navigation container.",
          "example": "import React from \"react\";\nimport { BottomNavTradingMenu } from \"@orderly.network/ui-scaffold\";\n\nexport const TradingTab = () => {\n  const isActive = true; // Derived from router state\n  const menuConfig = {\n    name: \"Perpetual\",\n    icon: <ChartIcon />,\n    activeIcon: <ChartActiveIcon />,\n  };\n\n  return (\n    <BottomNavTradingMenu\n      label={menuConfig.name}\n      active={!!isActive}\n      activeIcon={menuConfig.activeIcon}\n      icon={menuConfig.icon}\n      onClick={() => console.log(\"Navigate to trading\")}\n    />\n  );\n};",
          "notes": [
            "Requires 'active' prop to toggle between the standard icon and 'activeIcon'.",
            "Often used inside the 'mainMenus' array definition for the BottomNav."
          ],
          "related": ["BottomNav", "MainNavWidget", "CloseIcon"]
        },
        {
          "name": "FooterWidget",
          "description": "A footer component typically used to display version information, legal links, or network status.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Place this at the bottom of your application layout, often outside the main scrollable area or within a desktop scaffold.",
          "example": "import React from \"react\";\nimport { FooterWidget } from \"@orderly.network/ui-scaffold\";\n\nexport const AppFooter = () => {\n  return (\n    <div className=\"mt-auto\">\n      <FooterWidget \n        version=\"1.0.0\" \n        className=\"py-4 border-t border-base-contrast-10\" \n      />\n    </div>\n  );\n};",
          "notes": [
            "Useful for displaying static information like Terms of Service or App Version.",
            "Can be hidden on mobile if screen real estate is limited."
          ],
          "related": ["MobileScaffold", "MainNavWidget", "OfflineInfoWidget"]
        },
        {
          "name": "CloseIcon",
          "description": "A reusable close (X) icon component used for dismissing modals, alerts, or clearing inputs.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Implement this anywhere a user needs to close a UI element. It supports custom sizing and opacity.",
          "example": "import React from \"react\";\nimport { CloseIcon } from \"@orderly.network/ui-scaffold\";\n\nexport const ModalHeader = ({ onClose }) => {\n  return (\n    <div className=\"flex justify-between items-center p-4\">\n      <h2 className=\"text-lg font-bold\">Settings</h2>\n      <CloseIcon\n        size={16}\n        className=\"oui-text-base-contrast-80 oui-cursor-pointer hover:text-red-500\"\n        opacity={0.98}\n        onClick={onClose}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Commonly used with 'size' prop 16 or 20.",
            "Accepts standard className props for styling hover states."
          ],
          "related": ["BottomNavTradingMenu", "MainNavWidget", "OfflineInfoWidget"]
        },
        {
          "name": "MainNavWidget",
          "description": "The main navigation widget, typically displayed as a sidebar or top bar on desktop/tablet views.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Use this to provide the primary navigation structure for non-mobile layouts.",
          "example": "import React from \"react\";\nimport { MainNavWidget } from \"@orderly.network/ui-scaffold\";\n\nexport const DesktopLayout = ({ children }) => {\n  return (\n    <div className=\"flex h-screen bg-base-bg\">\n      <aside className=\"w-64 border-r border-base-contrast-10\">\n        <MainNavWidget />\n      </aside>\n      <main className=\"flex-1\">\n        {children}\n      </main>\n    </div>\n  );\n};",
          "notes": [
            "Contrasts with BottomNav which is mobile-specific.",
            "May contain links to Trade, Portfolio, and Wallet sections."
          ],
          "related": ["BottomNav", "FooterWidget", "MobileScaffold"]
        },
        {
          "name": "OfflineInfoWidget",
          "description": "A widget component designed to alert users when the application is offline or experiencing connectivity issues.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Render this conditionally when network status changes to inform the user they cannot interact with the blockchain.",
          "example": "import React from \"react\";\nimport { OfflineInfoWidget } from \"@orderly.network/ui-scaffold\";\n\nexport const NetworkStatus = () => {\n  const isOffline = !navigator.onLine;\n\n  if (!isOffline) return null;\n\n  return (\n    <div className=\"fixed top-0 left-0 right-0 z-50\">\n      <OfflineInfoWidget \n        message=\"Connection lost. Retrying...\"\n        className=\"bg-red-500 text-white\"\n      />\n    </div>\n  );\n};",
          "notes": [
            "Should be positioned prominently (e.g., top of screen) so it is immediately visible.",
            "Often integrates with window 'online' and 'offline' event listeners."
          ],
          "related": ["FooterWidget", "MainNavWidget", "MobileScaffold"]
        },
        {
          "name": "MobileScaffold",
          "description": "A layout wrapper component specifically designed for mobile views, handling headers, footers, and content areas.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Wrap your mobile page content with this to ensure consistent spacing, header positioning, and footer integration.",
          "example": "import React from \"react\";\nimport { MobileScaffold, BottomNav } from \"@orderly.network/ui-scaffold\";\n\nexport const MobilePage = () => {\n  return (\n    <MobileScaffold\n      header={\n        <div className=\"p-4 border-b border-base-contrast-10\">\n          <h1>Orderly App</h1>\n        </div>\n      }\n      footer={<BottomNav mainMenus={[]} />}\n    >\n      <div className=\"p-4\">\n        <p>Your main trading content goes here.</p>\n      </div>\n    </MobileScaffold>\n  );\n};",
          "notes": [
            "Accepts 'header' and 'footer' props to inject navigation bars.",
            "Ensures the content area takes up the remaining height correctly."
          ],
          "related": ["BottomNav", "BottomNavWidget", "FooterWidget"]
        },
        {
          "name": "DesktopScaffold",
          "description": "A specialized layout component specifically designed for desktop viewports. It provides a structure optimized for larger screens, often used in conjunction with responsive logic to switch between mobile and desktop layouts.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Implement this inside a conditional render or a separate route for desktop-only views to ensure optimal use of screen real estate.",
          "example": "import { DesktopScaffold } from \"@orderly.network/ui-scaffold\";\n\nfunction DesktopView() {\n  return (\n    <DesktopScaffold>\n      <div className=\"p-4\">\n        <h1>Desktop Dashboard</h1>\n        {/* Specific desktop layout content */}\n      </div>\n    </DesktopScaffold>\n  );\n}",
          "notes": [
            "Best used when you want to enforce a desktop-specific layout structure.",
            "Often used alongside responsive breakpoints to hide/show on different devices."
          ],
          "related": ["Scaffold", "ScaffoldProvider"]
        },
        {
          "name": "Scaffold",
          "description": "The main layout wrapper component that renders the application structure, including the header, sidebar area, and footer. It handles the responsive layout structure for the web app.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Use this to wrap your page content. It automatically integrates with the ScaffoldProvider to handle layout state.",
          "example": "import { Scaffold } from \"@orderly.network/ui-scaffold\";\n\nfunction AppLayout() {\n  return (\n    <Scaffold\n      footerProps={{\n        telegramUrl: \"https://t.me/orderlynetwork\",\n        discordUrl: \"https://discord.gg/orderlynetwork\",\n        twitterUrl: \"https://twitter.com/orderlynetwork\",\n        trailing: <div> 2023 Orderly Network</div>\n      }}\n    >\n      <div>Your main page content goes here.</div>\n    </Scaffold>\n  );\n}",
          "notes": [
            "Ensure ScaffoldProvider is a parent of this component.",
            "footerProps allows customization of social links and footer content."
          ],
          "related": ["ScaffoldProvider", "DesktopScaffold", "SideNavbarWidget"]
        },
        {
          "name": "ScaffoldProvider",
          "description": "A context provider that manages the global state for the Scaffold layout, such as sidebar expansion and routing integration. It is required to be placed at the root of your application when using Scaffold components.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Wrap your entire application or the specific section using the Scaffold layout with this provider to enable state management for navigation and layout components.",
          "example": "import { ScaffoldProvider } from \"@orderly.network/ui-scaffold\";\n\nfunction App() {\n  return (\n    <ScaffoldProvider\n      routerAdapter={undefined} // Optional: Pass a custom router adapter\n      expanded={false} // Initial state of the sidebar\n      setExpand={(state) => console.log(\"Sidebar expanded:\", state)}\n    >\n      <YourMainContent />\n    </ScaffoldProvider>\n  );\n}",
          "notes": [
            "Required parent component for Scaffold and SideNavbarWidget.",
            "routerAdapter is optional but useful for integrating with Next.js or React Router."
          ],
          "related": ["Scaffold", "DesktopScaffold", "SideNavbarWidget"]
        },
        {
          "name": "SideNavbarWidget",
          "description": "A sidebar navigation widget that renders a list of menu items. It integrates with the Scaffold layout to provide collapsible navigation links.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Place this within the sidebar slot of your Scaffold layout or use it as a standalone navigation component if building a custom layout.",
          "example": "import { SideNavbarWidget } from \"@orderly.network/ui-scaffold\";\n\nfunction Navigation() {\n  return (\n    <SideNavbarWidget\n      items={[\n        { icon: \"home\", label: \"Trade\", path: \"/trade\" },\n        { icon: \"portfolio\", label: \"Portfolio\", path: \"/portfolio\" },\n        { icon: \"history\", label: \"History\", path: \"/history\" },\n      ]}\n    />\n  );\n}",
          "notes": [
            "Items typically require an icon, label, and path.",
            "Interacts with ScaffoldProvider state for expansion/collapse."
          ],
          "related": ["ScaffoldProvider", "Scaffold"]
        },
        {
          "name": "SubAccountUI",
          "description": "A UI component for displaying and managing sub-accounts. It typically renders a dropdown or modal allowing users to switch between different trading sub-accounts.",
          "installation": "npm install @orderly.network/ui-scaffold",
          "usage": "Place in the header or settings area to allow users to context-switch between their sub-accounts.",
          "example": "import { SubAccountUI } from \"@orderly.network/ui-scaffold\";\n\nfunction AccountSwitcher() {\n  return (\n    <SubAccountUI\n      customTrigger={\n        <button className=\"btn-secondary\">\n          Switch Account\n        </button>\n      }\n      // State usually managed by parent or hook\n      accountId=\"account_123\"\n    />\n  );\n}",
          "notes": [
            "Accepts a customTrigger prop to override the default button appearance.",
            "Requires sub-account state context to function correctly."
          ],
          "related": ["Scaffold", "ScaffoldProvider"]
        },
        {
          "name": "Dot",
          "description": "A small indicator component used for carousels or sliders. It visually represents the active index among a list of items.",
          "installation": "npm install @orderly.network/ui-share",
          "usage": "Map over an array of items and render a Dot for each, passing the active state based on the current selection index.",
          "example": "import { Dot } from \"@orderly.network/ui-share\";\n\nfunction CarouselPagination() {\n  const [activeIndex, setActiveIndex] = useState(0);\n  const totalSlides = 5;\n\n  return (\n    <div className=\"flex gap-2\">\n      {Array.from({ length: totalSlides }).map((_, index) => (\n        <Dot\n          key={index}\n          active={index === activeIndex}\n          onClick={() => setActiveIndex(index)}\n        />\n      ))}\n    </div>\n  );\n}",
          "notes": [
            "Commonly used in Share PnL carousels or image galleries.",
            "Styling changes based on the 'active' prop."
          ],
          "related": ["Carousel", "SharePnL"]
        },
        {
          "name": "PriceInput",
          "description": "A specialized input field for entering order prices. It handles formatting, validation, and often displays market context like Best Bid/Offer (BBO) to assist the user.",
          "installation": "npm install @orderly.network/ui-tpsl",
          "usage": "Use in trading forms where users need to input a specific price for Limit, Stop, or Take-Profit orders.",
          "example": "import { PriceInput } from \"@orderly.network/ui-tpsl\";\n\nfunction OrderEntry() {\n  return (\n    <PriceInput\n      order_type=\"LIMIT\"\n      order_price=\"100.50\"\n      bbo={{ bid: 100.00, ask: 100.50 }} // Best Bid/Offer\n      onPriceChange={(price) => console.log(price)}\n    />\n  );\n}",
          "notes": [
            "Requires 'bbo' (Best Bid/Offer) data to highlight market prices.",
            "Behavior changes based on 'order_type' (e.g., Market vs Limit)."
          ],
          "related": ["TPSL", "OrderEntry"]
        },
        {
          "name": "TPSL",
          "description": "A Take-Profit / Stop-Loss configuration component. It provides a UI for users to set trigger prices and execution prices to manage risk on open positions.",
          "installation": "npm install @orderly.network/ui-tpsl",
          "usage": "Render inside a position details modal or a dedicated trading panel to allow users to configure automated exit points for their trades.",
          "example": "import { TPSL } from \"@orderly.network/ui-tpsl\";\n\nfunction PositionTPSL() {\n  return (\n    <TPSL\n      symbol=\"BTC-PERP\"\n      positionSize={0.5}\n      onCancel={() => console.log('Closed TPSL panel')}\n      onComplete={(data) => console.log('TPSL Set:', data)}\n      close={() => console.log('Close modal')}\n    />\n  );\n}",
          "notes": [
            "Handles the logic for both Long and Short positions.",
            "Requires callbacks for onCancel and onComplete to handle form submission."
          ],
          "related": ["PriceInput", "PositionTable"]
        },
        {
          "name": "TPSLWidget",
          "description": "A widget component used to manage Take Profit (TP) and Stop Loss (SL) orders for a specific trading position. It provides inputs for setting trigger prices and order sizes.",
          "installation": "npm install @orderly.network/ui-tpsl",
          "usage": "Use this component in position management panels or trading modals to allow users to define risk management parameters for open positions.",
          "example": "import React from \"react\";\nimport { TPSLWidget } from \"@orderly.network/ui-tpsl\";\n\nexport const PositionTPSLExample = () => {\n  return (\n    <div className=\"orderly-tpsl-container\">\n      <TPSLWidget\n        symbol=\"BTC_USDT_PERP\"\n        positionType={\"LONG\"} // or 'SHORT'\n        positionQuantity={0.5}\n        markPrice={45000}\n        onSubmit={(values) => {\n          console.log(\"TPSL Submitted:\", values);\n        }}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Requires position context (symbol, type, quantity) to calculate valid price ranges.",
            "Usually integrated into a larger position details view."
          ],
          "related": ["TPSLSimpleDialogWidget", "useTPSL", "PositionTable"]
        },
        {
          "name": "TPSLSimpleDialogUI",
          "description": "The 'dumb' UI component for the TPSL dialog. It renders the form fields and layout but relies on external state for values and event handlers.",
          "installation": "npm install @orderly.network/ui-tpsl",
          "usage": "Use this when you need full control over the state management of the TP/SL form, or when building a custom wrapper around the standard UI.",
          "example": "import React, { useState } from \"react\";\nimport { TPSLSimpleDialogUI } from \"@orderly.network/ui-tpsl\";\n\nexport const SimpleDialogExample = () => {\n  const [isOpen, setIsOpen] = useState(true);\n\n  // Mock state representing the form data\n  const formState = {\n    tpPrice: \"46000\",\n    slPrice: \"44000\",\n    tpSize: \"0.5\",\n    slSize: \"0.5\",\n  };\n\n  const handleClose = () => setIsOpen(false);\n\n  const handleComplete = (data) => {\n    console.log(\"Dialog Complete:\", data);\n    setIsOpen(false);\n  };\n\n  return (\n    <TPSLSimpleDialogUI\n      open={isOpen}\n      {...formState}\n      close={handleClose}\n      onComplete={handleComplete}\n      showAdvancedTPSLDialog={() => console.log(\"Open advanced\")}\n    />\n  );\n};",
          "notes": [
            "This component does not handle API calls or validation logic internally.",
            "Props are spread directly into the component, so state must be managed by the parent."
          ],
          "related": ["TPSLSimpleDialogWidget", "TPSLWidget", "Dialog"]
        },
        {
          "name": "TPSLSimpleDialogWidget",
          "description": "A 'smart' widget version of the TPSL dialog. It encapsulates the UI, state management, and logic for submitting TP/SL orders.",
          "installation": "npm install @orderly.network/ui-tpsl",
          "usage": "Ideal for quick integration where you need a ready-to-use modal for setting Take Profit and Stop Loss without building the form logic yourself.",
          "example": "import React, { useState } from \"react\";\nimport { TPSLSimpleDialogWidget } from \"@orderly.network/ui-tpsl\";\n\nexport const SimpleDialogWidgetExample = () => {\n  const [isOpen, setIsOpen] = useState(true);\n\n  return (\n    <TPSLSimpleDialogWidget\n      open={isOpen}\n      symbol=\"BTC_USDT_PERP\"\n      side=\"BUY\"\n      positionQuantity={0.1}\n      onClose={() => setIsOpen(false)}\n      onSuccess={(result) => {\n        console.log(\"Order placed:\", result);\n        setIsOpen(false);\n      }}\n    />\n  );\n};",
          "notes": [
            "Handles internal validation and submission logic.",
            "Requires symbol and position context to function correctly."
          ],
          "related": ["TPSLSimpleDialogUI", "TPSLWidget", "useOrderSubmit"]
        },
        {
          "name": "DesktopDisplayControl",
          "description": "A control bar component designed for desktop views to toggle various TradingView display options like indicators, drawings, and settings.",
          "installation": "npm install @orderly.network/ui-tradingview",
          "usage": "Place this in the header or toolbar of a desktop chart layout to give users control over the chart's visual elements.",
          "example": "import React from \"react\";\nimport { DesktopDisplayControl } from \"@orderly.network/ui-tradingview\";\n\nexport const DesktopControlExample = () => {\n  return (\n    <div className=\"flex justify-end p-2\">\n      <DesktopDisplayControl\n        onToggleIndicators={() => console.log(\"Toggle Indicators\")}\n        onToggleObjectTree={() => console.log(\"Toggle Object Tree\")}\n        onToggleSettings={() => console.log(\"Toggle Settings\")}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Typically positioned in the top-right corner of the chart container.",
            "Styling is optimized for mouse interaction (hover states)."
          ],
          "related": ["MobileDisplayControl", "TradingView", "Chart"]
        },
        {
          "name": "MobileDisplayControl",
          "description": "A mobile-optimized control component for TradingView. It usually presents options in a touch-friendly layout, often as a dropdown or a compact icon row.",
          "installation": "npm install @orderly.network/ui-tradingview",
          "usage": "Use in mobile chart views to save screen real estate while providing access to essential chart settings.",
          "example": "import React from \"react\";\nimport { MobileDisplayControl } from \"@orderly.network/ui-tradingview\";\n\nexport const MobileControlExample = () => {\n  return (\n    <div className=\"flex justify-between p-2 bg-gray-800\">\n      <MobileDisplayControl\n        onToggleFullscreen={() => console.log(\"Fullscreen\")}\n        onToggleSettings={() => console.log(\"Settings\")}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Layout adapts to smaller screens.",
            "Often triggers bottom sheets or menus on tap."
          ],
          "related": ["DesktopDisplayControl", "MobileTimeInterval", "TradingView"]
        },
        {
          "name": "TimeInterval",
          "description": "A selector component for changing the chart's time resolution (timeframe). It displays the current interval and allows switching between predefined options.",
          "installation": "npm install @orderly.network/ui-tradingview",
          "usage": "Essential for any chart interface, allowing users to switch between 1m, 5m, 1h, etc.",
          "example": "import React, { useState } from \"react\";\nimport { TimeInterval } from \"@orderly.network/ui-tradingview\";\n\nexport const TimeIntervalExample = () => {\n  const [interval, setInterval] = useState(\"15\");\n\n  return (\n    <div className=\"flex gap-2\">\n      <TimeInterval\n        value={interval}\n        onChange={(newInterval) => setInterval(newInterval)}\n        options={[\"1\", \"5\", \"15\", \"60\", \"1D\"]}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Usually renders as a row of buttons or a segmented control.",
            "The 'value' prop should match the TradingView library's expected resolution string."
          ],
          "related": ["MobileTimeInterval", "TradingView", "ChartContext"]
        },
        {
          "name": "MobileTimeInterval",
          "description": "A mobile-specific version of the TimeInterval selector, often featuring horizontal scrolling or a dropdown to accommodate limited screen width.",
          "installation": "npm install @orderly.network/ui-tradingview",
          "usage": "Implement in mobile trading views to allow timeframe switching without cluttering the UI.",
          "example": "import React, { useState } from \"react\";\nimport { MobileTimeInterval } from \"@orderly.network/ui-tradingview\";\n\nexport const MobileTimeIntervalExample = () => {\n  const [interval, setInterval] = useState(\"1H\");\n\n  return (\n    <div className=\"w-full overflow-x-auto whitespace-nowrap\">\n      <MobileTimeInterval\n        value={interval}\n        onChange={setInterval}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Supports horizontal swiping for interval selection.",
            "Touch targets are larger for better usability."
          ],
          "related": ["TimeInterval", "MobileDisplayControl", "TradingView"]
        },
        {
          "name": "ZoomOutIcon",
          "description": "An SVG icon component representing a 'Zoom Out' action. It is typically used within chart toolbars to decrease the chart scale.",
          "installation": "npm install @orderly.network/ui-tradingview",
          "usage": "Use in custom chart toolbars or display controls where you need a manual zoom out button.",
          "example": "import React from \"react\";\nimport { ZoomOutIcon } from \"@orderly.network/ui-tradingview\";\n\nexport const ZoomOutExample = () => {\n  return (\n    <button \n      className=\"p-2 rounded hover:bg-gray-700\"\n      onClick={() => console.log(\"Zoom Out\")}\n      aria-label=\"Zoom Out\"\n    >\n      <ZoomOutIcon className=\"w-5 h-5 text-white\" />\n    </button>\n  );\n};",
          "notes": [
            "Accepts standard className props for styling.",
            "Often paired with a ZoomInIcon."
          ],
          "related": ["DesktopDisplayControl", "MobileDisplayControl", "TradingView"]
        },
        {
          "name": "ZoomInIcon",
          "description": "A simple SVG icon component designed for TradingView interfaces, typically used to trigger a zoom-in action on a chart.",
          "installation": "npm install @orderly.network/ui-tradingview",
          "usage": "Use this in chart toolbars or control panels where users need to increase the scale of the visual data.",
          "example": "import React from \"react\";\nimport { ZoomInIcon } from \"@orderly.network/ui-tradingview\";\n\nexport const ZoomInExample = () => {\n  const handleZoom = () => {\n    console.log(\"Zooming in...\");\n  };\n\n  return (\n    <div className=\"p-4 bg-gray-800 rounded-lg flex items-center gap-4\">\n      <ZoomInIcon\n        className=\"oui-text-base-contrast-54 hover:oui-text-base-contrast oui-cursor-pointer transition-colors\"\n        onClick={handleZoom}\n      />\n      <span className=\"text-white text-sm\">Zoom In</span>\n    </div>\n  );\n};",
          "notes": [
            "Supports standard HTML attributes like className and onClick.",
            "Uses Orderly's specific utility classes (e.g., oui-text-base-contrast-54) for theming."
          ],
          "related": ["ZoomOutIcon", "TradingViewWidget", "ChartToolbar"]
        },
        {
          "name": "LtvUI",
          "description": "A presentational component that displays the Loan-to-Value (LTV) ratio. It focuses on visual rendering rather than complex state management.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Ideal for dashboards or summary cards where you need to display the user's current borrowing ratio without interaction.",
          "example": "import React from \"react\";\nimport { LtvUI } from \"@orderly.network/ui-transfer\";\n\nexport const LtvUIExample = () => {\n  // Represents the current Loan-to-Value ratio (e.g., 50%)\n  const currentLtv = 0.5; \n\n  return (\n    <div className=\"p-4 border rounded-md\">\n      <h3 className=\"text-sm text-gray-400 mb-2\">Current LTV</h3>\n      <LtvUI value={currentLtv} />\n    </div>\n  );\n};",
          "notes": [
            "Props are inferred based on standard LTV components (value, max).",
            "Typically used to show a static snapshot of account health."
          ],
          "related": ["LtvWidget", "CollateralRatioUI", "HealthBar"]
        },
        {
          "name": "LtvWidget",
          "description": "An interactive widget that calculates and displays the Loan-to-Value ratio, often showing the difference (diff) between the current LTV and the projected LTV based on user input.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Essential in transfer or borrowing modals to show users how their LTV will change if they add or remove collateral.",
          "example": "import React, { useState } from \"react\";\nimport { LtvWidget } from \"@orderly.network/ui-transfer\";\n\nexport const LtvWidgetExample = () => {\n  const [quantity, setQuantity] = useState<number | undefined>(100);\n\n  return (\n    <div className=\"p-4 bg-white rounded shadow\">\n      <label className=\"block text-sm font-medium mb-2\">\n        Adjust Collateral Quantity\n      </label>\n      <input \n        type=\"number\" \n        value={quantity} \n        onChange={(e) => setQuantity(Number(e.target.value))}\n        className=\"border p-2 rounded w-full mb-4\"\n      />\n\n      {/* showDiff calculates the projected LTV based on the input quantity */}\n      <LtvWidget \n        showDiff={typeof quantity !== \"undefined\" && Number(quantity) > 0}\n        quantity={quantity}\n      />\n    </div>\n  );\n};",
          "notes": [
            "The showDiff prop controls whether the projected change is displayed.",
            "Requires quantity or similar input props to perform calculations."
          ],
          "related": ["LtvUI", "CollateralContribution", "TransferInput"]
        },
        {
          "name": "AccountSelect",
          "description": "A dropdown component allowing users to select between different accounts (e.g., Main Account vs. Sub Accounts) for transfers or trading.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Use in transfer forms or settings where funds need to be moved between different internal accounts.",
          "example": "import React, { useState } from \"react\";\nimport { AccountSelect } from \"@orderly.network/ui-transfer\";\n\nexport const AccountSelectExample = () => {\n  const [selectedAccount, setSelectedAccount] = useState(\"main\");\n\n  const subAccounts = [\n    { accountId: \"main\", label: \"Main Account\" },\n    { accountId: \"sub_1\", label: \"Trading Account 1\" },\n    { accountId: \"sub_2\", label: \"Trading Account 2\" },\n  ];\n\n  return (\n    <div className=\"max-w-xs\">\n      <AccountSelect\n        subAccounts={subAccounts}\n        value={selectedAccount}\n        onValueChange={setSelectedAccount}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Requires an array of account objects passed to subAccounts.",
            "Controlled component: value and onValueChange must be managed."
          ],
          "related": ["ChainSelect", "TokenSelect", "TransferForm"]
        },
        {
          "name": "ActionButton",
          "description": "A versatile button component that handles various states (loading, success, error) and specific actions like signing in or enabling trading.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "The primary call-to-action button in forms, modals, and trading interfaces.",
          "example": "import React from \"react\";\nimport { ActionButton } from \"@orderly.network/ui-transfer\";\n\nexport const ActionButtonExample = () => {\n  const handleSignIn = () => {\n    console.log(\"Redirecting to sign in...\");\n  };\n\n  const handleTransfer = () => {\n    console.log(\"Initiating transfer...\");\n  };\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      {/* Example 1: Sign In Action */}\n      <ActionButton\n        actionType=\"sign_in\"\n        state=\"idle\"\n        signIn={handleSignIn}\n      />\n\n      {/* Example 2: Transfer Action */}\n      <ActionButton\n        actionType=\"transfer\"\n        symbol=\"USDC\"\n        state=\"loading\"\n        disabled={false}\n        onClick={handleTransfer}\n      />\n    </div>\n  );\n};",
          "notes": [
            "The state prop dictates the visual loading state.",
            "actionType determines the button text and default behavior."
          ],
          "related": ["AccountSelect", null, "WalletConnector"]
        },
        {
          "name": "ChainSelect",
          "description": "A dropdown selector for choosing the blockchain network (chain) for deposits, withdrawals, or transfers.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Critical in cross-chain transfer flows to ensure the user selects the correct source or destination network.",
          "example": "import React, { useState } from \"react\";\nimport { ChainSelect } from \"@orderly.network/ui-transfer\";\n\nexport const ChainSelectExample = () => {\n  const [currentChain, setCurrentChain] = useState(\"arbitrum\");\n\n  const chains = [\n    { chainId: \"arbitrum\", name: \"Arbitrum\", icon: \"/icons/arbitrum.png\" },\n    { chainId: \"optimism\", name: \"Optimism\", icon: \"/icons/optimism.png\" },\n    { chainId: \"eth\", name: \"Ethereum\", icon: \"/icons/eth.png\" },\n  ];\n\n  return (\n    <div className=\"w-48\">\n      <ChainSelect\n        chains={chains}\n        value={currentChain}\n        onValueChange={setCurrentChain}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Expects an array of chain objects containing metadata like chainId and name.",
            "Controlled component requiring value and onValueChange."
          ],
          "related": ["AccountSelect", "TokenSelect", "NetworkIndicator"]
        },
        {
          "name": "CollateralContribution",
          "description": "A component that displays the amount of collateral being contributed, handling specific precision requirements (typically for stablecoins like USDC).",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Used in margin trading or lending interfaces to show exactly how much value is being added to a position.",
          "example": "import React from \"react\";\nimport { CollateralContribution } from \"@orderly.network/ui-transfer\";\n\nexport const CollateralContributionExample = () => {\n  const contributionAmount = \"1500.00\";\n  const usdcPrecision = 6;\n\n  return (\n    <div className=\"p-4 bg-gray-50 rounded border\">\n      <h4 className=\"text-xs uppercase text-gray-500 font-bold mb-2\">\n        Collateral Contribution\n      </h4>\n      <CollateralContribution\n        precision={usdcPrecision}\n        value={contributionAmount}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Precision is important here; USDC usually uses 6 decimals.",
            "Formats the value for display purposes."
          ],
          "related": ["LtvWidget", "CollateralRatioUI", "TransferInput"]
        },
        {
          "name": "CollateralRatioUI",
          "description": "A presentational component displaying the collateral ratio (Health Factor), indicating the safety of a user's position against liquidation.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Display in portfolio summaries or position details to give users a quick visual check on their risk level.",
          "example": "import React from \"react\";\nimport { CollateralRatioUI } from \"@orderly.network/ui-transfer\";\n\nexport const CollateralRatioUIExample = () => {\n  // A ratio of 1.5 indicates the collateral is worth 1.5x the debt\n  const ratio = 1.5;\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <span className=\"text-sm text-gray-600\">Collateral Ratio:</span>\n      <CollateralRatioUI value={ratio} />\n    </div>\n  );\n};",
          "notes": [
            "Props are inferred (value) as no internal usage was provided.",
            "Often color-coded (Green for safe, Red for danger)."
          ],
          "related": ["LtvUI", "LtvWidget", "PositionCard"]
        },
        {
          "name": "CollateralRatioWidget",
          "description": "A visual widget that displays the user's current collateral ratio. It typically uses color coding (e.g., green for safe, red for liquidation risk) to indicate the health of the margin account based on the provided value.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Use this in portfolio or margin account overview sections to give users a quick visual check on their account health.",
          "example": "import React from \"react\";\nimport { CollateralRatioWidget } from \"@orderly.network/ui-transfer\";\n\nexport const CollateralExample = () => {\n  // Example: User has a collateral ratio of 1.5 (150%)\n  const currentRatio = 1.5;\n\n  return (\n    <div style={{ padding: \"20px\", width: \"300px\" }}>\n      <CollateralRatioWidget value={currentRatio} />\n    </div>\n  );\n};",
          "notes": [
            "The component handles the visual representation (color/progress) based on the numerical value passed.",
            "Ensure the value passed is a number representing the ratio (e.g., 1.5 for 150%)."
          ],
          "related": ["AccountHealthBar", "MarginInfo", "DepositStatusWidget"]
        },
        {
          "name": "ConvertAction",
          "description": "A button component designed specifically for executing token conversions. It manages loading states and disabled states while interacting with the specific network logic.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Place this at the bottom of a conversion form. It triggers the actual swap or cross-chain transfer logic.",
          "example": "import React, { useState } from \"react\";\nimport { ConvertAction } from \"@orderly.network/ui-transfer\";\n\nexport const ConvertActionExample = () => {\n  const [loading, setLoading] = useState(false);\n  const networkId = \"orderly\";\n\n  const handleConvert = async () => {\n    setLoading(true);\n    // Simulate conversion logic\n    setTimeout(() => {\n      setLoading(false);\n      console.log(\"Conversion complete\");\n    }, 2000);\n  };\n\n  return (\n    <ConvertAction\n      networkId={networkId}\n      disabled={loading}\n      loading={loading}\n      onConvert={handleConvert}\n    />\n  );\n};",
          "notes": [
            "Requires a networkId to ensure the transaction is broadcast to the correct chain.",
            "The 'loading' prop should be controlled by the parent component during async operations."
          ],
          "related": ["ConvertFormWidget", "ConvertFormUI", "MinimumReceived"]
        },
        {
          "name": "ConvertFormUI",
          "description": "A presentational component (UI) that renders the input fields for a conversion form. It does not contain logic for fetching rates or executing trades but handles the layout and user input for 'From' and 'To' fields.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Use this when you need a custom layout for the conversion inputs but want to rely on Orderly's styling and input handling logic.",
          "example": "import React, { useState } from \"react\";\nimport { ConvertFormUI } from \"@orderly.network/ui-transfer\";\n\nexport const ConvertFormUIExample = () => {\n  const [amount, setAmount] = useState(\"\");\n\n  // Mock token objects\n  const fromToken = { symbol: \"USDC\", decimals: 6 };\n  const toToken = { symbol: \"USDT\", decimals: 6 };\n\n  return (\n    <div style={{ width: \"400px\" }}>\n      <ConvertFormUI\n        fromToken={fromToken}\n        toToken={toToken}\n        amount={amount}\n        onAmountChange={setAmount}\n        onSwitchTokens={() => console.log(\"Switch clicked\")}\n        balance=\"1000.00\"\n      />\n    </div>\n  );\n};",
          "notes": [
            "This is a 'dumb' component. You must manage the state (amount, selected tokens) in the parent component.",
            "Requires token metadata objects to display symbols and logos correctly."
          ],
          "related": ["ConvertFormWidget", "ConvertAction", "TokenSelect"]
        },
        {
          "name": "ConvertFormWidget",
          "description": "A fully functional 'smart' component that encapsulates the entire conversion flow. It likely includes the ConvertFormUI, fetches exchange rates, manages balances, and integrates with the ConvertAction.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "The quickest way to add conversion functionality to your app without building the form logic yourself.",
          "example": "import React from \"react\";\nimport { ConvertFormWidget } from \"@orderly.network/ui-transfer\";\n\nexport const ConvertFormWidgetExample = () => {\n  const handleSuccess = (data) => {\n    console.log(\"Conversion Successful:\", data);\n  };\n\n  return (\n    <div style={{ width: \"100%\", maxWidth: \"400px\" }}>\n      {/* This widget likely handles internal state, rate fetching, and token selection */}\n      <ConvertFormWidget \n        fromToken=\"USDC\" \n        toToken=\"USDT\"\n        onConvertSuccess={handleSuccess}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Wraps the logic and UI into a single drop-in component.",
            "May require specific context providers (like WalletProvider) to function correctly."
          ],
          "related": ["ConvertFormUI", "ConvertAction", "DepositProvider"]
        },
        {
          "name": "DepositStatus",
          "description": "A visual indicator component that shows the current state of a deposit transaction (e.g., Pending, Success, Failed). It provides feedback to the user after they initiate a transfer.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Display this immediately after a user triggers a deposit to keep them informed about the transaction progress.",
          "example": "import React from \"react\";\nimport { DepositStatus } from \"@orderly.network/ui-transfer\";\n\nexport const DepositStatusExample = () => {\n  return (\n    <div>\n      {/* Displaying a success status */}\n      <DepositStatus \n        status=\"success\" \n        txHash=\"0x123...abc\" \n        amount={100} \n        symbol=\"USDC\" \n      />\n      \n      {/* Displaying a pending status */}\n      <DepositStatus \n        status=\"pending\" \n        amount={50} \n        symbol=\"ETH\" \n      />\n    </div>\n  );\n};",
          "notes": [
            "Props usually include status enums, transaction hash for block explorer links, and amount details.",
            "Useful for inline feedback or modal confirmations."
          ],
          "related": ["DepositStatusWidget", "ConvertAction", "TransactionHistory"]
        },
        {
          "name": "DepositStatusWidget",
          "description": "A more advanced version of DepositStatus that includes interactive elements, such as a button to navigate to the portfolio or view transaction details. It aggregates status information with user actions.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Ideal for a dashboard or dedicated transfer page where the user needs to take the next step after a deposit.",
          "example": "import React from \"react\";\nimport { DepositStatusWidget } from \"@orderly.network/ui-transfer\";\n\nexport const DepositStatusWidgetExample = () => {\n  const navigateToPortfolio = () => {\n    console.log(\"Navigating to portfolio page...\");\n    // router.push('/portfolio');\n  };\n\n  return (\n    <DepositStatusWidget\n      className=\"custom-status-class\"\n      onClick={navigateToPortfolio}\n    />\n  );\n};",
          "notes": [
            "Includes an onClick handler to facilitate navigation to detailed views.",
            "Often used in conjunction with a broader transfer flow."
          ],
          "related": ["DepositStatus", "CollateralRatioWidget", "PortfolioSummary"]
        },
        {
          "name": "MinimumReceived",
          "description": "A small informational component that displays the minimum amount of tokens a user will receive after a conversion, accounting for price impact and slippage.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Place this near the 'Convert' or 'Swap' button to ensure transparency regarding transaction output.",
          "example": "import React from \"react\";\nimport { MinimumReceived } from \"@orderly.network/ui-transfer\";\n\nexport const MinimumReceivedExample = () => {\n  // Calculated based on slippage tolerance\n  const estimatedAmount = 99.5;\n  const targetToken = { symbol: \"USDT\", precision: 6 };\n\n  return (\n    <div style={{ fontSize: \"12px\", color: \"#666\" }}>\n      <MinimumReceived\n        value={estimatedAmount}\n        symbol={targetToken.symbol}\n        precision={targetToken.precision}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Requires the target token's precision to format the number correctly.",
            "Helps comply with DeFi best practices for displaying slippage."
          ],
          "related": ["ConvertAction", "ConvertFormUI", "PriceImpact"]
        },
        {
          "name": "DepositProvider",
          "description": "A React Context Provider that supplies deposit-related state and logic (like transaction history, current deposit status, and token allowances) to its child components.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "Wrap your application or specific transfer routes with this provider to enable data fetching and state management for deposit components.",
          "example": "import React from \"react\";\nimport { DepositProvider, DepositStatusWidget } from \"@orderly.network/ui-transfer\";\n\nconst AppContent = () => {\n  return (\n    <div>\n      <h1>My Wallet</h1>\n      {/* Child components can now access deposit context */}\n      <DepositStatusWidget />\n    </div>\n  );\n};\n\nexport const DepositProviderExample = () => {\n  return (\n    <DepositProvider>\n      <AppContent />\n    </DepositProvider>\n  );\n};",
          "notes": [
            "Must be placed higher in the component tree than any components consuming the context.",
            "Essential for the internal workings of Widgets like DepositStatusWidget."
          ],
          "related": ["DepositStatusWidget", "ConvertFormWidget", "WalletProvider"]
        },
        {
          "name": "TokenOption",
          "description": "A selectable component that displays token information (icon, symbol) and handles balance fetching. It is typically used within dropdowns or lists for selecting source/destination tokens.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "npm install @orderly.network/ui-transfer",
          "example": "import React from \"react\";\nimport { TokenOption } from \"@orderly.network/ui-transfer\";\n\nconst MyTokenList = () => {\n  // Mock token data structure\n  const token = {\n    symbol: \"USDC\",\n    address: \"0x...\",\n    decimals: 6,\n    logoURI: \"https://.../usdc.png\"\n  };\n\n  const handleFetchBalance = async (tokenAddress: string) => {\n    console.log(`Fetching balance for ${tokenAddress}`);\n    // Implementation to fetch balance from SDK or API\n    return \"100.00\";\n  };\n\n  return (\n    <div className=\"token-list\">\n      <TokenOption\n        token={token}\n        isActive={false}\n        displayType=\"list\" // or 'icon' depending on layout needs\n        fetchBalance={handleFetchBalance}\n        onClick={() => console.log(\"Token selected\")}\n      />\n    </div>\n  );\n};\n\nexport default MyTokenList;",
          "notes": [
            "The `displayType` prop controls whether the component shows a full list item or a compact icon view.",
            "The `fetchBalance` prop is an async function used to update the displayed balance when the component mounts or refreshes.",
            "Ensure the `token` object follows the standard Orderly token structure (symbol, address, decimals)."
          ],
          "related": ["TokenSelect", "QuantityInput", "useTokenBalance"]
        },
        {
          "name": "SwapDepositProvider",
          "description": "A Context Provider that manages the global state for swapping and depositing tokens. It wraps the application or specific sections to provide data like quotes, token pairs, and transaction status to child components.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "npm install @orderly.network/ui-transfer",
          "example": "import React from \"react\";\nimport { SwapDepositProvider, SwapForm } from \"@orderly.network/ui-transfer\";\n\nconst App = () => {\n  return (\n    <SwapDepositProvider>\n      {/* The provider enables the Swap/Deposit context for all children */}\n      <div className=\"trading-interface\">\n        <SwapForm />\n      </div>\n    </SwapDepositProvider>\n  );\n};\n\nexport default App;",
          "notes": [
            "This component does not render any UI itself; it acts as a state container.",
            "Must be an ancestor of any component consuming the swap/deposit context (like `SwapForm` or `SwapIndicator`).",
            "It typically initializes the connection to the Orderly network for transfer operations."
          ],
          "related": ["SwapForm", "DepositForm", "useSwapContext"]
        },
        {
          "name": "SwapIndicator",
          "description": "A visual component that indicates the direction of a swap between two tokens. It typically renders an arrow or an icon showing the conversion from the source token to the target token.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "npm install @orderly.network/ui-transfer",
          "example": "import React from \"react\";\nimport { SwapIndicator } from \"@orderly.network/ui-transfer\";\n\nconst SwapVisual = () => {\n  return (\n    <div className=\"flex items-center justify-center gap-2\">\n      <SwapIndicator \n        sourceToken=\"USDC\" \n        targetToken=\"ETH\" \n        className=\"text-gray-400 hover:text-white transition-colors\"\n      />\n    </div>\n  );\n};\n\nexport default SwapVisual;",
          "notes": [
            "Useful for placing between 'From' and 'To' input fields in a swap interface.",
            "The `className` prop allows for custom styling of the icon (e.g., rotation, color).",
            "It is a presentational component and does not handle swap logic itself."
          ],
          "related": ["SwapForm", "TokenInput", "TokenOption"]
        },
        {
          "name": "WithdrawForm",
          "description": "A comprehensive form component that handles the logic and UI for withdrawing funds from the Orderly network to an external wallet or another chain.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "npm install @orderly.network/ui-transfer",
          "example": "import React from \"react\";\nimport { WithdrawForm } from \"@orderly.network/ui-transfer\";\n\nconst WithdrawPage = () => {\n  const handleSuccess = (txHash: string) => {\n    console.log(\"Withdrawal successful:\", txHash);\n    // Redirect or show success message\n  };\n\n  return (\n    <div className=\"withdraw-container\">\n      <WithdrawForm \n        token={{\n          symbol: \"USDT\",\n          address: \"0x...\",\n          decimals: 6\n        }} \n        onSuccess={handleSuccess}\n        // Additional props like network or default address might be available\n      />\n    </div>\n  );\n};\n\nexport default WithdrawPage;",
          "notes": [
            "Encapsulates input validation, amount calculation, and transaction submission.",
            "The `onSuccess` callback is triggered after the withdrawal transaction is confirmed.",
            "Often used in conjunction with `WithdrawWarningMessage` to display user alerts."
          ],
          "related": ["WithdrawWarningMessage", "DepositForm", "useWithdraw"]
        },
        {
          "name": "WithdrawWarningMessage",
          "description": "A conditional alert component that displays specific warnings based on the withdrawal parameters, such as bridgeless transfers, cross-chain fees, or amount limits.",
          "installation": "npm install @orderly.network/ui-transfer",
          "usage": "npm install @orderly.network/ui-transfer",
          "example": "import React from \"react\";\nimport { WithdrawWarningMessage } from \"@orderly.network/ui-transfer\";\n\nconst WithdrawAlerts = () => {\n  return (\n    <WithdrawWarningMessage \n      // Simulating conditions where warnings are needed\n      checkIsBridgeless={true} \n      crossChainTrans={true}\n      qtyGreaterThanThreshold={false}\n      className=\"mb-4\"\n    />\n  );\n};\n\nexport default WithdrawAlerts;",
          "notes": [
            "Helps users understand risks or requirements (e.g., 'Cross-chain transfer fees apply').",
            "Props like `checkIsBridgeless` and `crossChainTrans` toggle specific warning messages.",
            "Best placed directly above or below the `WithdrawForm` input fields."
          ],
          "related": ["WithdrawForm", "useWithdraw", "Alert"]
        }
      ]
    },
    {
      "name": "Charts & Visualization",
      "patterns": [
        {
          "name": "OrderlyCandlestickChart",
          "description": "A comprehensive pattern for integrating TradingView's lightweight-charts library with the Orderly Network API. This pattern enables the visualization of historical market data (OHLCV) as interactive candlestick charts, handling data transformation from Orderly's specific kline format to the charting library's requirements, while ensuring responsive resizing and efficient updates.",
          "installation": "npm install lightweight-charts use-resize-observer axios",
          "usage": {
            "whenToUse": "Use this pattern when building a trading interface, market analysis dashboard, or any component requiring visual representation of price action over time for Orderly Network assets.",
            "prerequisites": "A React environment, an Orderly Network API endpoint (public or private), and a container element with defined dimensions.",
            "integrationSteps": [
              "Create a container ref to hold the chart DOM element.",
              "Initialize the chart instance using createChart within a useEffect hook.",
              "Use useResizeObserver to monitor the container dimensions and apply them to the chart.",
              "Fetch historical data from the Orderly /v1/public/tv/history endpoint.",
              "Transform the response data mapping 't', 'o', 'h', 'l', 'c' to 'time', 'open', 'high', 'low', 'close'.",
              "Set the data to the candlestick series using setData()."
            ],
            "configurationOptions": {
              "layout": "Configure background color and text color for theme consistency.",
              "timeScale": "Enable timeVisible and secondsVisible for granular axis control.",
              "rightPriceScale": "Adjust border color and scale margins.",
              "crosshair": "Configure mode and visual styles for price tracking."
            }
          },
          "example": "import React, { useEffect, useRef, useState } from 'react';\nimport { createChart, ColorType, UTCTimestamp } from 'lightweight-charts';\nimport { useResizeObserver } from 'use-resize-observer';\nimport axios from 'axios';\n\ninterface OrderlyKline {\n  t: number; // Timestamp\n  o: number; // Open\n  h: number; // High\n  l: number; // Low\n  c: number; // Close\n  v: number; // Volume\n}\n\ninterface OrderlyChartProps {\n  symbol: string;\n  apiKey?: string;\n}\n\nexport const OrderlyChart: React.FC<OrderlyChartProps> = ({ symbol, apiKey }) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const chartInstanceRef = useRef<any>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  // Handle responsive resizing\n  const { ref: resizeRef, width, height } = useResizeObserver<HTMLDivElement>();\n  // Combine refs to observe the container\n  useEffect(() => {\n    if (containerRef.current) {\n      resizeRef(containerRef.current);\n    }\n  }, [resizeRef]);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    // 1. Initialize Chart\n    const chart = createChart(containerRef.current, {\n      layout: {\n        background: { type: ColorType.Solid, color: '#131722' },\n        textColor: '#d1d4dc',\n      },\n      grid: {\n        vertLines: { color: 'rgba(42, 46, 57, 0)' },\n        horzLines: { color: 'rgba(42, 46, 57, 0.6)' },\n      },\n      width: width || containerRef.current.clientWidth,\n      height: height || containerRef.current.clientHeight,\n      timeScale: {\n        timeVisible: true,\n        secondsVisible: false,\n      },\n      rightPriceScale: {\n        borderColor: 'rgba(197, 203, 206, 0.8)',\n      },\n    });\n\n    const candleSeries = chart.addCandlestickSeries({\n      upColor: '#26a69a',\n      downColor: '#ef5350',\n      borderVisible: false,\n      wickUpColor: '#26a69a',\n      wickDownColor: '#ef5350',\n    });\n\n    chartInstanceRef.current = { chart, series: candleSeries };\n\n    // 2. Fetch and Transform Data\n    const fetchData = async () => {\n      try {\n        setError(null);\n        // Orderly Public TV History Endpoint\n        const endpoint = `https://api.orderly.network/v1/public/tv/history?symbol=${symbol}&interval=1`;\n        const headers = apiKey ? { 'Orderly-Access-Key': apiKey } : {};\n        \n        const response = await axios.get(endpoint, { headers });\n        \n        if (response.data && response.data.success) {\n          const klines: OrderlyKline[] = response.data.data;\n          \n          // Transform Orderly format to Lightweight Charts format\n          const candleData = klines.map((k) => ({\n            time: (k.t / 1000) as UTCTimestamp, // Convert ms to seconds if necessary\n            open: Number(k.o),\n            high: Number(k.h),\n            low: Number(k.l),\n            close: Number(k.c),\n          }));\n\n          candleSeries.setData(candleData);\n        }\n      } catch (err) {\n        console.error('Failed to fetch chart data:', err);\n        setError('Failed to load market data.');\n      }\n    };\n\n    fetchData();\n\n    // 3. Cleanup\n    return () => {\n      chart.remove();\n      chartInstanceRef.current = null;\n    };\n  }, [symbol, apiKey]); // Re-run if symbol changes\n\n  // 4. Handle Resize Effect\n  useEffect(() => {\n    if (chartInstanceRef.current && width && height) {\n      chartInstanceRef.current.chart.applyOptions({ width, height });\n    }\n  }, [width, height]);\n\n  return (\n    <div className=\"chart-container\">\n      {error && <div className=\"error-message\">{error}</div>}\n      <div ref={containerRef} style={{ width: '100%', height: '100%', minHeight: '400px' }} />\n    </div>\n  );\n};",
          "notes": [
            "Timestamp Handling: Orderly timestamps are often in milliseconds. Lightweight-charts expects seconds for UTCTimestamp. Ensure you divide by 1000 if the API returns ms.",
            "Memory Leaks: Always call chart.remove() in the useEffect cleanup function to prevent memory leaks when the component unmounts.",
            "Performance: For large datasets, avoid fetching the entire history on every render. Implement pagination or limit the initial fetch range.",
            "Real-time Updates: This pattern handles historical data. For real-time updates, subscribe to Orderly WebSocket trades and use candleSeries.update() to append new ticks.",
            "Resize Observer: Using use-resize-observer is more performant than window.addEventListener('resize') as it handles CSS layout changes (like flexbox resizing) correctly."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React Hooks (useEffect, useRef)",
            "TypeScript basics",
            "Understanding of OHLCV (Open, High, Low, Close, Volume) data structures",
            "REST API consumption"
          ],
          "related": ["OrderlyWebSocketStream", "OrderlyOrderBook", "ReactResponsiveLayout"]
        },
        {
          "name": "TradingViewWidgetIntegration",
          "description": "Integrates the professional TradingView Advanced Charting Library into an Orderly Network DEX using the @orderly.network/ui-tradingview wrapper. This pattern enables high-performance technical analysis, custom theming to match the application's design system, and dynamic symbol switching synchronized with the Orderly state.",
          "installation": "npm install @orderly.network/ui-tradingview",
          "usage": {
            "whenToUse": "Use this pattern when building the primary trading interface of your DEX where users need to perform technical analysis, view historical price data, and draw indicators on charts.",
            "prerequisites": [
              "A React application environment",
              "Access to the TradingView Charting Library files (usually requires a license or download from TradingView)",
              "An active Orderly Network symbol context or state"
            ],
            "integrationSteps": [
              "Download the TradingView charting_library folder and place it in your project's public directory (e.g., /public/tradingview).",
              "Import the TradingviewWidget component from @orderly.network/ui-tradingview.",
              "Create a container component with defined height (TradingView requires explicit height).",
              "Pass the current trading pair symbol to the 'symbol' prop.",
              "Configure the 'libraryPath' to point to your hosted charting_library bundle.",
              "Apply 'overrides' to customize colors (candles, background, grid) to match your dark/light mode."
            ],
            "configurationOptions": {
              "symbol": "The trading pair string (e.g., 'BTC-USD' or 'PERP_BTC_USDC'). Must match the format expected by your datafeed.",
              "libraryPath": "String path to the charting_library/bundles folder on your server or CDN.",
              "overrides": "Object containing TradingView charting properties to customize appearance (colors, fonts, styles).",
              "interval": "Default timeframe for the chart (e.g., '15', '60', 'D').",
              "theme": "Base theme ('Light' or 'Dark'), though specific overrides usually take precedence.",
              "locale": "Language setting for the widget interface."
            }
          },
          "example": "import React, { useMemo } from 'react';\nimport { TradingviewWidget } from '@orderly.network/ui-tradingview';\n\n// Define overrides outside the component to prevent unnecessary re-renders\nconst CHART_OVERRIDES = {\n  'mainSeriesProperties.candleStyle.upColor': '#1F8040',\n  'mainSeriesProperties.candleStyle.downColor': '#DC2140',\n  'mainSeriesProperties.candleStyle.borderUpColor': '#1F8040',\n  'mainSeriesProperties.candleStyle.borderDownColor': '#DC2140',\n  'mainSeriesProperties.candleStyle.wickUpColor': '#1F8040',\n  'mainSeriesProperties.candleStyle.wickDownColor': '#DC2140',\n  'paneProperties.background': '#101418',\n  'paneProperties.vertGridProperties.color': '#1E2329',\n  'paneProperties.horzGridProperties.color': '#1E2329',\n  'scalesProperties.textColor': '#848E9C',\n};\n\ninterface TradingChartProps {\n  symbol: string;\n}\n\n/**\n * TradingChart Component\n * Wraps the Orderly TradingView widget with error boundaries and responsive sizing.\n */\nexport const TradingChart: React.FC<TradingChartProps> = ({ symbol }) => {\n  // Ensure symbol is valid to prevent widget crash\n  const safeSymbol = useMemo(() => {\n    return symbol && symbol.length > 0 ? symbol : 'BTC-USD';\n  }, [symbol]);\n\n  // Configuration for the widget\n  const widgetConfig = {\n    symbol: safeSymbol,\n    interval: '15' as const,\n    libraryPath: '/tradingview/charting_library/bundles', // Ensure this folder exists in 'public'\n    overrides: CHART_OVERRIDES,\n    // Custom settings to improve UX\n    autosize: true,\n    studies_overrides: {},\n    toolbar_bg: '#101418',\n    enabled_features: ['study_templates'],\n  };\n\n  return (\n    <div className=\"tradingview-container\" style={{ height: '100%', width: '100%', minHeight: '500px' }}>\n      <TradingviewWidget {...widgetConfig} />\n    </div>\n  );\n};\n\n// Usage in a parent component:\n// <TradingChart symbol={orderlyState.symbol} />",
          "notes": [
            "Common Issue: 'Charting Library not found'. Ensure the 'libraryPath' prop correctly points to the 'bundles' directory within your hosted 'charting_library' folder. The SDK does not bundle the library itself due to licensing.",
            "Performance: The TradingView library is heavy. Avoid unmounting and remounting this component frequently (e.g., during tab switches) to prevent memory leaks and reload delays. Use CSS 'display: none' instead of conditional rendering if hiding the chart.",
            "Security: Do not expose sensitive API keys in the client-side overrides or datafeed configuration if using custom datafeeds.",
            "Testing: Mock the @orderly.network/ui-tradingview module in unit tests, as the actual widget attempts to load external scripts and manipulate the DOM heavily.",
            "Alternative: For lighter weight needs, consider using the Lightweight Charts library directly, though it offers fewer built-in indicators than the full TradingView widget."
          ],
          "difficulty": "beginner",
          "prerequisites": [
            "React Functional Components",
            "Orderly Symbol State Management",
            "Static Asset Hosting (public folder)"
          ],
          "related": ["OrderlySymbolProvider", "OrderlyMarketData", "useOrderlyContext"]
        },
        {
          "name": "RealTimeKlineWebSocketSubscription",
          "description": "This pattern establishes a robust mechanism for consuming real-time candlestick (Kline) data from the Orderly Network via WebSocket. It is designed to integrate seamlessly with financial charting libraries (like TradingView Lightweight Charts) by handling connection management, topic subscription, data normalization, and automatic cleanup to prevent memory leaks and duplicate subscriptions.",
          "installation": "npm install @orderly.network/net @orderly.network/types",
          "usage": {
            "when_to_use": "Use this pattern when building a trading interface that requires live-updating price charts, technical analysis tools, or real-time market depth visualization.",
            "prerequisites": "A running Orderly Network WebSocket client instance, a React (or similar) frontend framework, and a charting library capable of handling data updates.",
            "integration_steps": [
              "Initialize the Orderly WebSocket client using a singleton pattern to ensure a single connection per application.",
              "Create a mapping utility to convert standard charting resolutions (e.g., '1', '5', '60') into Orderly-specific timeframe strings (e.g., '1m', '5m', '1h').",
              "Implement a subscription hook or service that accepts a symbol and timeframe.",
              "In the subscription handler, parse the incoming payload and transform it into the format expected by your charting library.",
              "Ensure the unsubscribe function returned by the SDK is called in the cleanup phase of your component lifecycle."
            ],
            "configuration_options": {
              "symbol": "The trading pair symbol (e.g., 'PERP_BTC_USDC').",
              "timeframe": "The granularity of the candlestick (e.g., '1m', '5m', '1h', '1d').",
              "onMessage": "Callback function to handle incoming data updates.",
              "onError": "Callback function to handle connection or subscription errors."
            }
          },
          "example": "import { useEffect, useRef, useCallback } from 'react';\nimport { OrderlyWS } from '@orderly.network/net';\n\n// Singleton instance for WebSocket connection\nlet wsInstance: OrderlyWS | null = null;\n\nconst getWSInstance = () => {\n  if (!wsInstance) {\n    wsInstance = new OrderlyWS();\n  }\n  return wsInstance;\n};\n\n/**\n * Maps TradingView resolutions to Orderly timeframes\n */\nconst mapResolutionToTimeframe = (resolution: string): string => {\n  if (['1', '3', '5', '15', '30', '60', '120', '240', '360', '720'].includes(resolution)) {\n    return `${resolution}m`;\n  }\n  if (['D', '1D'].includes(resolution)) return '1d';\n  if (['W', '1W'].includes(resolution)) return '1w';\n  return '1m'; // Default fallback\n};\n\ninterface UseKlineSubscriptionProps {\n  symbol: string;\n  resolution: string;\n  onData: (data: KlineData) => void;\n}\n\ninterface KlineData {\n  time: number;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  volume: number;\n}\n\n/**\n * Custom hook to manage Orderly Kline subscriptions\n */\nexport const useOrderlyKline = ({ symbol, resolution, onData }: UseKlineSubscriptionProps) => {\n  const unsubscribeRef = useRef<(() => void) | null>(null);\n  const timeframe = mapResolutionToTimeframe(resolution);\n\n  const handleData = useCallback((data: any) => {\n    try {\n      // Validate data structure before processing\n      if (!data || typeof data !== 'object') return;\n\n      const { open, close, high, low, volume, startTime } = data;\n\n      // Normalize data for charting libraries (ensure numbers)\n      const klineData: KlineData = {\n        time: startTime,\n        open: Number(open),\n        high: Number(high),\n        low: Number(low),\n        close: Number(close),\n        volume: Number(volume),\n      };\n\n      onData(klineData);\n    } catch (error) {\n      console.error('Error parsing Kline data:', error);\n    }\n  }, [onData]);\n\n  useEffect(() => {\n    const ws = getWSInstance();\n    const topic = `${symbol}@kline_${timeframe}`;\n\n    // Check if already subscribed to avoid duplicates\n    // (Implementation depends on specific SDK capabilities, usually handled internally)\n\n    try {\n      const unsub = ws.subscribe(\n        {\n          event: 'subscribe',\n          topic: topic,\n          id: topic, // Unique ID for the subscription\n          ts: new Date().getTime()\n        },\n        {\n          onMessage: handleData,\n          onError: (err) => console.error(`WebSocket Error on ${topic}:`, err)\n        }\n      );\n\n      unsubscribeRef.current = unsub;\n    } catch (error) {\n      console.error('Failed to subscribe to Kline feed:', error);\n    }\n\n    // Cleanup function: Unsubscribe when component unmounts or dependencies change\n    return () => {\n      if (unsubscribeRef.current) {\n        unsubscribeRef.current();\n        unsubscribeRef.current = null;\n      }\n    };\n  }, [symbol, timeframe, handleData]);\n};",
          "notes": [
            "Connection Stability: The WebSocket connection should be initialized once (Singleton). Re-creating connections on every re-render will cause performance degradation and potential bans from the server.",
            "Data Gaps: WebSocket streams can sometimes drop packets. It is best practice to implement a 'snapshot' request via REST API upon initial subscription to fill historical data before switching to real-time updates.",
            "Throttling: If the charting library lags, consider wrapping the `onData` callback in a requestAnimationFrame loop or a throttle function to prevent UI freezing during high-volatility periods.",
            "Authentication: While public market data (Klines) often does not require authentication, ensure your WebSocket client handles authentication if you plan to subscribe to private topics (account updates) simultaneously.",
            "Timezones: Ensure `startTime` from the server is handled correctly in your frontend's timezone. Orderly typically uses Unix timestamps in milliseconds."
          ],
          "difficulty": "advanced",
          "prerequisites": [
            "Understanding of WebSocket lifecycle (Open, Message, Close, Error)",
            "React Hooks (useEffect, useRef, useCallback)",
            "Data normalization for financial charting libraries",
            "Singleton design pattern"
          ],
          "related": [
            "OrderBookWebSocketSubscription",
            "TradeHistoryStream",
            "AccountBalanceUpdates"
          ]
        }
      ]
    },
    {
      "name": "Trading Interface",
      "patterns": [
        {
          "name": "RealTimeOrderbookDisplay",
          "description": "A comprehensive pattern for implementing a high-performance, real-time orderbook interface on Orderly Network. This pattern handles WebSocket data ingestion via useOrderbookStream, calculates market depth visualization using CSS gradients, and ensures precise decimal formatting based on symbol-specific tick sizes.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types decimal.js",
          "usage": {
            "whenToUse": "Implement this pattern when building a central trading interface, market depth analysis tool, or liquidity visualization dashboard where traders need to see live bid/ask spreads and volume distribution.",
            "prerequisites": [
              "React functional components environment",
              "Orderly Network SDK context provider configured in the app root",
              "Basic understanding of WebSocket data streams and decimal precision"
            ],
            "integrationSteps": [
              "Import useOrderbookStream and useSymbolsInfo from @orderly.network/hooks",
              "Initialize the stream hook with the target trading pair symbol and desired depth level",
              "Fetch symbol metadata to determine tick size and quantity step for formatting",
              "Create a row component to render individual price levels with calculated depth bars",
              "Implement aggregation logic to merge price levels if necessary (though the hook often handles raw levels)",
              "Apply CSS gradients where width is calculated as (level_volume / max_volume) * 100"
            ],
            "configurationOptions": {
              "symbol": "The trading pair identifier (e.g., 'PERP_ETH_USDC')",
              "level": "Depth of the orderbook (e.g., 10, 20, 100). Higher levels consume more memory.",
              "interval": "Throttle interval for updates if the stream is too fast (optional)"
            }
          },
          "example": "import React, { useMemo, memo } from 'react';\nimport { useOrderbookStream, useSymbolsInfo } from '@orderly.network/hooks';\nimport { Decimal } from 'decimal.js';\n\n// Utility to determine decimals from tick size\nconst getDecimalsFromTick = (tickSize: number | string) => {\n  if (!tickSize) return 2;\n  const str = tickSize.toString();\n  if (str.includes('.')) {\n    return str.split('.')[1].length;\n  }\n  return 0;\n};\n\n// Individual Row Component with Depth Visualization\nconst OrderbookRow = memo(({ \n  type, \n  price, \n  size, \n  total, \n  maxTotal, \n  priceDecimals, \n  sizeDecimals \n}: { \n  type: 'bid' | 'ask'; \n  price: number; \n  size: number; \n  total: number; \n  maxTotal: number; \n  priceDecimals: number; \n  sizeDecimals: number; \n}) => {\n  const isAsk = type === 'ask';\n  const depthPercentage = (total / maxTotal) * 100;\n  \n  // Color coding: Red for Asks (Sell), Green for Bids (Buy)\n  const color = isAsk ? 'rgba(239, 68, 68, 0.15)' : 'rgba(34, 197, 94, 0.15)';\n  const textColor = isAsk ? 'text-red-500' : 'text-green-500';\n  \n  return (\n    <div className=\"flex justify-between items-center text-xs py-1 relative hover:bg-gray-800\">\n      {/* Depth Visualization Background */}\n      <div \n        className=\"absolute top-0 bottom-0 pointer-events-none\"\n        style={{\n          width: `${depthPercentage}%`,\n          background: color,\n          right: isAsk ? 0 : 'auto', // Asks align right, Bids align left\n          left: isAsk ? 'auto' : 0\n        }}\n      />\n      \n      {/* Price */}\n      <div className={`w-1/3 text-right z-10 font-mono ${textColor}`}>\n        {price.toFixed(priceDecimals)}\n      </div>\n      \n      {/* Size */}\n      <div className=\"w-1/3 text-right z-10 font-mono text-gray-300\">\n        {size.toFixed(sizeDecimals)}\n      </div>\n      \n      {/* Total */}\n      <div className=\"w-1/3 text-right z-10 font-mono text-gray-400\">\n        {total.toFixed(sizeDecimals)}\n      </div>\n    </div>\n  );\n});\n\nOrderbookRow.displayName = 'OrderbookRow';\n\nexport const RealTimeOrderbook = ({ symbol }: { symbol: string }) => {\n  // 1. Fetch real-time data\n  const [data, { isLoading, error }] = useOrderbookStream(symbol, undefined, { level: 20 });\n  const symbolsInfo = useSymbolsInfo();\n  \n  // 2. Get Symbol Info for formatting\n  const symbolInfo = symbolsInfo[symbol]();\n  \n  // Fallback decimals if symbol info is loading\n  const priceDecimals = useMemo(() => {\n    return symbolInfo ? getDecimalsFromTick(symbolInfo.tick_size) : 2;\n  }, [symbolInfo]);\n  \n  const sizeDecimals = useMemo(() => {\n    return symbolInfo ? getDecimalsFromTick(symbolInfo.quantity_step) : 4;\n  }, [symbolInfo]);\n\n  // 3. Processing Data for Visualization\n  const { asks, bids, maxTotal } = useMemo(() => {\n    if (!data || !data.asks || !data.bids) return { asks: [], bids: [], maxTotal: 0 };\n\n    // Process Asks (Sells) - usually displayed top to bottom (High Price -> Low Price)\n    // We slice and reverse to show lowest ask at the bottom near the spread\n    const rawAsks = data.asks.slice(0, 10).reverse();\n    const processedAsks = rawAsks.map((level, index) => {\n      const price = Number(level[0]);\n      const size = Number(level[1]);\n      // Calculate cumulative total (sum of sizes from current level to the edge)\n      const total = rawAsks.slice(0, index + 1).reduce((acc, curr) => acc + Number(curr[1]), 0);\n      return { price, size, total };\n    });\n\n    // Process Bids (Buys) - displayed bottom to top (High Price -> Low Price)\n    const rawBids = data.bids.slice(0, 10);\n    const processedBids = rawBids.map((level, index) => {\n      const price = Number(level[0]);\n      const size = Number(level[1]);\n      const total = rawBids.slice(0, index + 1).reduce((acc, curr) => acc + Number(curr[1]), 0);\n      return { price, size, total };\n    });\n\n    // Find max volume for scaling the gradient bars\n    const maxAskTotal = processedAsks[processedAsks.length - 1]?.total || 0;\n    const maxBidTotal = processedBids[processedBids.length - 1]?.total || 0;\n    const maxTotal = Math.max(maxAskTotal, maxBidTotal);\n\n    return { asks: processedAsks, bids: processedBids, maxTotal };\n  }, [data]);\n\n  // 4. Render States\n  if (isLoading) return <div className=\"p-4 text-gray-500\">Loading orderbook...</div>;\n  if (error) return <div className=\"p-4 text-red-500\">Error loading orderbook</div>;\n  if (!symbolInfo) return <div className=\"p-4 text-gray-500\">Symbol info not found</div>;\n\n  return (\n    <div className=\"w-full bg-gray-900 border border-gray-800 rounded-lg overflow-hidden flex flex-col h-full\">\n      {/* Header */}\n      <div className=\"flex justify-between px-2 py-2 bg-gray-800 text-xs text-gray-400 font-bold uppercase\">\n        <div className=\"w-1/3 text-right\">Price</div>\n        <div className=\"w-1/3 text-right\">Size</div>\n        <div className=\"w-1/3 text-right\">Total</div>\n      </div>\n\n      {/* Asks Section */}\n      <div className=\"flex-1 overflow-hidden flex flex-col justify-end\">\n        {asks.map((level, i) => (\n          <OrderbookRow \n            key={`ask-${level.price}-${i}`} \n            type=\"ask\" \n            {...level} \n            maxTotal={maxTotal}\n            priceDecimals={priceDecimals}\n            sizeDecimals={sizeDecimals}\n          />\n        ))}\n      </div>\n\n      {/* Spread / Current Price Indicator */}\n      <div className=\"py-2 text-center text-sm font-bold text-gray-200 bg-gray-800/50 border-y border-gray-700\">\n        Spread: {asks[asks.length-1] && bids[0] ? \n          new Decimal(asks[asks.length-1].price).minus(bids[0].price).toFixed(priceDecimals) \n          : '-'}\n      </div>\n\n      {/* Bids Section */}\n      <div className=\"flex-1 overflow-hidden flex flex-col\">\n        {bids.map((level, i) => (\n          <OrderbookRow \n            key={`bid-${level.price}-${i}`} \n            type=\"bid\" \n            {...level} \n            maxTotal={maxTotal}\n            priceDecimals={priceDecimals}\n            sizeDecimals={sizeDecimals}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Performance Optimization: Orderbook streams update very frequently (milliseconds). Always use React.memo on row components to prevent unnecessary re-renders of the entire list.",
            "Decimal Precision: Never rely on default JavaScript numbers for price calculations. Use the tick_size from symbolInfo to determine formatting, otherwise, you may display prices that the exchange rejects.",
            "Data Aggregation: The 'level' parameter in useOrderbookStream controls how many levels you fetch. Fetching too many levels (e.g., 1000) can cause UI lag. Stick to 10-20 for standard views.",
            "Memory Leaks: Ensure that the useOrderbookStream hook automatically cleans up WebSocket subscriptions when the component unmounts. The official SDK handles this, but be careful if wrapping it in custom effects.",
            "Visual Clarity: When calculating depth (gradient width), ensure you calculate the 'Cumulative Volume' (sum of all sizes behind the current row) rather than just the row's individual size. This creates the 'wall' effect traders expect.",
            "Error Handling: WebSocket connections can drop. Implement a visual indicator (like a red dot or 'Reconnecting...' text) if the stream fails to update for more than a few seconds."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React Hooks (useMemo, useCallback, memo)",
            "CSS Flexbox for layout alignment",
            "Understanding of Orderbook mechanics (Bids vs Asks, Spread)",
            "TypeScript basics"
          ],
          "related": [
            "useOrderbook (Snapshot/REST version)",
            "useTradesStream (Recent trades history)",
            "useMarkPriceStream (Current index price)"
          ]
        },
        {
          "name": "AdvancedOrderEntryForm",
          "description": "A comprehensive, production-ready order entry interface for the Orderly Network. This pattern handles the complexity of trading state management, supporting multiple order types (Market, Limit, Stop, Bracket), real-time calculations for leverage and liquidation prices, and robust input validation using the useOrderEntry hook.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "when_to_use": "Implement this pattern when building the primary trading interface of a decentralized exchange (DEX) where users need to execute trades with precision, view risk metrics in real-time, and switch between different order strategies.",
            "prerequisites": [
              "A connected wallet via Orderly's WalletProvider",
              "An active Orderly account context (useOrderlyAccount)",
              "A selected trading symbol (e.g., 'PERP_ETH_USDC')"
            ],
            "integration_steps": [
              "Import useOrderEntry, OrderSide, and OrderType from @orderly.network/hooks and types.",
              "Initialize the hook with the target trading symbol and default order configuration.",
              "Bind form inputs (Price, Quantity) to the setValue function returned by the hook.",
              "Utilize metaState (errors, dirty, submitted) to provide real-time UI feedback and validation messages.",
              "Display calculated metrics (estLeverage, estLiqPrice) to inform user risk decisions.",
              "Connect the submit function to your 'Place Order' button, handling the returned Promise."
            ],
            "configuration_options": {
              "initialOrder": "Defines the default state for side (BUY/SELL), type (LIMIT/MARKET), price, and quantity.",
              "symbol": "The trading pair identifier (e.g., 'BTC-USDC') which determines price precision and margin requirements."
            }
          },
          "example": "import React, { useState } from 'react';\nimport { useOrderEntry, OrderSide, OrderType } from '@orderly.network/hooks';\nimport { useOrderlyAccount } from '@orderly.network/hooks';\n\nexport const AdvancedOrderEntryForm = ({ symbol }: { symbol: string }) => {\n  const { state: accountState } = useOrderlyAccount();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Initialize the hook with current symbol and default values\n  const {\n    submit,\n    setValue,\n    maxQty,\n    estLeverage,\n    estLiqPrice,\n    formattedOrder,\n    metaState: { errors, dirty, submitted },\n    reset\n  } = useOrderEntry(symbol, {\n    initialOrder: {\n      side: OrderSide.BUY,\n      order_type: OrderType.LIMIT,\n      order_price: '',\n      order_quantity: ''\n    }\n  });\n\n  // Handle input changes with validation feedback\n  const handleInputChange = (field: 'order_price' | 'order_quantity' | 'side' | 'order_type', value: any) => {\n    setValue(field, value);\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!accountState.address) {\n      alert('Please connect wallet first');\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      // The submit function triggers validation and API call\n      const result = await submit();\n      console.log('Order submitted successfully:', result);\n      alert('Order Placed!');\n      reset(); // Reset form after success\n    } catch (err) {\n      console.error('Order submission failed:', err);\n      // Handle specific errors from the hook or network\n      alert(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Helper to determine if input is invalid\n  const hasError = (field: string) => submitted && dirty[field] && errors[field];\n\n  return (\n    <div className=\"order-entry-form p-4 border rounded\">\n      <h3>Place Order ({symbol})</h3>\n      \n      <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\n        {/* Side Toggle */}\n        <div className=\"flex gap-2\">\n          <button\n            type=\"button\"\n            onClick={() => handleInputChange('side', OrderSide.BUY)}\n            className={`flex-1 py-2 ${formattedOrder.side === OrderSide.BUY ? 'bg-green-500 text-white' : 'bg-gray-200'}`}\n          >\n            Long\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleInputChange('side', OrderSide.SELL)}\n            className={`flex-1 py-2 ${formattedOrder.side === OrderSide.SELL ? 'bg-red-500 text-white' : 'bg-gray-200'}`}\n          >\n            Short\n          </button>\n        </div>\n\n        {/* Order Type Selector */}\n        <select\n          value={formattedOrder.order_type}\n          onChange={(e) => handleInputChange('order_type', e.target.value as OrderType)}\n          className=\"p-2 border rounded\"\n        >\n          <option value={OrderType.LIMIT}>Limit</option>\n          <option value={OrderType.MARKET}>Market</option>\n          {/* Additional types like STOP or BRACKET can be added here */}\n        </select>\n\n        {/* Price Input */}\n        {formattedOrder.order_type !== OrderType.MARKET && (\n          <div>\n            <label className=\"block text-sm font-bold mb-1\">Price</label>\n            <input\n              type=\"number\"\n              step=\"0.01\"\n              value={formattedOrder.order_price}\n              onChange={(e) => handleInputChange('order_price', e.target.value)}\n              className={`w-full p-2 border rounded ${hasError('order_price') ? 'border-red-500' : ''}`}\n              placeholder=\"0.00\"\n            />\n            {hasError('order_price') && <span className=\"text-red-500 text-xs\">{errors.order_price}</span>}\n          </div>\n        )}\n\n        {/* Quantity Input */}\n        <div>\n          <label className=\"block text-sm font-bold mb-1\">Quantity (Max: {maxQty})</label>\n          <input\n            type=\"number\"\n            step=\"0.001\"\n            value={formattedOrder.order_quantity}\n            onChange={(e) => handleInputChange('order_quantity', e.target.value)}\n            className={`w-full p-2 border rounded ${hasError('order_quantity') ? 'border-red-500' : ''}`}\n            placeholder=\"0.00\"\n          />\n          {hasError('order_quantity') && <span className=\"text-red-500 text-xs\">{errors.order_quantity}</span>}\n        </div>\n\n        {/* Estimated Metrics */}\n        <div className=\"bg-gray-100 p-2 rounded text-sm\">\n          <div className=\"flex justify-between\">\n            <span>Est. Leverage:</span>\n            <span className=\"font-bold\">{estLeverage}x</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span>Est. Liq. Price:</span>\n            <span className=\"font-bold\">{estLiqPrice || '-'}</span>\n          </div>\n        </div>\n\n        {/* Submit Button */}\n        <button\n          type=\"submit\"\n          disabled={isSubmitting}\n          className={`w-full py-3 text-white font-bold rounded ${\n            formattedOrder.side === OrderSide.BUY ? 'bg-green-600 hover:bg-green-700' : 'bg-red-600 hover:bg-red-700'\n          } ${isSubmitting ? 'opacity-50 cursor-not-allowed' : ''}`}\n        >\n          {isSubmitting ? 'Submitting...' : `${formattedOrder.side} ${formattedOrder.order_type}`}\n        </button>\n      </form>\n    </div>\n  );\n};",
          "notes": [
            "Market Order Handling: When OrderType is MARKET, the price input should be disabled or hidden, as the execution price is determined by the market at the time of the trade.",
            "Validation Feedback: The metaState object provides granular control. Use the 'dirty' flag to show errors only after the user has interacted with a field, rather than showing errors immediately on mount.",
            "Precision Handling: Ensure input 'step' attributes match the symbol's tick size and lot size requirements to avoid server-side rejection due to precision errors.",
            "Debouncing: For high-frequency typing in price/quantity fields, consider debouncing the setValue calls if the hook triggers expensive calculations on every keystroke.",
            "Reset Strategy: Always call reset() after a successful submission to clear the form state and prepare for the next trade.",
            "Error Boundaries: Wrap this component in an Error Boundary, as network requests within submit() can potentially throw unhandled exceptions."
          ],
          "difficulty": "advanced",
          "prerequisites": [
            "React Hooks (useState, useEffect)",
            "Orderly Network Account Context",
            "Understanding of Derivatives Trading (Leverage, Liquidation, Order Types)"
          ],
          "related": ["useOrderlyAccount", "usePositions", "useOpenOrders"]
        }
      ]
    },
    {
      "name": "Position Management",
      "patterns": [
        {
          "name": "RealTimePositionDisplay",
          "description": "A comprehensive pattern for implementing a live trading dashboard that displays open positions with real-time updates. This pattern leverages Orderly Network's WebSocket streams to fetch position data, calculates financial metrics like Unrealized PnL and ROI, and provides UI elements to distinguish between Long and Short positions. It serves as the foundation for portfolio management interfaces.",
          "installation": "npm install @orderly.network/hooks",
          "usage": {
            "whenToUse": "Use this pattern when building a trading dashboard, portfolio overview, or account summary page where users need to monitor their active derivatives positions and profitability in real-time.",
            "prerequisites": [
              "Active Orderly Network account with API keys configured",
              "Wallet connection established via Orderly SDK",
              "Basic understanding of derivative trading concepts (Long/Short, PnL, ROI)"
            ],
            "integrationSteps": [
              "Import `usePositionStream` from `@orderly.network/hooks`.",
              "Initialize the hook, optionally passing a specific `symbol` to filter for a single asset or `undefined` to fetch all positions.",
              "Destructure `positions`, `info`, and `isLoading` from the hook response.",
              "Implement currency formatters (USD/Percent) for consistent data display.",
              "Render the data using a table or grid layout, handling loading and empty states.",
              "Implement logic to determine position side (Long/Short) based on `position_qty` sign."
            ],
            "configurationOptions": {
              "symbol": "Pass a specific trading pair string (e.g., 'PERP_BTC_USDC') to stream only that position. Pass `undefined` to stream all positions for the account.",
              "refetchInterval": "While the hook uses WebSockets by default, configuration can be adjusted for polling fallbacks if necessary."
            }
          },
          "example": "import React, { useMemo } from 'react';\nimport { usePositionStream, Position } from '@orderly.network/hooks';\n\n// Mock UI components for context (replace with your library like Radix, MUI, etc.)\nconst Table = ({ children, headers }: { children: React.ReactNode; headers: string[] }) => (\n  <div className=\"overflow-x-auto\">\n    <table className=\"min-w-full divide-y divide-gray-200\">\n      <thead className=\"bg-gray-50\">\n        <tr>\n          {headers.map((h) => (\n            <th key={h} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">{h}</th>\n          ))}\n        </tr>\n      </thead>\n      <tbody className=\"bg-white divide-y divide-gray-200\">{children}</tbody>\n    </table>\n  </div>\n);\n\nconst Badge = ({ children, color }: { children: React.ReactNode; color: 'green' | 'red' | 'gray' }) => (\n  <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-${color}-100 text-${color}-800`}>\n    {children}\n  </span>\n);\n\nconst Button = ({ onClick, children, disabled }: { onClick: () => void; children: React.ReactNode; disabled?: boolean }) => (\n  <button\n    onClick={onClick}\n    disabled={disabled}\n    className=\"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none disabled:opacity-50\"\n  >\n    {children}\n  </button>\n);\n\nexport const PositionDashboard = () => {\n  // 1. Fetch real-time data. Pass undefined to get all positions, or a symbol string for one.\n  const [positions, _info, { isLoading }] = usePositionStream(undefined);\n\n  // 2. Define formatters (Memoized for performance)\n  const usdFormatter = useMemo(() => new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2\n  }), []);\n\n  const percentFormatter = useMemo(() => new Intl.NumberFormat('en-US', {\n    style: 'percent',\n    minimumFractionDigits: 2\n  }), []);\n\n  // 5. Close Position Logic (Placeholder)\n  const handleClosePosition = async (symbol: string, quantity: number) => {\n    try {\n      console.log(`Closing position: ${symbol}, Qty: ${quantity}`);\n      // Integration with useOrder or usePlaceOrder would go here\n      // Example: placeOrder({ symbol: symbol, side: quantity > 0 ? 'SELL' : 'BUY', order_type: 'MARKET', order_qty: Math.abs(quantity) })\n    } catch (error) {\n      console.error('Failed to close position', error);\n    }\n  };\n\n  if (isLoading) {\n    return <div className=\"p-4 text-center\">Loading positions...</div>;\n  }\n\n  if (!positions || positions.length === 0) {\n    return <div className=\"p-4 text-center text-gray-500\">No open positions found.</div>;\n  }\n\n  return (\n    <div className=\"p-6\">\n      <h2 className=\"text-xl font-bold mb-4\">Open Positions</h2>\n      <Table headers={['Symbol', 'Side', 'Size', 'Avg Open Price', 'Mark Price', 'Unrealized PnL', 'ROI', 'Action']}>\n        {positions.map((position: Position) => {\n          // 2. Determine Side\n          const isLong = position.position_qty > 0;\n          const sideColor = isLong ? 'green' : 'red';\n          const sideLabel = isLong ? 'Long' : 'Short';\n\n          // 4. Calculations (SDK provides these, but we format them here)\n          const pnl = position.unrealized_pnl;\n          const roi = position.unrealized_pnl_ROI;\n          const pnlColor = pnl >= 0 ? 'text-green-600' : 'text-red-600';\n\n          return (\n            <tr key={position.symbol}>\n              <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                {position.symbol}\n              </td>\n              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                <Badge color={sideColor}>{sideLabel}</Badge>\n              </td>\n              {/* 3. Show Quantity and Prices */}\n              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                {Math.abs(position.position_qty).toFixed(4)}\n              </td>\n              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                {usdFormatter.format(position.avg_open_price)}\n              </td>\n              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                {usdFormatter.format(position.mark_price)}\n              </td>\n              {/* 4. PnL and ROI Display */}\n              <td className={`px-6 py-4 whitespace-nowrap text-sm font-medium ${pnlColor}`}>\n                {usdFormatter.format(pnl)}\n              </td>\n              <td className={`px-6 py-4 whitespace-nowrap text-sm font-medium ${pnlColor}`}>\n                {percentFormatter.format(roi)}\n              </td>\n              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                <Button \n                  onClick={() => handleClosePosition(position.symbol, position.position_qty)}\n                >\n                  Close\n                </Button>\n              </td>\n            </tr>\n          );\n        })}\n      </Table>\n    </div>\n  );\n};",
          "notes": [
            "Common Issue: Position quantity is often a number with high precision (e.g., 0.00000001). Always format display values using `.toFixed()` or a number formatter to avoid layout shifts.",
            "Performance: The `usePositionStream` hook updates via WebSocket. Ensure your UI components are optimized (e.g., using `React.memo` on row components) to prevent excessive re-renders if the portfolio is large.",
            "Security: Never trust client-side calculations for final settlement. Always verify PnL and balances against the server state before executing critical actions like withdrawals.",
            "Testing: Mock the `usePositionStream` hook in unit tests to simulate different portfolio states (empty, all long, all short, mixed) without requiring a live WebSocket connection.",
            "Alternative: For static snapshots where real-time updates aren't needed, consider using the REST API endpoint via `usePositions` to reduce socket load."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React Functional Components",
            "Custom Hooks (useState, useEffect, useMemo)",
            "TypeScript basics",
            "Orderly Network Account Setup"
          ],
          "related": ["useOrderStream", "useAccountStream", "usePlaceOrder"]
        }
      ]
    },
    {
      "name": "Wallet Connection",
      "patterns": [
        {
          "name": "MultiChainWalletConnection",
          "description": "A comprehensive pattern for integrating both EVM (Ethereum Virtual Machine) and Solana wallets into a unified Orderly Network application. This pattern abstracts the complexities of different blockchain signature schemes and provider structures, allowing the application to treat wallet connections agnostically through the Orderly SDK's adapter system.",
          "installation": "npm install @orderly.network/core @orderly.network/ethers-adapter @orderly.network/solana-adapter ethers @solana/wallet-adapter-react @solana/wallet-adapter-wallets",
          "usage": {
            "when_to_use": "Use this pattern when your decentralized exchange (DEX) or trading application needs to support users from both the Ethereum ecosystem (e.g., MetaMask, WalletConnect) and the Solana ecosystem (e.g., Phantom, Solflare) within the same interface.",
            "prerequisites": [
              "A React application environment",
              "Environment variables configured for Orderly Broker ID",
              "Basic understanding of EIP-1193 (EVM) and Solana Wallet Adapter standards"
            ],
            "integration_steps": [
              "Wrap your application root with the OrderlyConfigProvider.",
              "Instantiate wallet adapters for EVM (using ethers/viem) and Solana.",
              "Pass the adapters array to the walletAdapters prop.",
              "Dynamically set networkId based on your deployment environment (testnet/mainnet)."
            ],
            "configuration_options": {
              "networkId": "Determines the Orderly environment ('testnet' or 'mainnet'). Ensure this matches the wallet's connected network.",
              "brokerId": "Your unique identifier registered with Orderly Network.",
              "walletAdapters": "An array of adapter instances. The SDK will iterate through these to find an active connection or prompt connection."
            }
          },
          "example": "import React, { createContext, useContext, useState, useEffect } from 'react';\nimport {\n  OrderlyConfigProvider,\n  useAccount,\n  DefaultEVMWalletAdapter,\n  DefaultSolanaWalletAdapter\n} from '@orderly.network/core';\nimport { ethers } from 'ethers';\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { PhantomWalletAdapter } from '@solana/wallet-adapter-wallets';\n\n/**\n * Production-ready Provider Setup\n * Handles environment configuration and adapter initialization\n */\nexport const OrderlyAppProvider = ({ children }: { children: React.ReactNode }) => {\n  // Determine network from environment variables\n  const [networkId, setNetworkId] = useState<'testnet' | 'mainnet'>(\n    import.meta.env.VITE_NETWORK_ID === 'mainnet' ? 'mainnet' : 'testnet'\n  );\n\n  // Initialize EVM Adapter\n  // We check for window.ethereum to ensure we are in a browser environment\n  const evmAdapter = typeof window !== 'undefined' && window.ethereum \n    ? new DefaultEVMWalletAdapter(new ethers.BrowserProvider(window.ethereum)) \n    : null;\n\n  // Initialize Solana Adapter\n  // Note: In a real app, you might pass specific wallets or use the React context\n  const solanaAdapter = new DefaultSolanaWalletAdapter();\n\n  // Filter out null adapters to prevent runtime errors\n  const activeAdapters = [evmAdapter, solanaAdapter].filter(\n    (adapter): adapter is NonNullable<typeof adapter> => adapter !== null\n  );\n\n  return (\n    <OrderlyConfigProvider\n      networkId={networkId}\n      brokerId={import.meta.env.VITE_BROKER_ID}\n      walletAdapters={activeAdapters}\n    >\n      {children}\n    </OrderlyConfigProvider>\n  );\n};\n\n/**\n * Component demonstrating connection handling and state management\n */\nexport const MultiChainWalletButton = () => {\n  const { account, connect, disconnect, state } = useAccount();\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleConnect = async () => {\n    setIsConnecting(true);\n    setError(null);\n    try {\n      // The SDK will attempt to connect using the configured adapters\n      await connect();\n    } catch (err) {\n      console.error('Connection failed:', err);\n      setError('Failed to connect wallet. Please try again.');\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n\n  const handleDisconnect = async () => {\n    try {\n      await disconnect();\n    } catch (err) {\n      console.error('Disconnect failed:', err);\n    }\n  };\n\n  // Render connection state\n  if (state.status === 'connected' && account) {\n    return (\n      <div className=\"wallet-connected\">\n        <div className=\"account-info\">\n          <span className=\"chain-badge\">{account.chainType.toUpperCase()}</span>\n          <span className=\"address\">\n            {account.address.slice(0, 6)}...{account.address.slice(-4)}\n          </span>\n        </div>\n        <button onClick={handleDisconnect} className=\"btn-disconnect\">\n          Disconnect\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"wallet-disconnected\">\n      <button \n        onClick={handleConnect} \n        disabled={isConnecting}\n        className=\"btn-connect\"\n      >\n        {isConnecting ? 'Connecting...' : 'Connect Wallet'}\n      </button>\n      {error && <div className=\"error-message\">{error}</div>}\n    </div>\n  );\n};",
          "notes": [
            "Common Issue: 'User rejected the request'. This is standard wallet behavior. Ensure your UI gracefully handles connection cancellations without crashing.",
            "Network Mismatch: Ensure the user's wallet (e.g., MetaMask) is set to the correct network (Sepolia for Testnet, Arbitrum/Optimism for Mainnet) matching the Orderly SDK networkId.",
            "Solana Context: The DefaultSolanaWalletAdapter often works best when wrapped inside a Solana WalletProvider context from @solana/wallet-adapter-react for full functionality.",
            "Performance: Wallet adapters are initialized once. Avoid recreating the OrderlyConfigProvider on every render to prevent resetting connection state.",
            "Security: Never hardcode private keys. Always rely on the injected providers (window.ethereum or Solana window.solana) to handle signing.",
            "Testing: Use mock providers for unit testing wallet connection logic to avoid requiring actual browser extensions in CI/CD pipelines."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React Context API",
            "EIP-1193 Ethereum Provider Standard",
            "Solana Wallet Adapter Standard",
            "TypeScript"
          ],
          "related": ["useAccount", "OrderlyKeyPair", "OrderlyConfigProvider"]
        }
      ]
    },
    {
      "name": "Chart Components",
      "patterns": [
        {
          "name": "LightweightChart",
          "description": "A responsive candlestick chart component that fetches and visualizes historical kline data from the Orderly Network API using the lightweight-charts library.",
          "installation": "npm install @orderly.network/hooks",
          "usage": "This component requires a trading pair symbol to fetch data. It relies on the Orderly ConfigProvider to resolve the API base URL. Simply import and render it within a layout that allows it to expand (it has a minimum height).\n\n**Required Props:**\n- `symbol`: string (e.g., 'PERP_ETH_USDC')\n\n**Context:**\n- Must be a descendant of `OrderlyConfigProvider` to access `apiBaseUrl`.\n\n**Integration:**\n1. Ensure `lightweight-charts` and `use-resize-observer` are installed.\n2. Wrap your app in `OrderlyConfigProvider`.\n3. Pass the target symbol to the component.",
          "example": "import { useConfig } from '@orderly.network/hooks';\nimport { createChart, type IChartApi, type ISeriesApi, type UTCTimestamp } from 'lightweight-charts';\nimport { FC, useEffect, useRef, useState } from 'react';\nimport useResizeObserver from 'use-resize-observer';\n\n// Orderly API returns columnar data arrays\ntype Klines = {\n  a: number[]; // Ask close price\n  c: number[]; // Close price\n  h: number[]; // High price\n  l: number[]; // Low price\n  o: number[]; // Open price\n  t: number[]; // Timestamp (seconds)\n  v: number[]; // Volume\n};\n\nexport const LightweightChart: FC<{ symbol: string }> = ({ symbol }) => {\n  const [chartData, setChartData] = useState<[IChartApi, ISeriesApi<'Candlestick'>]>();\n  const chartRef = useRef<HTMLDivElement>(null);\n  const { width } = useResizeObserver({ ref: chartRef });\n  const apiBaseUrl = useConfig('apiBaseUrl');\n\n  // 1. Fetch Data from Orderly API\n  useEffect(() => {\n    if (!chartData) return;\n    const [_, candleStickSeries] = chartData;\n    \n    // Calculate time range (e.g., last 7 days)\n    const resolution = '60'; // 1 hour\n    const to = Math.trunc(Date.now() / 1_000);\n    const from = Math.trunc((Date.now() - 1_000 * 60 * 60 * 24 * 7) / 1_000);\n\n    fetch(`${apiBaseUrl}/tv/history?symbol=${symbol}&resolution=${resolution}&from=${from}&to=${to}`)\n      .then((res) => res.json() as Promise<Klines>)\n      .then((klines) => {\n        // 2. Transform Orderly columnar format to Lightweight-charts object format\n        const data = klines.t.map((timestamp, index) => ({\n          time: timestamp as UTCTimestamp,\n          open: klines.o[index],\n          high: klines.h[index],\n          low: klines.l[index],\n          close: klines.c[index],\n        }));\n        \n        candleStickSeries.setData(data);\n      });\n  }, [chartData, apiBaseUrl, symbol]);\n\n  // 3. Initialize and Resize Chart\n  useEffect(() => {\n    if (!chartRef.current || width == null) return;\n    \n    if (!chartData) {\n      const chart = createChart(chartRef.current, {\n        width,\n        height: chartRef.current.clientHeight,\n        layout: { background: { color: '#26272a' }, textColor: '#fff' },\n      });\n      const series = chart.addCandlestickSeries();\n      setChartData([chart, series]);\n    } else {\n      const [chart] = chartData;\n      chart.applyOptions({ width });\n    }\n  }, [chartData, width]);\n\n  return <div className=\"w-full min-h-[35rem]\" ref={chartRef} />;\n};",
          "notes": [
            "The Orderly `/tv/history` endpoint returns data in a columnar format (arrays of numbers for open, close, high, low, etc.), which differs from the standard object format used by many charting libraries. You must map these arrays to objects.",
            "Timestamps from the API are in Unix seconds (UTCTimestamp), whereas JavaScript `Date.now()` is in milliseconds. Ensure you divide by 1000 when constructing 'from' and 'to' parameters.",
            "Lightweight-charts requires explicit dimensions. The `useResizeObserver` hook is essential here to handle container resizing responsively.",
            "This example fetches historical data. For real-time updates, you would need to integrate the Orderly WebSocket feed to push new ticks to `candleStickSeries.update()`.",
            "Ensure the container div has a defined height (e.g., `min-h-[35rem]`), otherwise the chart will collapse to height 0."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React functional components and Hooks (useEffect, useRef, useState)",
            "lightweight-charts library installed",
            "use-resize-observer library installed",
            "Orderly ConfigProvider configured in the application root"
          ],
          "related": ["useConfig", "OrderlyConfigProvider"]
        },
        {
          "name": "AdvancedChart",
          "description": "A React component that integrates the TradingView Advanced Charting Library specifically for the Orderly Network ecosystem. It renders a professional-grade candlestick chart with customizable theming, designed to display market data for a specific trading symbol.",
          "installation": "npm install @orderly.network/ui-tradingview @orderly.network/ui",
          "usage": {
            "requiredProps": {
              "symbol": "string - The trading pair symbol (e.g., 'PERP_BTC_USDC') to display on the chart."
            },
            "optionalProps": {
              "libraryPath": "string - Path to the TradingView charting library bundles.",
              "scriptSRC": "string - Path to the main TradingView charting_library.js file.",
              "customCssUrl": "string - Path to a custom CSS file for chart styling overrides.",
              "overrides": "object - A configuration object to customize chart colors, grid styles, and pane properties."
            },
            "contextProviders": "No specific Orderly Context providers are strictly required for this component to render, but it typically consumes state (like the current symbol) from a parent trading layout.",
            "integrationSteps": "1. Ensure you have a valid TradingView Charting Library license and the library files hosted in your project's public folder. 2. Configure environment variables (e.g., VITE_BASE) to point to the hosted library location. 3. Import the Orderly UI styles. 4. Pass the dynamic symbol prop to the component."
          },
          "example": "import { TradingviewWidget } from '@orderly.network/ui-tradingview';\nimport { FC } from 'react';\n\n// Import global Orderly styles for consistent UI elements\nimport '@orderly.network/ui/dist/styles.css';\n\ninterface AdvancedChartProps {\n  symbol: string;\n}\n\nexport const AdvancedChart: FC<AdvancedChartProps> = ({ symbol }) => {\n  // Determine base path for TradingView library assets (adjust based on your build config)\n  const basePath = import.meta.env.VITE_BASE ? `${import.meta.env.VITE_BASE}/` : '';\n\n  return (\n    <div className=\"w-full h-0 min-h-[35rem] [&_iframe]:min-h-[30rem]\">\n      <TradingviewWidget\n        symbol={symbol}\n        // Point to your hosted TradingView library files\n        libraryPath={`${basePath}tradingview/charting_library/bundles`}\n        scriptSRC={`${basePath}tradingview/charting_library/charting_library.js`}\n        customCssUrl={`${basePath}tradingview/chart.css`}\n        // Theme overrides to match Orderly's dark mode aesthetic\n        overrides={{\n          'mainSeriesProperties.candleStyle.borderDownColor': '#DC2140',\n          'mainSeriesProperties.candleStyle.borderUpColor': '#1F8040',\n          'mainSeriesProperties.candleStyle.downColor': '#DC2140',\n          'mainSeriesProperties.candleStyle.upColor': '#1F8040',\n          'mainSeriesProperties.candleStyle.wickDownColor': '#DC2140',\n          'mainSeriesProperties.candleStyle.wickUpColor': '#1F8040',\n          'paneProperties.background': '#101418',\n          'paneProperties.backgroundType': 'solid',\n          'paneProperties.separatorColor': '#164165',\n          'paneProperties.horzGridProperties.color': '#161B22',\n          'paneProperties.vertGridProperties.color': '#161B22',\n          'paneProperties.legendProperties.showSeriesTitle': 'false'\n        }}\n      />\n    </div>\n  );\n};",
          "notes": [
            "Asset Hosting: The TradingView Charting Library is not included in the npm package. You must download the library files from TradingView (requires a license) and place them in your public directory (e.g., /public/tradingview).",
            "Iframe Sizing: The wrapper div uses `h-0 min-h-[35rem]` combined with `[&_iframe]:min-h-[30rem]`. This is a specific CSS pattern to ensure the iframe expands correctly within flex containers, preventing it from collapsing or overflowing.",
            "Environment Variables: The code relies on `import.meta.env.VITE_BASE`. Ensure this is configured in your `.env` file if your app is deployed in a subdirectory.",
            "Theming: The `overrides` prop uses specific TradingView internal property keys. Changing these requires referencing the TradingView Charting Library API documentation.",
            "Performance: The TradingView widget is resource-intensive. Consider lazy loading this component if it is not immediately visible in the viewport."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Access to TradingView Charting Library files (license required)",
            "Hosting setup for static library assets",
            "Basic understanding of iframe resizing behaviors in CSS"
          ],
          "related": ["@orderly.network/ui-tradingview", "@orderly.network/ui"]
        }
      ]
    },
    {
      "name": "WebSocket Services",
      "patterns": [
        {
          "name": "WebsocketService",
          "description": "A singleton service class that wraps the Orderly Network WebSocket client to manage real-time market data subscriptions. It handles multiplexing Kline (candlestick) and Trade data, allowing multiple subscribers for the same topic while maintaining a single underlying connection. It also includes logic to map charting library resolutions to Orderly API formats and updates current candle close prices based on live trade data.",
          "installation": "npm install @orderly.network/net",
          "usage": "This is a Singleton class, not a standard React component. It should be instantiated once with an Orderly WS instance and shared across your application (e.g., via a React Context or global store).\n\n**Key Methods:**\n\n1.  `subscribeKline(subscribeId: string, symbol: string, resolution: KlineResolution, onTickCallback: Function)`\n    *   `subscribeId`: Unique identifier for this specific subscription (used for unsubscription).\n    *   `symbol`: Trading pair (e.g., 'PERP_ETH_USDC').\n    *   `resolution`: Enum value (e.g., `KlineResolution.RESOLUTION_15m`).\n    *   `onTickCallback`: Function triggered when new kline data arrives.\n\n2.  `unsubscribeKline(subscribeId: string)`: Removes the specific listener and unsubscribes from the WS topic if no other listeners remain.\n\n3.  `subscribeSymbol(symbol: string)`: Subscribes to trade data for a symbol to update the current candle's close price in real-time.",
          "example": "import { WS } from '@orderly.network/net';\nimport { WebsocketService, KlineResolution } from './websocket.service';\n\n// 1. Initialize the Orderly WS Client\n// Note: Configuration depends on your environment (testnet/mainnet)\nconst wsClient = new WS({\n  brokerId: 'your_broker_id',\n  // ...other config options\n});\n\n// 2. Instantiate the Singleton Service\nconst wsService = new WebsocketService(wsClient);\n\n// 3. Subscribe to Kline Data (Candlesticks)\nconst subscriptionId = 'chart-eth-15m';\n\nwsService.subscribeKline(\n  subscriptionId,\n  'PERP_ETH_USDC',\n  KlineResolution.RESOLUTION_15m,\n  (klineData) => {\n    // Handle incoming kline update\n    console.log('New Candle:', klineData);\n    // klineData structure: { time, open, close, high, low, volume }\n  }\n);\n\n// 4. Subscribe to Trades (for real-time price updates)\n// This automatically updates the 'close' price of the active kline\nwsService.subscribeSymbol('PERP_ETH_USDC');\n\n// 5. Cleanup (e.g., in a React useEffect return)\n// wsService.unsubscribeKline(subscriptionId);",
          "notes": [
            "Singleton Pattern: The class enforces a single instance (`WebsocketService._instance`) to prevent multiple WebSocket connections.",
            "Multiplexing: You can call `subscribeKline` multiple times with different `subscribeId`s but the same `symbol` and `resolution`. The service manages one network subscription and fans out messages to all registered callbacks.",
            "Resolution Mapping: The `mapResolution` function converts TradingView-style strings (e.g., '15') to Orderly API formats (e.g., '15m'). Ensure you use the provided `KlineResolution` enum.",
            "Real-time Price Updates: The service automatically listens to `trade` topics via `subscribeSymbol` to update the `close` price of the currently forming candle, providing a smoother charting experience.",
            "Memory Management: Always call `unsubscribeKline` when your component unmounts to remove callbacks and prevent memory leaks.",
            "Type Safety: The source code uses `any` in several places. In a production environment, consider defining interfaces for `KlineData` and `TradeData`."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Orderly Network Broker ID",
            "Understanding of WebSocket concepts",
            "TypeScript knowledge",
            "React Context or State Management (for global access)"
          ],
          "related": ["@orderly.network/net", "OrderlyContext", "useOrderlyTrade"]
        }
      ]
    },
    {
      "name": "Trading Components",
      "patterns": [
        {
          "name": "CreateOrderForm",
          "description": "A comprehensive order entry form component supporting Market, Limit, Stop-Limit, and Bracket orders. It handles complex trading logic, including price validation, leverage estimation, and dynamic field rendering based on order type, powered by the Orderly Network SDK.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "requiredProps": "symbol (string): The trading pair symbol (e.g., 'PERP_ETH_USDC').",
            "optionalProps": "None. The component derives all state from the symbol and the SDK hooks.",
            "context": "Requires the application to be wrapped in OrderlyContextProvider and a Wallet Provider (e.g., Web3Onboard).",
            "integration": "Import the component and pass the active symbol from your trading view context. Ensure the user has an active wallet connection and Orderly account."
          },
          "example": "import React, { useState } from 'react';\nimport { useOrderEntry, useSymbolsInfo, useAccount, useWithdraw } from '@orderly.network/hooks';\nimport { OrderSide, OrderType, AlgoOrderRootType } from '@orderly.network/types';\n\nexport const OrderEntryPattern = ({ symbol }: { symbol: string }) => {\n  // 1. Initialize Order Entry Hook\n  const {\n    submit,\n    setValue,\n    maxQty,\n    estLiqPrice,\n    estLeverage,\n    formattedOrder,\n    metaState: { errors, dirty, submitted },\n    reset\n  } = useOrderEntry(symbol, {\n    initialOrder: {\n      side: OrderSide.BUY,\n      order_type: OrderType.LIMIT,\n      trigger_price: '',\n      order_price: '',\n      order_quantity: ''\n    }\n  });\n\n  const { account } = useAccount();\n  const { availableWithdraw } = useWithdraw();\n  const symbolsInfo = useSymbolsInfo();\n  const [loading, setLoading] = useState(false);\n\n  // 2. Handle Submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await submit();\n      alert('Order Created Successfully');\n      reset(); // Clear form after success\n    } catch (err) {\n      console.error('Order failed', err);\n      alert('Order Failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (symbolsInfo.isNil) return <div>Loading...</div>;\n\n  const symbolInfo = symbolsInfo[symbol]();\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-4 border rounded\">\n      {/* Side Selection */}\n      <div className=\"flex gap-2 mb-4\">\n        <button\n          type=\"button\"\n          onClick={() => setValue('side', OrderSide.BUY)}\n          className={formattedOrder.side === OrderSide.BUY ? 'bg-green-500 text-white' : 'bg-gray-200'}\n        >\n          Buy\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => setValue('side', OrderSide.SELL)}\n          className={formattedOrder.side === OrderSide.SELL ? 'bg-red-500 text-white' : 'bg-gray-200'}\n        >\n          Sell\n        </button>\n      </div>\n\n      {/* Order Type Selector */}\n      <select\n        className=\"w-full p-2 mb-4 border\"\n        onChange={(e) => {\n          const val = e.target.value;\n          // Handle Algo/Bracket types\n          if (val.startsWith('BRACKET')) {\n            setValue('order_type', val === 'BRACKET_MARKET' ? OrderType.MARKET : OrderType.LIMIT);\n            setValue('algo_type', AlgoOrderRootType.BRACKET);\n          } else {\n            setValue('order_type', val as OrderType);\n            setValue('algo_type', undefined);\n          }\n        }}\n      >\n        <option value=\"MARKET\">Market</option>\n        <option value=\"LIMIT\">Limit</option>\n        <option value=\"STOP_LIMIT\">Stop Limit</option>\n        <option value=\"BRACKET_LIMIT\">Bracket Limit</option>\n      </select>\n\n      {/* Dynamic Price Input */}\n      {formattedOrder.order_type !== OrderType.MARKET && (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-bold mb-1\">Price</label>\n          <input\n            type=\"number\"\n            className=\"w-full p-2 border\"\n            placeholder=\"Price\"\n            onChange={(e) => setValue('order_price', e.target.value)}\n          />\n        </div>\n      )}\n\n      {/* Bracket Fields (Conditional) */}\n      {formattedOrder.algo_type === AlgoOrderRootType.BRACKET && (\n        <div className=\"mb-4 p-2 bg-gray-50 border\">\n          <h3 className=\"font-bold\">Bracket Settings</h3>\n          <input\n            className=\"w-full p-1 border mb-2\"\n            placeholder=\"Take Profit Price\"\n            onChange={(e) => setValue('tp_trigger_price', e.target.value)}\n          />\n          <input\n            className=\"w-full p-1 border\"\n            placeholder=\"Stop Loss Price\"\n            onChange={(e) => setValue('sl_trigger_price', e.target.value)}\n          />\n        </div>\n      )}\n\n      {/* Quantity Input */}\n      <div className=\"mb-4\">\n        <label className=\"block text-sm font-bold mb-1\">Quantity (Max: {maxQty})</label>\n        <input\n          type=\"number\"\n          className=\"w-full p-2 border\"\n          placeholder=\"Quantity\"\n          onChange={(e) => setValue('order_quantity', e.target.value)}\n        />\n      </div>\n\n      {/* Estimations */}\n      <div className=\"text-sm text-gray-600 mb-4\">\n        <p>Est. Leverage: {estLeverage}</p>\n        <p>Est. Liq Price: {estLiqPrice}</p>\n        <p>Available: {availableWithdraw}</p>\n      </div>\n\n      <button\n        type=\"submit\"\n        disabled={loading || !account.address}\n        className=\"w-full bg-blue-600 text-white p-2 rounded disabled:opacity-50\"\n      >\n        {loading ? 'Submitting...' : 'Place Order'}\n      </button>\n    </form>\n  );\n};",
          "notes": [
            "The `useOrderEntry` hook manages the complexity of order validation. Always check `metaState.errors` before enabling the submit button to prevent API rejections.",
            "When implementing Bracket orders, you must set both `order_type` (e.g., LIMIT) and `algo_type` (BRACKET).",
            "Use `formattedOrder` from the hook to determine which UI fields to render (e.g., hide Price input for Market orders).",
            "Precision is critical. Use `getDecimalsFromTick(symbolInfo)` to determine the correct number of decimal places for price and quantity inputs to avoid 'Invalid tick size' errors.",
            "The `reset()` function is useful for clearing the form after a successful submission, but ensure you preserve the desired `side` or `order_type` if you want a faster trading workflow."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Active Web3 Wallet Connection",
            "Orderly Account Key registration",
            "Basic understanding of Order Types (Market, Limit, Stop, Bracket)"
          ],
          "related": ["useOrderEntry", "useSymbolsInfo", "useAccount", "useWithdraw"]
        },
        {
          "name": "Orderbook",
          "description": "A real-time orderbook component that displays live market depth (bids and asks) for a specific trading pair. It utilizes WebSocket streams for low-latency updates and includes visual depth bars to represent liquidity concentration.",
          "installation": "npm install @orderly.network/hooks",
          "usage": {
            "requiredProps": {
              "symbol": "string - The trading pair symbol (e.g., 'PERP_ETH_USDC')"
            },
            "optionalProps": "None directly on the component, but the underlying hook accepts options like 'level' for depth aggregation.",
            "context": "Must be wrapped within an OrderlyProvider (or V2Provider) to access the WebSocket connection and account context.",
            "integration": "1. Ensure your app is wrapped with the Orderly Provider. 2. Import the Orderbook component. 3. Pass the active symbol string. 4. The component automatically handles WebSocket subscriptions via the useOrderbookStream hook."
          },
          "example": "import React, { FC } from 'react';\nimport { useOrderbookStream, useSymbolsInfo } from '@orderly.network/hooks';\n\nexport const OrderbookPattern: FC<{ symbol: string }> = ({ symbol }) => {\n  // 1. Subscribe to real-time orderbook updates\n  // level: 10 means we get the top 10 bids and asks\n  const [data, { isLoading }] = useOrderbookStream(symbol, undefined, { level: 10 });\n\n  // 2. Fetch symbol metadata to determine decimal precision\n  const symbolsInfo = useSymbolsInfo();\n\n  if (isLoading || !symbolsInfo || !symbolsInfo[symbol]) {\n    return <div>Loading Orderbook...</div>;\n  }\n\n  const symbolInfo = symbolsInfo[symbol]();\n  \n  // 3. Calculate decimal places for formatting (Crucial for trading UIs)\n  // Note: Implement getDecimalsFromTick based on symbolInfo.min_tick or similar\n  const baseDecimals = 4; // Example value, derive from symbolInfo\n  const quoteDecimals = 2; // Example value, derive from symbolInfo\n\n  const formatPrice = (val: number) => val.toFixed(quoteDecimals);\n  const formatSize = (val: number) => val.toFixed(baseDecimals);\n\n  // 4. Render Logic\n  // Asks (Sells) are typically red, Bids (Buys) are green\n  // Depth bars are calculated relative to the max volume at the best price\n  return (\n    <div className=\"orderbook-container\">\n      <div className=\"header\">\n        <span>Price</span>\n        <span>Size</span>\n        <span>Total</span>\n      </div>\n      \n      <div className=\"asks\">\n        {data.asks?.map(([price, size, total], idx) => {\n           // Calculate depth visualization width\n           const maxTotal = data.asks?.[0]?.[2] || 1; \n           const depthWidth = (total / maxTotal) * 100;\n\n           return (\n             <div key={`ask-${idx}`} className=\"row ask\">\n               <span className=\"price\">{formatPrice(price)}</span>\n               <span className=\"size\">{formatSize(size)}</span>\n               <div className=\"total-container\">\n                 <div \n                   className=\"depth-bar\" \n                   style={{ width: `${depthWidth}%`, background: 'rgba(255, 0, 0, 0.2)' }}\n                 />\n                 <span className=\"total\">{formatSize(total)}</span>\n               </div>\n             </div>\n           );\n        })}\n      </div>\n\n      {/* Spread / Current Price Indicator could go here */}\n\n      <div className=\"bids\">\n        {data.bids?.map(([price, size, total], idx) => {\n           const maxTotal = data.bids?.[0]?.[2] || 1;\n           const depthWidth = (total / maxTotal) * 100;\n\n           return (\n             <div key={`bid-${idx}`} className=\"row bid\">\n               <span className=\"price\">{formatPrice(price)}</span>\n               <span className=\"size\">{formatSize(size)}</span>\n               <div className=\"total-container\">\n                 <div \n                   className=\"depth-bar\" \n                   style={{ width: `${depthWidth}%`, background: 'rgba(0, 255, 0, 0.2)' }}\n                 />\n                 <span className=\"total\">{formatSize(total)}</span>\n               </div>\n             </div>\n           );\n        })}\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Data Structure: The hook returns arrays of tuples [price, quantity, total]. 'Total' is the aggregated volume at that price level.",
            "Precision: Never hardcode decimal places. Always derive them from the symbol info (tick_size) to ensure the UI matches the exchange's trading rules.",
            "Performance: The useOrderbookStream hook manages the WebSocket connection lifecycle automatically. Unsubscribing happens when the component unmounts.",
            "Visual Alignment: Asks are usually sorted ascending (Low -> High) but rendered from bottom-up visually to meet the spread. Bids are sorted descending (High -> Low) and rendered top-down.",
            "Depth Calculation: The example calculates depth relative to the best price (first element of the array). This highlights liquidity near the current market price."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React functional components and Hooks",
            "Orderly Network Provider setup",
            "Understanding of financial order book concepts (Bids, Asks, Spread)",
            "Basic CSS Grid/Flexbox for layout"
          ],
          "related": ["useOrderbookStream", "useSymbolsInfo", "useTrades", "useMarkets"]
        },
        {
          "name": "SymbolHeader",
          "description": "A trading pair header component that displays real-time market data including mark price, index price, 24h volume, and price change percentage. It utilizes Orderly's WebSocket streams to provide live updates for a selected symbol.",
          "installation": "npm install @orderly.network/hooks",
          "usage": {
            "required_props_and_their_types": "symbol: string (The trading pair symbol, e.g., 'PERP_ETH_USDC'), setSymbol: React.Dispatch<React.SetStateAction<string | undefined>> (State dispatcher to change the active trading pair)",
            "optional_props_and_defaults": "None",
            "context_providers_needed": "OrderlyProvider (from @orderly.network/hooks) must be wrapping the component tree to enable WebSocket connections.",
            "integration_steps": "1. Ensure your app is wrapped with OrderlyProvider. 2. Create a parent component to hold the state for the selected symbol. 3. Import and render SymbolHeader, passing the symbol and setter. 4. The component will automatically handle the WebSocket subscription via useTickerStream."
          },
          "example": "import { useTickerStream } from '@orderly.network/hooks';\nimport React, { FC } from 'react';\n\n// Utility for formatting currency (replacing local import for example)\nconst usdFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n});\n\nexport const SymbolHeaderPattern: FC<{\n  symbol: string;\n  setSymbol: (symbol: string) => void;\n}> = ({ symbol, setSymbol }) => {\n  // Subscribe to real-time ticker updates for the specific symbol\n  const stream = useTickerStream(symbol);\n\n  // Handle loading state while WebSocket connects or data fetches\n  if (!stream) {\n    return <div className=\"p-4\">Loading market data...</div>;\n  }\n\n  // Calculate 24h change percentage safely\n  const dailyChange = stream['24h_change'];\n  const changePercent = stream.change \n    ? (stream.change * 100).toFixed(2) \n    : undefined;\n\n  const isPositive = dailyChange && !dailyChange.startsWith('-');\n\n  return (\n    <div className=\"flex items-center gap-4 p-4 border-b border-gray-700\">\n      {/* Symbol Selector */}\n      <button \n        onClick={() => setSymbol('PERP_BTC_USDC')}\n        className=\"font-bold text-lg\"\n      >\n        {symbol}\n      </button>\n\n      {/* Mark Price */}\n      <div className=\"flex flex-col\">\n        <span className=\"text-xs text-gray-500\">Mark Price</span>\n        <span>{usdFormatter.format(stream.mark_price)}</span>\n      </div>\n\n      {/* 24h Volume */}\n      <div className=\"flex flex-col\">\n        <span className=\"text-xs text-gray-500\">24h Volume</span>\n        <span>{usdFormatter.format(stream['24h_amount'])}</span>\n      </div>\n\n      {/* 24h Change */}\n      <div className=\"flex flex-col\">\n        <span className=\"text-xs text-gray-500\">24h Change</span>\n        <span className={isPositive ? 'text-green-500' : 'text-red-500'}>\n          {isPositive && '+'}{usdFormatter.format(Number(dailyChange) || 0)} / \n          {isPositive && '+'}{changePercent}%\n        </span>\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "The useTickerStream hook manages the WebSocket lifecycle automatically. It will unsubscribe when the component unmounts or the symbol changes.",
            "Data fields like '24h_change' and 'change' can be null initially. Always perform null checks or optional chaining before rendering.",
            "The '24h_change' field is a string representation of the price difference, while 'change' is a float multiplier (e.g., 0.05 for 5%).",
            "Ensure the symbol passed matches the format expected by Orderly (e.g., 'PERP_ETH_USDC').",
            "This component relies on real-time data, so visual feedback (like a Spinner) is important during the initial connection phase."
          ],
          "difficulty": "beginner",
          "prerequisites": [
            "React functional components and Hooks (useState)",
            "Basic understanding of WebSocket streams",
            "OrderlyProvider setup in the application root"
          ],
          "related": ["useTickerStream", "OrderlyProvider", "useOrderlyContext"]
        },
        {
          "name": "SymbolSelection",
          "description": "A dropdown selector component that allows users to switch between available trading pairs. It fetches market data from Orderly Network and displays the base asset for easy selection.",
          "installation": "npm install @orderly.network/hooks",
          "usage": {
            "required_props": [
              {
                "name": "symbol",
                "type": "string | undefined",
                "description": "The currently active trading pair symbol (e.g., 'PERP_BTC_USDC')."
              },
              {
                "name": "setSymbol",
                "type": "React.Dispatch<React.SetStateAction<string | undefined>>",
                "description": "State dispatcher function to update the selected symbol when a user clicks an option."
              }
            ],
            "optional_props": [],
            "context": "Must be a descendant of the OrderlyProvider to access market data via the useMarkets hook.",
            "integration": "1. Import useMarkets and MarketsType from @orderly.network/hooks.\n2. Initialize the hook with useMarkets(MarketsType.ALL) to retrieve the full list of markets.\n3. Handle the loading state if the initial symbol is undefined.\n4. Parse the symbol string (splitting by '_') to extract the base asset for display purposes.\n5. Map over Object.values(markets) to render the list of selectable options."
          },
          "example": "import { useMarkets, MarketsType } from '@orderly.network/hooks';\nimport { useState } from 'react';\n\nexport const SymbolSelection = ({ symbol, setSymbol }) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  // Fetch all available markets (Spot and Perp)\n  // Returns [markets, error, isLoading]\n  const [markets] = useMarkets(MarketsType.ALL);\n\n  // Guard clause for initial load\n  if (!symbol) return <div>Loading...</div>;\n\n  // Extract base asset (e.g., 'BTC' from 'PERP_BTC_USDC')\n  // Note: Index depends on symbol format (TYPE_BASE_QUOTE vs BASE_QUOTE)\n  const [_, base] = symbol.split('_');\n\n  return (\n    <div className=\"symbol-selector\">\n      <button onClick={() => setIsOpen(!isOpen)}>\n        {base}\n      </button>\n\n      {isOpen && (\n        <div className=\"dropdown-list\">\n          {/* markets is an object keyed by symbol, so we iterate values */}\n          {Object.values(markets).map((market) => {\n            const [_, marketBase] = market.symbol.split('_');\n            return (\n              <div\n                key={market.symbol}\n                onClick={() => {\n                  setSymbol(market.symbol);\n                  setIsOpen(false);\n                }}\n              >\n                {marketBase}\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "The useMarkets hook returns a data object where keys are symbol strings, not an array. You must use Object.values(markets) to iterate.",
            "Symbol parsing logic (splitting by '_') assumes standard Orderly formatting (e.g., PERP_BTC_USDC). If using SPOT, the format might be BTC_USDC, so the array index for the base asset may change.",
            "MarketsType.ALL fetches both Spot and Perp markets. Use MarketsType.PERP or MarketsType.SPOT to filter the data source directly if your app only supports one type.",
            "Ensure the parent component manages the 'symbol' state, as this component is a controlled component.",
            "TypeScript users should ensure the symbol type matches the MarketInfo['symbol'] type from the SDK for type safety."
          ],
          "difficulty": "beginner",
          "prerequisites": [
            "React functional components and hooks (useState)",
            "OrderlyProvider configured at the application root",
            "Basic understanding of Orderly symbol nomenclature"
          ],
          "related": ["useMarkets", "MarketsType", "OrderlyProvider"]
        }
      ]
    },
    {
      "name": "Position Components",
      "patterns": [
        {
          "name": "Positions",
          "description": "A real-time table component displaying user's open trading positions, including quantity, entry price, mark price, unrealized PnL, and liquidation prices. It automatically handles authentication checks and loading states.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "requiredProps": "None strictly required, but typically used to filter by market.",
            "optionalProps": {
              "symbol": "string - The trading pair symbol (e.g., 'PERP_ETH_USDC'). If provided and showAll is false, filters for this specific market.",
              "showAll": "boolean - Defaults to true. If true, fetches all positions; if false, fetches only the position matching the symbol prop."
            },
            "context": "Must be a descendant of OrderlyProvider from @orderly.network/hooks.",
            "integration": "1. Ensure the app is wrapped in OrderlyProvider. 2. Import the component. 3. Pass 'symbol' if you want to isolate a specific market's position, or leave default to show the full portfolio."
          },
          "example": "import { useAccount, usePositionStream } from '@orderly.network/hooks';\nimport { AccountStatusEnum } from '@orderly.network/types';\nimport { FC } from 'react';\n\nexport const Positions: FC<{ symbol?: string; showAll?: boolean }> = ({\n  symbol,\n  showAll = true\n}) => {\n  // Fetch real-time position data.\n  // If showAll is true, symbol is undefined (fetches all).\n  // If showAll is false, fetches specific symbol.\n  const [positions, _info, { isLoading }] = usePositionStream(\n    showAll ? undefined : symbol\n  );\n\n  // Check account authentication status\n  const { state } = useAccount();\n\n  // Guard clause: Do not render if user is not signed in\n  if (state.status <= AccountStatusEnum.NotSignedIn) {\n    return null;\n  }\n\n  // Loading state\n  if (!positions.rows || isLoading) {\n    return <div>Loading positions...</div>;\n  }\n\n  return (\n    <table>\n      <thead>\n        <tr>\n          <th>Symbol</th>\n          <th>Side</th>\n          <th>Size</th>\n          <th>Unrealized PnL</th>\n          <th>Liq. Price</th>\n        </tr>\n      </thead>\n      <tbody>\n        {positions.rows.map((position) => (\n          <tr key={position.symbol}>\n            <td>{position.symbol}</td>\n            <td>\n              {/* Determine Long or Short based on quantity */}\n              <span style={{ color: position.position_qty > 0 ? 'green' : 'red' }}>\n                {position.position_qty > 0 ? 'Long' : 'Short'}\n              </span>\n            </td>\n            <td>{Math.abs(position.position_qty)}</td>\n            <td>\n              {position.unrealized_pnl.toFixed(2)} USD \n              ({(position.unrealized_pnl_ROI * 100).toFixed(2)}%)\n            </td>\n            <td>\n              {/* Liquidation price might be null if position is safe/closed */}\n              {position.est_liq_price ? position.est_liq_price.toFixed(2) : '-'}\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};",
          "notes": [
            "The `usePositionStream` hook establishes a WebSocket connection, so updates happen in real-time without manual refetching.",
            "Always check `state.status` against `AccountStatusEnum` before rendering sensitive financial data to avoid errors or empty states for unauthenticated users.",
            "`position_qty` indicates the direction: positive values are Long, negative values are Short.",
            "The `est_liq_price` can be null, especially if the position is very small or the account has a high margin ratio; always add a null check when rendering.",
            "PnL ROI is returned as a decimal (e.g., 0.05 for 5%), so multiply by 100 for display."
          ],
          "difficulty": "beginner",
          "prerequisites": [
            "React functional components knowledge",
            "OrderlyProvider setup in the application root",
            "Basic understanding of trading concepts (Long/Short, PnL, Liquidation)"
          ],
          "related": ["usePositionStream", "useAccount", "AccountStatusEnum", "useOrderStream"]
        },
        {
          "name": "UpdatePosition",
          "description": "A modal component for managing open trading positions. It displays real-time position metrics (PnL, Entry Price, Liquidation Price) and provides a tabbed interface to execute position management actions such as closing the position, setting stop-market orders, or configuring take-profit/stop-loss limits.",
          "installation": "npm install @orderly.network/types",
          "usage": {
            "requiredProps": {
              "position": "API.PositionExt - The position object containing symbol, quantity, prices, and PnL data."
            },
            "optionalProps": "None. The component manages its own open/close state internally.",
            "context": "While this component itself doesn't strictly require a Context Provider, the child components (ClosePosition, StopOrder, TpSlOrder) typically rely on OrderlyProvider or Wallet context to execute transactions.",
            "integration": "Import the component and pass a valid position object retrieved from the Orderly API or a hook like usePositions. Ensure you have the required child components (ClosePosition, StopOrder, TpSlOrder) implemented or imported."
          },
          "example": "import { API } from '@orderly.network/types';\nimport { useState } from 'react';\nimport { Dialog, Tabs, Button } from '@radix-ui/themes';\n\n// Mock child components for demonstration\nconst ClosePosition = ({ position, setOpen }: any) => <div>Close Logic for {position.symbol}</div>;\nconst StopOrder = ({ position, setOpen }: any) => <div>Stop Logic for {position.symbol}</div>;\nconst TpSlOrder = ({ position, setOpen }: any) => <div>TP/SL Logic for {position.symbol}</div>;\n\nexport const UpdatePosition = ({ position }: { position: API.PositionExt }) => {\n  const [open, setOpen] = useState(false);\n\n  // Parse symbol (e.g., \"PERP_BTC_USDC\" -> [\"PERP\", \"BTC\", \"USDC\"])\n  const [_, base, quote] = position.symbol.split('_');\n\n  // Utility for formatting currency\n  const formatUSD = (val: number) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(val);\n\n  return (\n    <Dialog.Root open={open} onOpenChange={setOpen}>\n      <Dialog.Trigger>\n        <Button>Update Position</Button>\n      </Dialog.Trigger>\n      \n      <Dialog.Content\n        className=\"max-w-md\"\n        onInteractOutside={(e) => e.preventDefault()} // Prevent accidental closing\n      >\n        <Dialog.Title>\n          Update Position: {base}/{quote}\n        </Dialog.Title>\n\n        {/* Position Metrics Grid */}\n        <div className=\"grid grid-cols-2 gap-4 my-4\">\n          <div>\n            <div className=\"text-gray-500\">Quantity</div>\n            <div className=\"font-bold\">{position.position_qty}</div>\n          </div>\n          <div>\n            <div className=\"text-gray-500\">Mark Price</div>\n            <div className=\"font-bold\">{formatUSD(position.mark_price)}</div>\n          </div>\n          <div>\n            <div className=\"text-gray-500\">Unreal. PnL</div>\n            <div className={position.unrealized_pnl >= 0 ? \"text-green-500\" : \"text-red-500\"}>\n              {formatUSD(position.unrealized_pnl)}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-gray-500\">Est. Liq Price</div>\n            <div className=\"font-bold\">\n              {position.est_liq_price ? formatUSD(position.est_liq_price) : '-'}\n            </div>\n          </div>\n        </div>\n\n        {/* Action Tabs */}\n        <Tabs.Root defaultValue=\"close\">\n          <Tabs.List>\n            <Tabs.Trigger value=\"close\">Close</Tabs.Trigger>\n            <Tabs.Trigger value=\"stop\">Stop</Tabs.Trigger>\n            <Tabs.Trigger value=\"tp_sl\">TP / SL</Tabs.Trigger>\n          </Tabs.List>\n\n          <Tabs.Content value=\"close\">\n            <ClosePosition position={position} setOpen={setOpen} />\n          </Tabs.Content>\n          <Tabs.Content value=\"stop\">\n            <StopOrder position={position} setOpen={setOpen} />\n          </Tabs.Content>\n          <Tabs.Content value=\"tp_sl\">\n            <TpSlOrder position={position} setOpen={setOpen} />\n          </Tabs.Content>\n        </Tabs.Root>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n};",
          "notes": [
            "The component assumes the position symbol follows the format TYPE_BASE_QUOTE (e.g., PERP_BTC_USDC). Adjust the split logic if your data format differs.",
            "The `onInteractOutside` handler prevents the modal from closing when clicking the backdrop. This is a UX choice to prevent accidental dismissal during trading actions.",
            "Child components (`ClosePosition`, `StopOrder`, `TpSlOrder`) receive the `setOpen` function. This allows them to programmatically close the modal after successfully submitting an order to the blockchain.",
            "Ensure `API.PositionExt` is populated with accurate `mark_price` and `est_liq_price` to avoid misleading UI information.",
            "This component relies heavily on Radix UI primitives. Ensure your project has `@radix-ui/themes` installed and configured."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React Functional Components",
            "Radix UI (Dialog, Tabs)",
            "Orderly Network Position Data Structure (API.PositionExt)"
          ],
          "related": ["usePositions", "API.PositionExt", "OrderlyProvider"]
        },
        {
          "name": "ClosePosition",
          "description": "A form component designed to close or reduce an existing trading position. It utilizes the useOrderEntry hook to construct a Market order with reduce_only enabled, automatically determining the correct side (Buy/Sell) based on the current position quantity.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": "This component requires a position object (API.PositionExt) and a state setter to close the modal/dialog upon completion. It must be used within an OrderlyProvider context. The component initializes the order entry hook with specific parameters: side is opposite to the position, type is MARKET, and reduce_only is true.",
          "example": "import { useOrderEntry, useSymbolsInfo } from '@orderly.network/hooks';\nimport { OrderSide, OrderType } from '@orderly.network/types';\nimport { useState } from 'react';\nimport type { API } from '@orderly.network/types';\n\ntype Props = {\n  position: API.PositionExt;\n  setOpen: (open: boolean) => void;\n};\n\nexport const ClosePosition = ({ position, setOpen }: Props) => {\n  const [loading, setLoading] = useState(false);\n  const symbolsInfo = useSymbolsInfo();\n\n  // Determine the side: Long positions need SELL orders to close, Short need BUY\n  const closeSide = position.position_qty > 0 ? OrderSide.SELL : OrderSide.BUY;\n  const maxQty = Math.abs(position.position_qty);\n\n  // Initialize the order entry hook with a reduce-only market order\n  const { submit, setValue, formattedOrder, metaState } = useOrderEntry(position.symbol, {\n    initialOrder: {\n      side: closeSide,\n      order_type: OrderType.MARKET,\n      order_quantity: String(maxQty),\n      reduce_only: true // Critical: ensures we only reduce the position, not open a new one\n    }\n  });\n\n  const submitForm = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await submit();\n      setOpen(false); // Close modal on success\n    } catch (err) {\n      console.error('Failed to close position', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (symbolsInfo.isNil) return <div>Loading symbol info...</div>;\n\n  const symbolInfo = symbolsInfo[position.symbol]();\n\n  return (\n    <form onSubmit={submitForm}>\n      <div>\n        <label>Quantity ({position.symbol.split('_')[1]})</label>\n        <input\n          type=\"number\"\n          value={formattedOrder.order_quantity}\n          onChange={(e) => setValue('order_quantity', e.target.value)}\n          max={maxQty}\n          step={symbolInfo.base_tick}\n        />\n      </div>\n\n      {/* Slider for quick percentage selection */}\n      <input\n        type=\"range\"\n        min=\"0\"\n        max={maxQty}\n        step={symbolInfo.base_tick}\n        value={formattedOrder.order_quantity}\n        onChange={(e) => setValue('order_quantity', e.target.value)}\n      />\n\n      <button type=\"submit\" disabled={loading}>\n        {loading ? 'Closing...' : 'Close Position'}\n      </button>\n    </form>\n  );\n};",
          "notes": [
            "Always set reduce_only to true in the initialOrder config to prevent accidentally opening a new position in the opposite direction.",
            "The order side is dynamically calculated: if position_qty is positive (Long), you must Sell to close; if negative (Short), you must Buy to close.",
            "Use Math.abs(position_qty) to determine the maximum quantity the user can input.",
            "The useSymbolsInfo hook is essential to fetch the 'base_tick' for the slider/input step to ensure precision compliance.",
            "Ensure the component is unmounted or reset after successful submission to prevent state leakage if the modal is reused."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Understanding of Orderly Position data structure (API.PositionExt)",
            "Familiarity with useOrderEntry hook",
            "Understanding of Order Types (Market) and Order Sides (Buy/Sell)"
          ],
          "related": ["useOrderEntry", "usePositions", "useSymbolsInfo", "API.Position"]
        }
      ]
    },
    {
      "name": "Order Components",
      "patterns": [
        {
          "name": "PendingOrders",
          "description": "A component that renders a real-time list of open or incomplete orders for a specific trading symbol or all symbols. It handles fetching, loading states, and provides actions to cancel standard and algorithmic orders.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": "This component relies on the `useOrderStream` hook to subscribe to order updates via WebSocket and `useAccount` to handle authentication states. It accepts a `symbol` prop to filter orders and an optional `showAll` prop to toggle between symbol-specific and global views. The component automatically hides if the user is not signed in.",
          "example": "import { useAccount, useOrderStream } from '@orderly.network/hooks';\nimport { API, AccountStatusEnum, OrderStatus } from '@orderly.network/types';\nimport { FC } from 'react';\n\nexport const PendingOrders: FC<{ symbol: string; showAll?: boolean }> = ({\n  symbol,\n  showAll = true\n}) => {\n  // 1. Setup Account Context to check auth status\n  const { state } = useAccount();\n\n  // 2. Subscribe to order stream\n  // - symbol: undefined fetches all symbols, specific string filters by symbol\n  // - status: INCOMPLETE covers open, partially_filled, new, etc.\n  const [orders, { cancelOrder, cancelAlgoOrder, isLoading }] = useOrderStream({\n    symbol: showAll ? undefined : symbol,\n    status: OrderStatus.INCOMPLETE\n  });\n\n  // 3. Guard clause: Do not render if user is not authenticated\n  if (state.status <= AccountStatusEnum.NotSignedIn) {\n    return null;\n  }\n\n  // 4. Handle loading state\n  if (!orders || isLoading) {\n    return <div>Loading orders...</div>;\n  }\n\n  return (\n    <div className=\"order-list\">\n      {orders.map((order) => {\n        // 5. Type Guard: Distinguish between AlgoOrders and standard Orders\n        // AlgoOrders have an 'algo_order_id' property\n        const isAlgo = !!(order as API.AlgoOrder).algo_order_id;\n        \n        return (\n          <div key={isAlgo ? (order as API.AlgoOrder).algo_order_id : (order as API.Order).order_id}>\n            <span>{(order as API.Order).symbol}</span>\n            <span>{(order as API.Order).side}</span>\n            <span>{(order as API.Order).quantity}</span>\n            <button \n              onClick={() => isAlgo \n                ? cancelAlgoOrder((order as API.AlgoOrder).algo_order_id) \n                : cancelOrder((order as API.Order).order_id)}\n            >\n              Cancel\n            </button>\n          </div>\n        );\n      })}\n    </div>\n  );\n};",
          "notes": [
            "The hook `useOrderStream` returns a tuple where the first element is the array of orders and the second is an object containing action functions like `cancelOrder`.",
            "TypeScript users should note that `useOrderStream` may return a union type of `API.Order` and `API.AlgoOrder`. You must use type guards (checking for `algo_order_id`) to safely access properties specific to either type.",
            "`OrderStatus.INCOMPLETE` is the recommended status filter for 'Pending' or 'Open' order books, as it includes 'NEW', 'PARTIALLY_FILLED', and 'OPEN' statuses.",
            "Ensure the `OrderlyProvider` is wrapping your component tree at a higher level for these hooks to function.",
            "The `cancelOrder` and `cancelAlgoOrder` functions returned by the hook handle the API calls and automatically update the local state via the WebSocket stream."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "OrderlyProvider must be configured in the app root",
            "Basic understanding of React Hooks",
            "Understanding of TypeScript Union Types and Type Guards"
          ],
          "related": ["useOrderStream", "useAccount", "useCancelOrder", "OrderStatus"]
        },
        {
          "name": "PendingOrder",
          "description": "A table row component that renders details for a single pending order (standard or algorithmic) and provides a user interface to cancel it. It handles the distinction between regular orders and algo orders using a discriminated union pattern.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "requiredProps": {
              "order": "A discriminated union object: `{ isAlgoOrder: false; order: API.Order } | { isAlgoOrder: true; order: API.AlgoOrder }`. This structure allows the component to strictly type-check which specific ID and cancel function to use.",
              "cancelOrder": "Function to cancel a standard order. Signature: `(orderId: number, symbol: string) => Promise<void>`. Usually sourced from `useOrderStream`.",
              "cancelAlgoOrder": "Function to cancel an algorithmic order. Signature: `(algoOrderId: number, symbol: string) => Promise<void>`. Usually sourced from `useOrderStream`."
            },
            "context": "This component is typically used inside a loop mapping over open orders from the `useOrderStream` hook. It relies on a parent component to provide the cancellation functions.",
            "integration": "1. Retrieve `cancelOrder` and `cancelAlgoOrder` from `useOrderStream` in a parent container.\n2. Map over your list of orders.\n3. Pass the specific order object and the cancel functions to `PendingOrder`.\n4. Ensure a notification system (like `useNotifications`) is available for user feedback."
          },
          "example": "import { useOrderStream } from '@orderly.network/hooks';\nimport { API } from '@orderly.network/types';\nimport { FC, useState } from 'react';\n\n// Define the props using a discriminated union for type safety\ninterface PendingOrderProps {\n  order: { isAlgoOrder: false; order: API.Order } | { isAlgoOrder: true; order: API.AlgoOrder };\n  cancelOrder: (orderId: number, symbol: string) => Promise<void>;\n  cancelAlgoOrder: (algoOrderId: number, symbol: string) => Promise<void>;\n}\n\nexport const PendingOrder: FC<PendingOrderProps> = ({ order, cancelOrder, cancelAlgoOrder }) => {\n  const [loading, setLoading] = useState(false);\n\n  // Parse symbol (e.g., \"PERP_ETH_USDC\" -> \"PERP\", \"ETH\", \"USDC\")\n  const [_, base, quote] = order.order.symbol.split('_');\n\n  const handleCancel = async () => {\n    setLoading(true);\n    try {\n      // Orderly SDK Pattern: Use the discriminator to choose the correct API call\n      if (order.isAlgoOrder) {\n        // Algo orders require algo_order_id\n        await cancelAlgoOrder(order.order.algo_order_id, order.order.symbol);\n      } else {\n        // Standard orders require order_id\n        await cancelOrder(order.order.order_id, order.order.symbol);\n      }\n      // Handle success (e.g., close modal, show toast)\n    } catch (error) {\n      console.error('Cancel failed', error);\n      // Handle error\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <tr>\n      <td>{base}/{quote}</td>\n      <td>{order.order.side}</td>\n      <td>{order.order.quantity}</td>\n      <td>\n        <button onClick={handleCancel} disabled={loading}>\n          {loading ? 'Cancelling...' : 'Cancel'}\n        </button>\n      </td>\n    </tr>\n  );\n};",
          "notes": [
            "The `isAlgoOrder` property acts as a type discriminator in TypeScript, ensuring you access `algo_order_id` only when it is an algo order, and `order_id` only when it is a standard order.",
            "Orderly symbols are typically formatted as `TYPE_BASE_QUOTE` (e.g., `PERP_BTC_USDC`). The code splits this string to display trading pair information.",
            "Always wrap `cancelOrder` and `cancelAlgoOrder` calls in try/catch blocks, as network failures or invalid order states (e.g., already filled) will throw errors.",
            "The `cancelOrder` and `cancelAlgoOrder` functions are asynchronous. Ensure UI loading states prevent double-submission.",
            "This component does not fetch data itself; it relies on data passed from `useOrderStream` to ensure real-time consistency."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Understanding of React Hooks (useState)",
            "Understanding of TypeScript Discriminated Unions",
            "Familiarity with `useOrderStream` hook"
          ],
          "related": ["useOrderStream", "API.Order", "API.AlgoOrder"]
        },
        {
          "name": "OrderTabs",
          "description": "A navigation wrapper component that organizes trading data views into tabs, allowing users to switch between Open Positions and Pending Orders for a specific trading pair.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "required_props": [
              {
                "name": "symbol",
                "type": "string",
                "description": "The trading pair symbol (e.g., 'PERP_BTC_USDC') used to filter data in child components."
              }
            ],
            "optional_props": [],
            "context_needed": "Must be a descendant of an Orderly context provider (e.g., OrderlyProvider) to ensure child components can access account state and hooks.",
            "integration_steps": "1. Ensure child components (Positions, PendingOrders) are implemented using Orderly hooks. 2. Import OrderTabs into your trading layout. 3. Pass the current market symbol to the component."
          },
          "example": "import { Tabs } from '@radix-ui/themes';\nimport { FC } from 'react';\n\n// Assuming these components utilize Orderly hooks like usePositions and useOrders\nimport { PendingOrders, Positions } from './components';\n\nexport const OrderTabs: FC<{ symbol: string }> = ({ symbol }) => {\n  return (\n    <Tabs.Root defaultValue=\"positions\" className=\"flex-1\">\n      <Tabs.List>\n        <Tabs.Trigger value=\"positions\">Positions</Tabs.Trigger>\n        <Tabs.Trigger value=\"pending\">Pending</Tabs.Trigger>\n      </Tabs.List>\n\n      {/* Renders positions table for the specific symbol */}\n      <Tabs.Content value=\"positions\">\n        <Positions symbol={symbol} showAll={true} />\n      </Tabs.Content>\n\n      {/* Renders pending orders table for the specific symbol */}\n      <Tabs.Content value=\"pending\">\n        <PendingOrders symbol={symbol} showAll={true} />\n      </Tabs.Content>\n    </Tabs.Root>\n  );\n};",
          "notes": [
            "The component hardcodes `showAll={true}` for child components. If you need to filter by specific order types or statuses, modify the props passed to children.",
            "Uses Radix UI for accessible tab management. Ensure your project has Radix themes configured.",
            "This component acts as a layout orchestrator; the actual SDK logic (fetching data) resides within the `Positions` and `PendingOrders` child components.",
            "Ensure the `symbol` format matches the specific broker or chain configuration (e.g., including 'PERP_' prefix)."
          ],
          "difficulty": "beginner",
          "prerequisites": [
            "React functional components",
            "Radix UI setup",
            "Orderly Provider context setup",
            "Child components: Positions, PendingOrders"
          ],
          "related": ["usePositions", "useOrders", "Positions", "PendingOrders"]
        },
        {
          "name": "TpSlOrder",
          "description": "A React component for creating and managing Take Profit (TP) and Stop Loss (SL) orders against an existing trading position. It integrates with Orderly's algorithmic order system to calculate estimated PnL and handle order submission.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "requiredProps": {
              "position": "API.PositionExt - The position object to attach the TP/SL order to. Must contain symbol, quantity, and average open price."
            },
            "optionalProps": {
              "setOpen": "Dispatch<SetStateAction<boolean>> - Callback to close the modal/dialog upon successful order creation."
            },
            "context": "Requires the application to be wrapped within OrderlyProvider (from @orderly.network/hooks) to access wallet and account context.",
            "integration": "1. Fetch symbol info using useSymbolsInfo to determine decimal precision.\n2. Initialize useTPSLOrder hook with the target position.\n3. Use a form library (e.g., react-hook-form) to manage user input.\n4. Sync form state to the Orderly hook using setValue to trigger real-time PnL calculations.\n5. Call submit() to execute the order."
          },
          "example": "import { useTPSLOrder, useSymbolsInfo } from '@orderly.network/hooks';\nimport { API } from '@orderly.network/types';\nimport { useEffect } from 'react';\nimport { useForm, Controller, SubmitHandler } from 'react-hook-form';\n\n// Define inputs matching the Orderly hook expectations\ntype OrderInputs = {\n  tp_trigger_price?: string;\n  sl_trigger_price?: string;\n  quantity?: string;\n};\n\nexport const TpSlOrderExample = ({ position, onClose }: { position: API.PositionExt; onClose: () => void }) => {\n  // 1. Access Orderly Hooks\n  const symbolsInfo = useSymbolsInfo();\n  const [algoOrder, { setValue, submit, errors }] = useTPSLOrder(position);\n\n  // 2. Setup Form State\n  const { control, watch, handleSubmit } = useForm<OrderInputs>({\n    defaultValues: {\n      quantity: String(Math.abs(position.position_qty))\n    }\n  });\n\n  // 3. Sync Form -> Orderly Hook (Crucial for PnL calculation)\n  const watchedValues = watch();\n  useEffect(() => {\n    if (watchedValues.tp_trigger_price) setValue('tp_trigger_price', watchedValues.tp_trigger_price);\n    if (watchedValues.sl_trigger_price) setValue('sl_trigger_price', watchedValues.sl_trigger_price);\n    if (watchedValues.quantity) setValue('quantity', watchedValues.quantity);\n  }, [watchedValues, setValue]);\n\n  // 4. Handle Submission\n  const onSubmit: SubmitHandler<OrderInputs> = async () => {\n    try {\n      await submit();\n      onClose(); // Close modal on success\n    } catch (err) {\n      console.error('Order failed', err);\n    }\n  };\n\n  if (symbolsInfo.isNil) return <div>Loading...</div>;\n\n  const symbolInfo = symbolsInfo[position.symbol]();\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      {/* TP Input */}\n      <Controller\n        name=\"tp_trigger_price\"\n        control={control}\n        render={({ field }) => (\n          <input\n            {...field}\n            placeholder=\"TP Price\"\n            className={errors?.tp_trigger_price ? 'error' : ''}\n          />\n        )}\n      />\n      <div>Est. PnL: {algoOrder.tp_pnl}</div>\n\n      {/* SL Input */}\n      <Controller\n        name=\"sl_trigger_price\"\n        control={control}\n        render={({ field }) => (\n          <input\n            {...field}\n            placeholder=\"SL Price\"\n            className={errors?.sl_trigger_price ? 'error' : ''}\n          />\n        )}\n      />\n      <div>Est. PnL: {algoOrder.sl_pnl}</div>\n\n      {/* Quantity Input */}\n      <Controller\n        name=\"quantity\"\n        control={control}\n        render={({ field }) => (\n          <input\n            {...field}\n            type=\"number\"\n            max={Math.abs(position.position_qty)}\n          />\n        )}\n      />\n\n      <button type=\"submit\">Create Order</button>\n    </form>\n  );\n};",
          "notes": [
            "State Synchronization: The component uses a specific pattern where `useEffect` watches form fields and calls `setValue` on the Orderly hook. This is required because the hook needs to recalculate PnL (`algoOrder.tp_pnl`) whenever inputs change.",
            "Decimal Precision: Always use `useSymbolsInfo` to fetch `tick_size` or `min_order_qty` to format inputs correctly. Sending raw numbers without respecting decimals can cause API errors.",
            "Quantity Handling: The default quantity is usually the absolute value of the current position size (`Math.abs(position.position_qty)`).",
            "Error Handling: The `errors` object returned by `useTPSLOrder` contains specific validation messages (e.g., 'Trigger price must be greater than mark price') which should be displayed to the user.",
            "Position Side: The hook automatically handles logic for Long vs. Short positions based on the `position` prop passed to it."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Familiarity with React Hook Form",
            "Understanding of Trading concepts (Long/Short, PnL, Trigger Prices)",
            "Basic knowledge of Orderly Position data structure"
          ],
          "related": ["useTPSLOrder", "useSymbolsInfo", "usePositions", "useAlgoOrders"]
        },
        {
          "name": "StopOrder",
          "description": "A specialized form component for creating Stop Market orders (Stop Loss or Take Profit) to close existing positions. It calculates estimated PnL and handles the logic for determining order sides based on position direction.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types @orderly.network/perp",
          "usage": {
            "requiredProps": [
              {
                "name": "position",
                "type": "API.PositionExt",
                "description": "The position object containing symbol, quantity, and average open price data."
              }
            ],
            "optionalProps": [
              {
                "name": "setOpen",
                "type": "Dispatch<SetStateAction<boolean>>",
                "description": "Callback function to close the modal or dialog upon successful submission."
              }
            ],
            "context": "Requires the application to be wrapped within Orderly's context provider (usually via `OrderlyProvider` or `WalletProvider` from `@orderly.network/hooks`).",
            "integration": "1. Import the component into your trading interface. 2. Pass the specific `API.PositionExt` object retrieved from a positions list. 3. The component automatically determines if the user is Long or Short and sets the default order side accordingly (e.g., Longs default to Sell for Take Profit)."
          },
          "example": "import { useOrderEntry, useSymbolsInfo } from '@orderly.network/hooks';\nimport { positions } from '@orderly.network/perp';\nimport { API, OrderSide, OrderType } from '@orderly.network/types';\nimport { useState } from 'react';\n\nexport const StopOrderExample = ({ position, onClose }: { position: API.PositionExt; onClose: () => void }) => {\n  const [loading, setLoading] = useState(false);\n  const symbolsInfo = useSymbolsInfo();\n\n  // Determine position side\n  const isLong = position.position_qty > 0;\n\n  // Initialize the order entry hook with STOP_MARKET type\n  const {\n    submit,\n    setValue,\n    formattedOrder,\n    metaState: { errors, dirty, submitted }\n  } = useOrderEntry(position.symbol, {\n    initialOrder: {\n      side: isLong ? OrderSide.SELL : OrderSide.BUY,\n      order_type: OrderType.STOP_MARKET,\n      trigger_price: undefined,\n      order_quantity: String(Math.abs(position.position_qty))\n    }\n  });\n\n  if (symbolsInfo.isNil) return <div>Loading...</div>;\n\n  const symbolInfo = symbolsInfo[position.symbol]();\n\n  // Calculate estimated PnL for the stop order\n  const estimatedPnl = positions.unrealizedPnL({\n    qty: Number(formattedOrder.order_quantity ?? 0),\n    openPrice: position.average_open_price,\n    markPrice: Number(formattedOrder.trigger_price ?? 0)\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await submit();\n      onClose(); // Close modal on success\n    } catch (err) {\n      console.error('Order failed', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {/* Toggle for Take Profit vs Stop Loss */}\n      <div className=\"flex gap-2 mb-4\">\n        <button\n          type=\"button\"\n          onClick={() => setValue('side', isLong ? OrderSide.SELL : OrderSide.BUY)}\n        >\n          Take Profit\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => setValue('side', isLong ? OrderSide.BUY : OrderSide.SELL)}\n        >\n          Stop Loss\n        </button>\n      </div>\n\n      {/* Trigger Price Input */}\n      <div className=\"mb-4\">\n        <label>Trigger Price</label>\n        <input\n          type=\"number\"\n          value={formattedOrder.trigger_price || ''}\n          onChange={(e) => setValue('trigger_price', e.target.value)}\n        />\n      </div>\n\n      {/* Quantity Input */}\n      <div className=\"mb-4\">\n        <label>Quantity</label>\n        <input\n          type=\"number\"\n          value={formattedOrder.order_quantity || ''}\n          onChange={(e) => setValue('order_quantity', e.target.value)}\n        />\n      </div>\n\n      {/* Display Estimated PnL */}\n      <div className=\"mb-4\">\n        Est. PnL: {estimatedPnl.toFixed(2)} USD\n      </div>\n\n      <button type=\"submit\" disabled={loading}>\n        {loading ? 'Submitting...' : 'Place Stop Order'}\n      </button>\n    </form>\n  );\n};",
          "notes": [
            "The component uses `OrderType.STOP_MARKET`. Ensure you do not confuse this with `OrderType.LIMIT` or `OrderType.MARKET`, as Stop orders require a `trigger_price`.",
            "The `useOrderEntry` hook manages form state and validation. Accessing `errors` from `metaState` allows you to display real-time validation feedback to the user.",
            "PnL calculation is client-side estimation using `positions.unrealizedPnL`. It relies on the `trigger_price` input by the user, so it updates dynamically as they type.",
            "When closing a position, the logic for 'Take Profit' vs 'Stop Loss' is inverse to opening a position: Longs close by Selling, Shorts close by Buying.",
            "Ensure `useSymbolsInfo` has loaded before rendering inputs that depend on `symbolInfo` (like decimal precision)."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Understanding of Orderly Network Position data structure (API.PositionExt)",
            "Familiarity with `useOrderEntry` hook for form state management",
            "Knowledge of Order Types (STOP_MARKET vs LIMIT)"
          ],
          "related": [
            "useOrderEntry",
            "useSymbolsInfo",
            "positions.unrealizedPnL",
            "OrderType.STOP_MARKET"
          ]
        }
      ]
    },
    {
      "name": "Wallet Components",
      "patterns": [
        {
          "name": "ConnectWalletButton",
          "description": "A unified wallet connection interface that abstracts the complexity of managing both EVM (via Web3Onboard) and Solana (via Solana Wallet Adapter) connections. This component serves as the primary entry point for users to authenticate with an Orderly Network-enabled application.",
          "installation": "None (This component manages wallet adapters required to initialize the Orderly SDK. Install @web3-onboard/core and @solana/wallet-adapter-react for the underlying infrastructure).",
          "usage": {
            "props": "None. This is a self-contained UI component.",
            "context": "Requires the application to be wrapped in the following providers:\n1. Web3OnboardProvider (for EVM)\n2. WalletProvider (for Solana)\n3. WalletModalProvider (for Solana UI)",
            "integration": "Place this component in your application's header or navigation bar. It handles the state management for opening/closing the connection dialog and routing the user to the appropriate wallet selection modal based on their chosen chain (EVM vs Solana)."
          },
          "example": "import { useConnectWallet } from '@web3-onboard/react';\nimport { useWalletModal } from '@solana/wallet-adapter-react-ui';\nimport { useWalletMultiButton } from '@solana/wallet-adapter-base-ui';\nimport { useState, useEffect } from 'react';\n\nexport const ConnectWalletButton = () => {\n  const [open, setOpen] = useState(false);\n\n  // EVM Hook: Handles connection to Ethereum-compatible chains\n  const [{ wallet: evmWallet }, connectEvmWallet] = useConnectWallet();\n\n  // Solana Hooks: Handles connection to Solana chain\n  const { setVisible: setSolanaModalVisible } = useWalletModal();\n  const { buttonState, onConnect } = useWalletMultiButton({\n    onSelectWallet() {\n      setSolanaModalVisible(true);\n    }\n  });\n\n  // Auto-connect logic for Solana if a wallet is already detected\n  useEffect(() => {\n    if (buttonState === 'has-wallet' && onConnect) {\n      onConnect();\n    }\n  }, [buttonState, onConnect]);\n\n  const handleEvmConnect = async () => {\n    if (evmWallet) return;\n    await connectEvmWallet();\n  };\n\n  const handleSolanaConnect = () => {\n    setOpen(false);\n    if (buttonState === 'no-wallet') {\n      setSolanaModalVisible(true);\n    } else if (buttonState === 'has-wallet' && onConnect) {\n      onConnect();\n    }\n  };\n\n  return (\n    <div>\n      <button onClick={() => setOpen(true)}>Connect Wallet</button>\n      \n      {open && (\n        <div className=\"modal\">\n          <button onClick={handleEvmConnect}>Connect EVM Wallet</button>\n          <button onClick={handleSolanaConnect}>Connect Solana Wallet</button>\n          <button onClick={() => setOpen(false)}>Close</button>\n        </div>\n      )}\n    </div>\n  );\n};",
          "notes": [
            "Dual-Adapter Architecture: Orderly Network supports cross-chain trading. This pattern demonstrates how to bridge two distinct web3 ecosystems (Web3Onboard for EVM and Wallet Adapter for Solana) in a single UI.",
            "State Synchronization: The Solana adapter uses a specific 'buttonState' machine ('no-wallet', 'has-wallet', 'connecting', 'connected'). Ensure your UI logic handles these states correctly to avoid duplicate modal triggers.",
            "Provider Hierarchy: Solana's WalletModalProvider must be a child of WalletProvider. Failing to wrap the app correctly will cause 'useWalletModal' to throw a context error.",
            "EVM Check: The code checks `if (evmWallet) return;` before attempting to connect. This prevents re-triggering the connection flow if the user is already connected on the EVM side."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React Context API knowledge",
            "Configuration of Web3Onboard (EVM)",
            "Configuration of Solana Wallet Adapter"
          ],
          "related": ["useAccount", "useOrderlyContext"]
        },
        {
          "name": "EvmDropdownMenu",
          "description": "A dropdown menu component for managing EVM wallet connections within the Orderly Network ecosystem. It displays the current connected address and chain icon, allows users to switch between supported Mainnet and Testnet networks, and handles the disconnection process by coordinating between Orderly's account state and the Web3 wallet provider.",
          "installation": "npm install @orderly.network/hooks",
          "usage": {
            "requiredProps": "None (This component is self-contained in the example).",
            "optionalProps": "None.",
            "contextProviders": "Requires the application to be wrapped in Web3Onboard's provider (for useConnectWallet, useSetChain) and Orderly's context provider (for useAccountInstance).",
            "integrationSteps": "1. Ensure you have a configuration array for supported chains (e.g., supportedEvmChains) containing id, icon, label, and network type. 2. Import the component into your layout or header. 3. Ensure Web3Onboard is initialized at the root of your application."
          },
          "example": "import { useAccountInstance } from '@orderly.network/hooks';\nimport { useConnectWallet, useSetChain, useWallets } from '@web3-onboard/react';\nimport { FC } from 'react';\n\n// Define your supported chains configuration locally or import from config\nconst supportedEvmChains = [\n  { id: '0x1', label: 'Ethereum', icon: '/path/to/eth-icon.png', network: 'mainnet' },\n  { id: '0x89', label: 'Polygon', icon: '/path/to/poly-icon.png', network: 'mainnet' },\n  { id: '0xa4b1', label: 'Arbitrum', icon: '/path/to/arb-icon.png', network: 'testnet' }\n];\n\nexport const EvmDropdownMenu: FC = () => {\n  // 1. Access Orderly's account abstraction layer\n  const account = useAccountInstance();\n  \n  // 2. Access Web3Onboard hooks for wallet control\n  const [_, setChain] = useSetChain();\n  const [__, ___, disconnect] = useConnectWallet();\n  const connectedWallets = useWallets();\n\n  // 3. Determine current chain icon\n  const chainIcon = supportedEvmChains.find(({ id }) => id === account.chainId)?.icon;\n\n  const selectChain = (chainId: string) => () => {\n    // Triggers the wallet provider to request a network switch\n    setChain({ chainId });\n  };\n\n  const handleDisconnect = () => {\n    // 4. Critical: Disconnect from Orderly first\n    account.disconnect();\n    \n    // 5. Then disconnect the underlying wallet\n    if (connectedWallets.length > 0) {\n      disconnect({ label: connectedWallets[0].label });\n    }\n    \n    // Cleanup local storage state if applicable\n    window.localStorage.removeItem('chain-namespace');\n  };\n\n  return (\n    <div className=\"dropdown-container\">\n      <button className=\"trigger-button\">\n        {chainIcon && <img src={chainIcon} alt=\"chain\" />}\n        {`${account.address?.substring(0, 6)}...${account.address?.substr(-4)}`}\n      </button>\n      \n      <div className=\"dropdown-content\">\n        {/* Render Mainnet Options */}\n        {supportedEvmChains\n          .filter(({ network }) => network === 'mainnet')\n          .map(({ id, icon, label }) => (\n            <div \n              key={id} \n              onClick={selectChain(id)}\n              style={{ opacity: account.chainId === id ? 0.5 : 1 }}\n            >\n              <img src={icon} alt={label} /> {label}\n            </div>\n          ))}\n          \n        {/* Render Testnet Options */}\n        {/* ... similar mapping for testnet ... */}\n          \n        <div onClick={handleDisconnect}>\n          Disconnect\n        </div>\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Dual Disconnect Logic: Always call account.disconnect() before the wallet provider's disconnect method. This ensures the Orderly SDK clears its local state and session keys properly.",
            "Chain Switching: The setChain function from Web3Onboard handles the user prompt to switch networks in their wallet (e.g., MetaMask). Orderly's useAccountInstance will reactively update once the chain change is confirmed on-chain.",
            "State Synchronization: This component relies on the fact that useAccountInstance reflects the state of the connected wallet. If you switch chains outside this component, the UI will update automatically.",
            "Type Safety: Ensure the chain IDs in your supportedEvmChains configuration match the hex strings (e.g., '0x1') expected by Web3Onboard and returned by account.chainId.",
            "Storage Cleanup: The example includes window.localStorage.removeItem('chain-namespace'). This is specific to the example-dex implementation for persisting app preferences and may not be necessary for all integrations."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Web3Onboard provider initialized at the app root",
            "Orderly Context provider initialized",
            "Basic understanding of EVM chain IDs (Hex format)",
            "Configuration object for supported chains"
          ],
          "related": ["useAccountInstance", "useConnectWallet"]
        },
        {
          "name": "SolanaDropdownMenu",
          "description": "A UI component that manages wallet connection state and network selection for Solana within the Orderly ecosystem. It displays the truncated wallet address and current chain icon, while providing options to switch networks or fully disconnect the session.",
          "installation": "npm install @orderly.network/hooks",
          "usage": {
            "required_props": [],
            "optional_props": "None (this specific implementation relies on Context hooks rather than props).",
            "context_providers": "Requires the application to be wrapped in OrderlyProvider and Solana Wallet Adapter providers (WalletProvider, ConnectionProvider).",
            "integration_steps": "1. Ensure the Orderly context is active. 2. Use the useAccountInstance hook to access account details (address, chainId) and the disconnect method. 3. Integrate with a custom network provider (like SolanaProvider in the example) to handle chain switching logic. 4. Ensure the disconnect handler clears both Orderly state and the underlying wallet adapter state."
          },
          "example": "import React, { FC } from 'react';\nimport { useAccountInstance } from '@orderly.network/hooks';\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { DropdownMenu } from '@radix-ui/themes';\n\n// Define your supported chains configuration\nconst SUPPORTED_CHAINS = [\n  { id: 1115, network: 'orderly', label: 'Orderly Testnet', icon: '/path/to/icon.png' },\n  // ... other chains\n];\n\nexport const SolanaDropdownMenu: FC = () => {\n  // 1. Access Orderly account state and methods\n  const account = useAccountInstance();\n  \n  // 2. Access Solana wallet adapter methods\n  const { disconnect } = useWallet();\n\n  // 3. Determine current chain icon (assuming you have a mapping logic)\n  const currentChain = SUPPORTED_CHAINS.find(c => c.id === account.chainId);\n\n  const handleDisconnect = () => {\n    // 4. Critical: Disconnect from Orderly\n    account.disconnect();\n    \n    // 5. Critical: Disconnect from Solana Wallet Adapter\n    disconnect();\n    \n    // 6. Cleanup local storage or app state if necessary\n    window.localStorage.removeItem('chain-namespace');\n  };\n\n  return (\n    <DropdownMenu.Root>\n      <DropdownMenu.Trigger>\n        <button>\n          {currentChain && <img src={currentChain.icon} alt=\"chain\" />}\n          {/* Display truncated address from Orderly account */}\n          {account.address ? `${account.address.substring(0, 6)}...${account.address.substr(-4)}` : 'Connect'}\n        </button>\n      </DropdownMenu.Trigger>\n      \n      <DropdownMenu.Content>\n        {SUPPORTED_CHAINS.map((chain) => (\n          <DropdownMenu.Item \n            key={chain.id} \n            onSelect={() => /* Call your network switcher function */ console.log('Switch to', chain.network)}\n          >\n            {chain.label}\n          </DropdownMenu.Item>\n        ))}\n        \n        <DropdownMenu.Separator />\n        \n        <DropdownMenu.Item onSelect={handleDisconnect}>\n          Disconnect\n        </DropdownMenu.Item>\n      </DropdownMenu.Content>\n    </DropdownMenu.Root>\n  );\n};",
          "notes": [
            "Dual Disconnect: Always call both account.disconnect() (Orderly) and disconnect() (Wallet Adapter) to ensure the session is fully cleared.",
            "Chain ID Mapping: The account.chainId returned by Orderly must match your application's internal chain configuration IDs to display the correct icon.",
            "State Synchronization: When switching networks, ensure your custom provider updates the Orderly context, otherwise the UI may not reflect the change immediately.",
            "Type Safety: useAccountInstance returns an object where address can be undefined; always add optional chaining (?.) when rendering the address string."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React functional components",
            "Solana Wallet Adapter setup",
            "Orderly Provider configuration",
            "Understanding of React Context API"
          ],
          "related": ["useAccountInstance"]
        },
        {
          "name": "WalletConnection",
          "description": "A unified wallet connection controller that bridges EVM (via Web3Onboard) and Solana (via Wallet Adapter) ecosystems with the Orderly Network SDK. It handles the synchronization of wallet addresses, chain switching, and provider injection into the Orderly context.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "requiredProps": "None (This component consumes context and hooks rather than receiving props).",
            "optionalProps": "None.",
            "contextProviders": "Requires the application to be wrapped in Web3OnboardProvider (for EVM) and WalletProvider (for Solana), as well as Orderly's own context provider.",
            "integrationSteps": [
              "Ensure Web3Onboard and Solana Wallet Adapter providers are set up at the root of your application.",
              "Import and place the WalletConnection component in your header or navigation area.",
              "The component automatically detects wallet changes via useEffect hooks and calls account.setAddress() to update the Orderly SDK state.",
              "It conditionally renders different UI components (Connect Button vs. Dropdowns) based on connection status."
            ]
          },
          "example": "import { useAccount } from '@orderly.network/hooks';\nimport { ChainNamespace } from '@orderly.network/types';\nimport { useConnectWallet, useSetChain } from '@web3-onboard/react';\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { useEffect, useMemo } from 'react';\n\nexport const WalletConnection = () => {\n  // Access Orderly's global account state\n  const { account, state } = useAccount();\n\n  // --- EVM Integration ---\n  const [{ wallet: evmWallet }] = useConnectWallet();\n  const [{ connectedChain: connectedEvmChain }] = useSetChain();\n  \n  const evmAddress = useMemo(() => evmWallet?.accounts[0].address, [evmWallet]);\n\n  useEffect(() => {\n    // Sync EVM wallet with Orderly\n    if (evmWallet && connectedEvmChain && evmAddress) {\n      account.setAddress(evmAddress, {\n        chain: {\n          id: connectedEvmChain.id,\n          namespace: ChainNamespace.evm\n        },\n        provider: evmWallet.provider, // Pass the EIP-1193 provider\n        wallet: { name: evmWallet.label }\n      });\n    }\n  }, [account, evmWallet, evmAddress, connectedEvmChain]);\n\n  // --- Solana Integration ---\n  const { signMessage, sendTransaction, publicKey, wallet: solanaWallet } = useWallet();\n  const { connection: solanaConnection } = useConnection();\n\n  const solanaAddress = useMemo(() => publicKey?.toBase58(), [publicKey]);\n\n  useEffect(() => {\n    // Sync Solana wallet with Orderly\n    if (solanaWallet && solanaAddress) {\n      // Note: Orderly uses specific Chain IDs for Solana (900900900 for Mainnet)\n      account.setAddress(solanaAddress, {\n        chain: {\n          id: 900900900, \n          namespace: ChainNamespace.solana\n        },\n        // Solana requires a specific provider structure with signMessage/connection\n        provider: {\n          signMessage,\n          connection: solanaConnection,\n          sendTransaction\n        },\n        wallet: { name: solanaWallet.adapter.name }\n      });\n    }\n  }, [solanaAddress, account, solanaConnection, signMessage, sendTransaction, solanaWallet]);\n\n  // Render UI based on connection state\n  return account.address ? (\n    <div>Connected: {account.address.slice(0, 6)}...</div>\n  ) : (\n    <button>Connect Wallet</button>\n  );\n};",
          "notes": [
            "Chain IDs for Solana are hardcoded integers in Orderly (Mainnet: 900900900, Testnet: 901901901), unlike EVM which uses hex strings.",
            "The provider object structure differs significantly between EVM (standard provider) and Solana (object containing signMessage, connection, and sendTransaction).",
            "Always check if the wallet address matches the current account address before calling setAddress to prevent unnecessary re-renders or resets.",
            "The component uses localStorage to persist the 'chain-namespace', allowing the app to remember if the user was on EVM or Solana upon refresh.",
            "Ensure the Orderly Provider is initialized before this component mounts to avoid 'account is undefined' errors."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Understanding of React Hooks (useEffect, useMemo)",
            "Setup of Web3Onboard for EVM connections",
            "Setup of Solana Wallet Adapter for Solana connections",
            "Familiarity with Orderly's useAccount hook"
          ],
          "related": ["useAccount", "ChainNamespace"]
        }
      ]
    },
    {
      "name": "Account Components",
      "patterns": [
        {
          "name": "Assets",
          "description": "A dashboard component that displays and manages user assets, showing the distinction between on-chain wallet balance and Orderly account collateral, while providing interfaces for deposits, withdrawals, and PnL settlement.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": "This component requires no props but relies heavily on the Orderly Context and Web3 connection context. It must be rendered within an application wrapped by the OrderlyProvider. It automatically detects the connected chain to resolve token metadata for deposit/withdraw operations.",
          "example": "import {\n  useAccount,\n  useChains,\n  useCollateral,\n  useDeposit,\n  useWithdraw\n} from '@orderly.network/hooks';\nimport { AccountStatusEnum } from '@orderly.network/types';\nimport { FC, useMemo } from 'react';\n\nexport const Assets: FC = () => {\n  // 1. Access core account state and collateral data\n  const {\n    account,\n    state: { status }\n  } = useAccount();\n  const collateral = useCollateral();\n  const { withdraw, availableWithdraw } = useWithdraw();\n\n  // 2. Determine network settings (testnet vs mainnet)\n  const isTestnet = true; // Or derive from app state\n  const [chains] = useChains(isTestnet ? 'testnet' : 'mainnet');\n\n  // 3. Resolve token info based on the connected chain ID\n  // This is crucial for knowing which token (USDC, USDT, etc.) is being used\n  const token = useMemo(\n    () => chains.find((item) => item.network_infos.chain_id === account.chainId)?.token_infos[0],\n    [chains, account.chainId]\n  );\n\n  // 4. Initialize deposit hook with resolved token info\n  const deposit = useDeposit({\n    address: token?.address,\n    decimals: token?.decimals,\n    srcToken: token?.symbol,\n    srcChainId: Number(account.chainId)\n  });\n\n  // 5. Calculate wallet balance only if account is properly connected\n  const walletBalance = useMemo(\n    () => (status >= AccountStatusEnum.Connected ? deposit.balance : undefined),\n    [status, deposit, account.chainId]\n  );\n\n  const handleSettle = async () => {\n    try {\n      await account.settle();\n      alert('PnL Settled Successfully');\n    } catch (err) {\n      console.error('Settlement failed:', err);\n    }\n  };\n\n  return (\n    <div className=\"assets-container\">\n      <div className=\"balance-row\">\n        <span>Wallet Balance:</span>\n        <span>{walletBalance ?? '0.00'} {token?.symbol}</span>\n      </div>\n      <div className=\"balance-row\">\n        <span>Orderly Balance:</span>\n        <span>{collateral.availableBalance.toFixed(2)} USD</span>\n      </div>\n      \n      {/* Action Buttons */}\n      <button onClick={() => deposit.execute()}>Deposit</button>\n      <button onClick={() => withdraw.execute()}>Withdraw</button>\n      <button onClick={handleSettle}>Settle PnL</button>\n    </div>\n  );\n};",
          "notes": [
            "Token Resolution: The pattern of finding the token via `chains.find(...)` is essential because Orderly supports multiple chains, and the token address/decimals change depending on the connected network.",
            "Status Checks: Always check `status >= AccountStatusEnum.Connected` before accessing wallet-specific data to prevent rendering errors during the connection handshake.",
            "Balance Precision: The example uses `ethers.FixedNumber` for precise arithmetic in the UI. When displaying balances, ensure you handle decimal places correctly to avoid floating point errors.",
            "Settlement: The `account.settle()` function moves realized PnL from unsettled funds to available collateral. It is an async operation that requires user interaction.",
            "Hook Dependencies: `useDeposit` requires the token address and decimals. If these are undefined (e.g., chain not supported), the hook may throw or return invalid data."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Web3 Wallet Connection (e.g., Web3Onboard, Wagmi, or ConnectKit)",
            "OrderlyProvider configured in the app root",
            "Understanding of Orderly Account States (AccountStatusEnum)"
          ],
          "related": ["useAccount", "useCollateral", "useDeposit", "useWithdraw", "useChains"]
        },
        {
          "name": "OrderlyDeposit",
          "description": "A comprehensive UI component for managing fund transfers between a user's Web3 wallet and their Orderly trading account. It handles the full lifecycle of deposits (including ERC20 approvals) and withdrawals (including PnL settlements), with support for balance previews and testnet faucets.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "requiredProps": {
              "walletBalance": "FixedNumber - The current balance of the token in the user's wallet.",
              "orderlyBalance": "FixedNumber - The current balance of the token in the user's Orderly account.",
              "availableWithdraw": "FixedNumber - The amount available for withdrawal (may differ from total balance if unsettled PnL exists).",
              "withdraw": "Function - The withdraw function returned by the useWithdraw hook."
            },
            "optionalProps": "None defined in the interface, but relies on context from OrderlyProvider.",
            "context": "Requires the application to be wrapped in OrderlyProvider and a Web3 wallet provider (e.g., Web3Onboard).",
            "integration": "1. Import the component. 2. Fetch wallet and orderly balances using your preferred method (e.g., useBalance). 3. Instantiate the useWithdraw hook in the parent component. 4. Pass these values as props to OrderlyDeposit."
          },
          "example": "import { useAccount, useChains, useDeposit } from '@orderly.network/hooks';\nimport { OrderlyDeposit } from './OrderlyDeposit';\nimport { FixedNumber } from 'ethers';\n\nexport const WalletPage = () => {\n  const { account } = useAccount();\n  const [chains] = useChains('mainnet');\n  \n  // Identify token based on current chain\n  const token = chains.find(c => c.network_infos.chain_id === account.chainId)?.token_infos[0];\n\n  // Configure Deposit Hook\n  const { deposit, approve, allowance, setQuantity } = useDeposit({\n    address: token?.address,\n    decimals: token?.decimals,\n    srcToken: token?.symbol,\n    srcChainId: Number(account.chainId)\n  });\n\n  // Configure Withdraw Hook (passed to component)\n  const { withdraw } = useWithdraw();\n\n  // Mock balances - in production fetch via API or hooks\n  const walletBalance = FixedNumber.from(\"100.0\");\n  const orderlyBalance = FixedNumber.from(\"50.0\");\n  const availableWithdraw = FixedNumber.from(\"50.0\");\n\n  return (\n    <OrderlyDeposit \n      walletBalance={walletBalance}\n      orderlyBalance={orderlyBalance}\n      availableWithdraw={availableWithdraw}\n      withdraw={withdraw}\n    />\n  );\n};\n\n/* \nKey Implementation Pattern:\nInside the component, the transaction flow follows this logic:\n\n1. User inputs amount -> setQuantity(amount) is called.\n2. On Deposit Click:\n   - Check if Number(allowance) < amount.\n   - If true: Call approve(amount). Wait for success.\n   - If false: Call deposit().\n3. On Withdraw Click:\n   - Check if availableWithdraw < orderlyBalance.\n   - If true: Call account.settle() to settle PnL first.\n   - Call withdraw({ chainId, amount, token, allowCrossChainWithdraw }).\n*/",
          "notes": [
            "Approval Flow: The component automatically handles the ERC20 'approve' transaction if the user has not yet authorized Orderly to spend their tokens.",
            "Settlement Requirement: Before withdrawing, if 'availableWithdraw' is less than 'orderlyBalance', the component triggers 'account.settle()'. This is crucial for closing positions and realizing PnL.",
            "Quantity Sync: The useDeposit hook requires 'setQuantity' to be called with the input string value before executing the deposit function.",
            "Testnet Faucet: The component includes logic to mint test USDC via the Orderly testnet faucet API when 'isTestnet' is true.",
            "Math: Uses ethers.js FixedNumber for precise decimal arithmetic to avoid floating point errors.",
            "Cross-Chain: The example sets 'allowCrossChainWithdraw: false', meaning withdrawals only go to the current connected chain."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Active Web3 Wallet Connection",
            "Created Orderly Account (Wallet registered)",
            "Understanding of ERC20 Allowances (Approve/Deposit pattern)",
            "Basic understanding of Trading PnL and Settlement"
          ],
          "related": ["useDeposit", "useWithdraw", "useAccount", "useChains", "useBalance"]
        },
        {
          "name": "OrderlyConnect",
          "description": "A modal-based onboarding component that manages the Orderly Network account lifecycle. It automatically detects wallet connection status and guides users through account registration and secure Orderly Key generation required for trading.",
          "installation": "npm install @orderly.network/hooks @orderly.network/types",
          "usage": {
            "props": "None. This component operates autonomously based on context state.",
            "context": "Requires an active Wallet Provider (e.g., Web3Onboard) and the OrderlyProvider to be wrapping the application tree.",
            "integration": "Place this component high in your application layout (e.g., inside App.tsx or RootLayout). It listens to wallet connection events and automatically opens the modal if the connected wallet has not yet registered with Orderly or lacks a valid trading key.",
            "flow": "1. User connects wallet -> 2. Component checks AccountStatus -> 3. If status < SignedIn, prompt registration -> 4. If status < EnableTrading, prompt key creation."
          },
          "example": "import { useAccount } from '@orderly.network/hooks';\nimport { AccountStatusEnum } from '@orderly.network/types';\nimport { FC, useEffect, useState } from 'react';\n\nexport const OrderlyConnect: FC = () => {\n  const [open, setOpen] = useState(false);\n  // Access Orderly account state and methods\n  const { account, state } = useAccount();\n\n  // Auto-open modal if wallet is connected but account isn't ready for trading\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      // Check if user has wallet but hasn't finished onboarding\n      if (state.status < AccountStatusEnum.EnableTrading && account.address) {\n        setOpen(true);\n      }\n    }, 1000); // Slight delay for better UX\n    return () => clearTimeout(timer);\n  }, [state, account]);\n\n  const isRegistered = state.status >= AccountStatusEnum.SignedIn;\n  const hasOrderlyKey = state.status >= AccountStatusEnum.EnableTrading;\n\n  const handleRegister = async () => {\n    try {\n      // Step 1: Register the wallet address with Orderly\n      await account.createAccount();\n    } catch (error) {\n      console.error('Registration failed', error);\n    }\n  };\n\n  const handleCreateKey = async () => {\n    try {\n      // Step 2: Generate a private key stored locally for API signing\n      // Argument is expiration time in days (e.g., 365)\n      await account.createOrderlyKey(365);\n    } catch (error) {\n      console.error('Key creation failed', error);\n    }\n  };\n\n  if (!open) return null;\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal-content\">\n        <h2>Orderly Setup</h2>\n        \n        {/* Step 1: Registration */}\n        <div className=\"step\">\n          <p>1. Register Account</p>\n          <button \n            onClick={handleRegister} \n            disabled={isRegistered}\n          >\n            {isRegistered ? 'Done' : 'Register'}\n          </button>\n        </div>\n\n        {/* Step 2: Key Generation */}\n        <div className=\"step\">\n          <p>2. Create Trading Key</p>\n          <button \n            onClick={handleCreateKey} \n            disabled={hasOrderlyKey || !isRegistered}\n          >\n            {hasOrderlyKey ? 'Done' : 'Create Key'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};",
          "notes": [
            "Chain Synchronization: The source code includes logic to sync the wallet chain ID with the Orderly account context (account.switchChainId). Ensure this is implemented if your app supports multi-chain.",
            "Status Enums: Always use AccountStatusEnum for comparisons rather than magic numbers to ensure future compatibility.",
            "Key Storage: The Orderly Key generated by createOrderlyKey is stored in the browser's local storage. Users will need to recreate this key if they switch devices or clear cache.",
            "Modal Blocking: The source code prevents closing the modal (onInteractOutside) until the user is fully onboarded (hasOrderlyKey). This ensures users cannot trade without completing setup.",
            "Error Handling: Always wrap createAccount and createOrderlyKey in try/catch blocks, as these involve network requests and user wallet signatures."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "Working Web3 Wallet connection (e.g., Wagmi, Web3Onboard)",
            "OrderlyProvider configured in the app root",
            "Understanding of Asynchronous React patterns"
          ],
          "related": ["useAccount", "AccountStatusEnum", "createAccount", "createOrderlyKey"]
        },
        {
          "name": "LeverageDialog",
          "description": "A modal component that allows users to view their current account leverage and update it within the limits defined by the Orderly Network. It handles the asynchronous mutation of leverage settings and manages the UI state for pending changes.",
          "installation": "npm install @orderly.network/hooks",
          "usage": {
            "requiredProps": {
              "children": "ReactNode - The trigger element (e.g., a button) that opens the dialog."
            },
            "optionalProps": "None defined in the source, but relies on Radix UI Dialog props internally.",
            "context": "Must be wrapped within an OrderlyProvider context to access account data.",
            "integration": "1. Import useLeverage and useMarginRatio from @orderly.network/hooks. 2. Call useMarginRatio to get the current leverage display value. 3. Call useLeverage to get max leverage limits and the update function. 4. Implement a save handler that calls the update function with the desired leverage value."
          },
          "example": "import { useLeverage, useMarginRatio } from '@orderly.network/hooks';\nimport { FC, PropsWithChildren, useRef, useState } from 'react';\n\nexport const LeverageDialog: FC<PropsWithChildren> = ({ children }) => {\n  const [open, setOpen] = useState(false);\n  \n  // Fetch current display leverage\n  const { currentLeverage } = useMarginRatio();\n\n  // useLeverage returns a tuple: [maxLeverage, controlObject]\n  const [maxLeverage, { update, config: leverageLevers, isMutating }] = useLeverage();\n  \n  // Use a ref to store the pending value without triggering re-renders on every slide/change\n  const nextLeverage = useRef(maxLeverage ?? 0);\n\n  const handleSave = () => {\n    // Only submit if the value has actually changed\n    if (nextLeverage.current === maxLeverage) {\n      setOpen(false);\n      return;\n    }\n\n    update({ leverage: nextLeverage.current })\n      .then(() => {\n        setOpen(false);\n        // Handle success (e.g., toast notification)\n      })\n      .catch((err) => {\n        console.error(err);\n        // Handle error (e.g., show error message)\n      });\n  };\n\n  return (\n    <>\n      <button onClick={() => setOpen(true)}>{children}</button>\n      \n      {open && (\n        <div className=\"modal\">\n          <h3>Account Leverage</h3>\n          <p>Current: {currentLeverage}x</p>\n          <p>Max: {maxLeverage}x</p>\n          \n          {/* UI for selecting leverage would update nextLeverage.current */}\n          <input \n            type=\"number\" \n            defaultValue={maxLeverage} \n            onChange={(e) => nextLeverage.current = Number(e.target.value)} \n          />\n\n          <div className=\"actions\">\n            <button onClick={() => setOpen(false)}>Cancel</button>\n            <button onClick={handleSave} disabled={isMutating}>\n              {isMutating ? 'Saving...' : 'Save'}\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};",
          "notes": [
            "The useLeverage hook returns a specific tuple pattern: [maxLeverage, { update, config, isMutating }]. Ensure you destructure correctly.",
            "Use a ref (like useRef) for the 'pending' leverage value during user interaction to prevent unnecessary re-renders of the component tree while the user drags a slider or types.",
            "The update function returns a Promise. Always handle .then() for success (closing dialog) and .catch() for errors (validation failures or network issues).",
            "isMutating is a boolean provided by the hook that should be used to disable the submit button to prevent double-submissions.",
            "The config object (aliased as leverageLevers in the source) contains step constraints and valid ranges for building the input UI."
          ],
          "difficulty": "intermediate",
          "prerequisites": [
            "React functional components and hooks (useState, useRef)",
            "OrderlyProvider must be configured in the app root",
            "Understanding of Promise handling for async mutations"
          ],
          "related": ["useLeverage", "useMarginRatio"]
        },
        {
          "name": "LeverageEditor",
          "description": "A controlled slider component designed for adjusting trading leverage. It maps discrete leverage values (e.g., 1x, 5x, 10x) to slider indices and handles API submission on commit (mouse release), with automatic rollback on failure.",
          "installation": "None (UI-only component)",
          "usage": {
            "required_props": {
              "onSave": "(value: { leverage: number }) => Promise<void> - Async function called when the user commits a leverage change. This is where the Orderly SDK API call should be triggered.",
              "leverageLevers": "number[] - An array of allowed leverage values (e.g., [1, 2, 5, 10, 20]). The slider snaps to these specific values.",
              "maxLeverage": "number - The current leverage value of the position/account."
            },
            "optional_props": {},
            "integration_steps": "1. Fetch current leverage and allowed leverage steps from Orderly symbol info. 2. Pass the current leverage to `maxLeverage`. 3. Implement `onSave` to call the Orderly API (e.g., orderlyClient.updateLeverage). 4. Handle loading states and errors within the parent or the `onSave` promise.",
            "context": "This component does not require specific Orderly Providers but relies on the parent to fetch and provide leverage data."
          },
          "example": "import { LeverageEditor } from './components/LeverageEditor';\nimport { orderlyClient } from '@orderly/network';\n\nexport const PositionSettings = () => {\n  // In a real app, fetch these from Orderly Symbol Info\n  const currentLeverage = 5;\n  const leverageSteps = [1, 2, 5, 10, 20, 50, 100];\n\n  const handleSaveLeverage = async ({ leverage }: { leverage: number }) => {\n    try {\n      // Integration with Orderly SDK\n      // Note: Actual method depends on SDK version, typically involves setting leverage for a symbol\n      // await orderlyClient.trading.setLeverage({ symbol: 'PERP_BTC_USDC', leverage });\n      console.log(`Setting leverage to ${leverage}x`);\n      await new Promise(resolve => setTimeout(resolve, 500)); // Simulate network\n    } catch (error) {\n      console.error('Failed to update leverage', error);\n      throw error; // Throwing allows the component to revert the UI state\n    }\n  };\n\n  return (\n    <div className=\"p-4 border rounded\">\n      <h3>Adjust Leverage</h3>\n      <LeverageEditor\n        maxLeverage={currentLeverage}\n        leverageLevers={leverageSteps}\n        onSave={handleSaveLeverage}\n      />\n    </div>\n  );\n};",
          "notes": [
            "The component uses `onValueCommit` (from Radix UI) to trigger the API call only when the user releases the slider handle, preventing excessive API calls during dragging.",
            "If the `onSave` promise rejects, the component automatically reverts the slider to the previous `maxLeverage` value, ensuring the UI stays in sync with the server state.",
            "The `leverageLevers` array determines the granularity of the slider. Ensure these values are valid according to the Orderly symbol's `max_leverage` constraints.",
            "This component uses `@radix-ui/themes` for styling. Ensure your application has the Radix Theme provider set up."
          ],
          "difficulty": "beginner",
          "prerequisites": [
            "React Hooks (useState, useMemo)",
            "Orderly Account API (Update Leverage endpoint)",
            "Radix UI Slider"
          ],
          "related": ["useSymbolInfo", "useAccount", "usePositions"]
        }
      ]
    }
  ],
  "metadata": {
    "enrichedWithExamples": {
      "timestamp": "2026-02-05T10:43:33.972Z",
      "source": "https://github.com/orderlynetwork/example-dex",
      "mode": "ai-enhanced",
      "patternsAdded": 31,
      "errors": 0,
      "processedFiles": [
        "Lightweight Charts Integration",
        "TradingView Widget Setup",
        "Real-time Orderbook Display",
        "Complete Order Entry Form",
        "Position Display and Management",
        "Multi-Chain Wallet Connection",
        "Real-time Kline Data via WebSocket",
        "LightweightChart.tsx",
        "AdvancedChart.tsx",
        "websocket.service.ts",
        "CreateOrder.tsx",
        "Orderbook.tsx",
        "SymbolHeader.tsx",
        "SymbolSelection.tsx",
        "Positions.tsx",
        "UpdatePosition.tsx",
        "ClosePosition.tsx",
        "PendingOrders.tsx",
        "PendingOrder.tsx",
        "OrderTabs.tsx",
        "TpSlOrder.tsx",
        "StopOrder.tsx",
        "wallet/ConnectWalletButton.tsx",
        "wallet/EvmDropdownMenu.tsx",
        "wallet/SolanaDropdownMenu.tsx",
        "wallet/WalletConnection.tsx",
        "Assets.tsx",
        "OrderlyDeposit.tsx",
        "OrderlyConnect.tsx",
        "Leverage.tsx",
        "LeverageEditor.tsx"
      ],
      "model": "zai-org/GLM-4.7"
    }
  }
}
